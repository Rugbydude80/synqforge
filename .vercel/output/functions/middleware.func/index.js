
  
  globalThis._ENTRIES = {};
/**/;try{!function(){var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="9027a9b4-b6d8-49e7-81d5-37dd7d936b4c",a._sentryDebugIdIdentifier="sentry-dbid-9027a9b4-b6d8-49e7-81d5-37dd7d936b4c")}()}catch(a){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{172:(a,b,c)=>{"use strict";c.d(b,{U:()=>d});let d="production"},255:(a,b,c)=>{"use strict";c.d(b,{A9:()=>n,Iy:()=>m,MI:()=>i,TC:()=>l,kM:()=>k,nc:()=>j});var d=c(7657),e=c(9619),f=c(5358),g=c(2984),h=c(1744);let i=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function j(a){let b;if(!a)return;let c=a.match(i);if(c)return"1"===c[3]?b=!0:"0"===c[3]&&(b=!1),{traceId:c[1],parentSampled:b,parentSpanId:c[2]}}function k(a,b){let c=j(a),d=(0,e.yD)(b);if(!c?.traceId)return{traceId:(0,h.e)(),sampleRand:Math.random()};let f=function(a,b){let c=(0,g.i)(b?.sample_rand);if(void 0!==c)return c;let d=(0,g.i)(b?.sample_rate);return d&&a?.parentSampled!==void 0?a.parentSampled?Math.random()*d:d+Math.random()*(1-d):Math.random()}(c,d);d&&(d.sample_rand=f.toString());let{traceId:i,parentSpanId:k,parentSampled:l}=c;return{traceId:i,parentSpanId:k,sampled:l,dsc:d||{},sampleRand:f}}function l(a=(0,h.e)(),b=(0,h.Z)(),c){let d="";return void 0!==c&&(d=c?"-1":"-0"),`${a}-${b}${d}`}function m(a=(0,h.e)(),b=(0,h.Z)(),c){return`00-${a}-${b}-${c?"01":"00"}`}function n(a,b){let c=(0,f.ul)(a);return b&&c&&b!==c?(d.Yz.log(`Won't continue trace because org IDs don't match (incoming baggage: ${b}, SDK options: ${c})`),!1):!a.getOptions().strictTraceContinuation||(!b||!!c)&&(!!b||!c)||(d.Yz.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${b}, Sentry client: ${c})`),!1)}},480:(a,b,c)=>{"use strict";c.d(b,{f:()=>g,r:()=>f});var d=c(9379);let e="_sentrySpan";function f(a,b){b?(0,d.my)(a,e,b):delete a[e]}function g(a){return a[e]}},572:(a,b,c)=>{"use strict";c.d(b,{Rg:()=>h,e2:()=>g});var d=c(7957),e=c(7789),f=c(5146);function g(a,b){var c,e,g,h;let{fingerprint:i,span:j,breadcrumbs:k,sdkProcessingMetadata:l}=b;(function(a,b){let{extra:c,tags:d,user:e,contexts:f,level:g,transactionName:h}=b;Object.keys(c).length&&(a.extra={...c,...a.extra}),Object.keys(d).length&&(a.tags={...d,...a.tags}),Object.keys(e).length&&(a.user={...e,...a.user}),Object.keys(f).length&&(a.contexts={...f,...a.contexts}),g&&(a.level=g),h&&"transaction"!==a.type&&(a.transaction=h)})(a,b),j&&function(a,b){a.contexts={trace:(0,f.kX)(b),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:(0,d.k1)(b),...a.sdkProcessingMetadata};let c=(0,f.zU)(b),e=(0,f.et)(c).description;e&&!a.transaction&&"transaction"===a.type&&(a.transaction=e)}(a,j),c=a,e=i,c.fingerprint=c.fingerprint?Array.isArray(c.fingerprint)?c.fingerprint:[c.fingerprint]:[],e&&(c.fingerprint=c.fingerprint.concat(e)),c.fingerprint.length||delete c.fingerprint,function(a,b){let c=[...a.breadcrumbs||[],...b];a.breadcrumbs=c.length?c:void 0}(a,k),g=a,h=l,g.sdkProcessingMetadata={...g.sdkProcessingMetadata,...h}}function h(a,b){let{extra:c,tags:d,user:f,contexts:g,level:h,sdkProcessingMetadata:j,breadcrumbs:k,fingerprint:l,eventProcessors:m,attachments:n,propagationContext:o,transactionName:p,span:q}=b;i(a,"extra",c),i(a,"tags",d),i(a,"user",f),i(a,"contexts",g),a.sdkProcessingMetadata=(0,e.h)(a.sdkProcessingMetadata,j,2),h&&(a.level=h),p&&(a.transactionName=p),q&&(a.span=q),k.length&&(a.breadcrumbs=[...a.breadcrumbs,...k]),l.length&&(a.fingerprint=[...a.fingerprint,...l]),m.length&&(a.eventProcessors=[...a.eventProcessors,...m]),n.length&&(a.attachments=[...a.attachments,...n]),a.propagationContext={...a.propagationContext,...o}}function i(a,b,c){a[b]=(0,e.h)(a[b],c,1)}},1033:(a,b,c)=>{"use strict";c.d(b,{XW:()=>e,xg:()=>f});var d=c(8595);function e(a){return new g(b=>{b(a)})}function f(a){return new g((b,c)=>{c(a)})}class g{constructor(a){this._state=0,this._handlers=[],this._runExecutor(a)}then(a,b){return new g((c,d)=>{this._handlers.push([!1,b=>{if(a)try{c(a(b))}catch(a){d(a)}else c(b)},a=>{if(b)try{c(b(a))}catch(a){d(a)}else d(a)}]),this._executeHandlers()})}catch(a){return this.then(a=>a,a)}finally(a){return new g((b,c)=>{let d,e;return this.then(b=>{e=!1,d=b,a&&a()},b=>{e=!0,d=b,a&&a()}).then(()=>{if(e)return void c(d);b(d)})})}_executeHandlers(){if(0===this._state)return;let a=this._handlers.slice();this._handlers=[],a.forEach(a=>{a[0]||(1===this._state&&a[1](this._value),2===this._state&&a[2](this._value),a[0]=!0)})}_runExecutor(a){let b=(a,b)=>{if(0===this._state){if((0,d.Qg)(b))return void b.then(c,e);this._state=a,this._value=b,this._executeHandlers()}},c=a=>{b(1,a)},e=a=>{b(2,a)};try{a(c,e)}catch(a){e(a)}}}},1491:(a,b,c)=>{"use strict";c.d(b,{BY:()=>h,EU:()=>f,Se:()=>g});var d=c(7193),e=c(6144);function f(){return g(e.O),e.O}function g(a){let b=a.__SENTRY__=a.__SENTRY__||{};return b.version=b.version||d.M,b[d.M]=b[d.M]||{}}function h(a,b,c=e.O){let f=c.__SENTRY__=c.__SENTRY__||{},g=f[d.M]=f[d.M]||{};return g[a]||(g[a]=b())}},1744:(a,b,c)=>{"use strict";c.d(b,{Z:()=>f,e:()=>e});var d=c(8347);function e(){return(0,d.eJ)()}function f(){return(0,d.eJ)().substring(16)}},1838:(a,b,c)=>{"use strict";c.d(b,{AJ:()=>g,F3:()=>e,N8:()=>h,TJ:()=>f,a3:()=>d});let d=0,e=1,f=2;function g(a){if(a<400&&a>=100)return{code:e};if(a>=400&&a<500)switch(a){case 401:return{code:f,message:"unauthenticated"};case 403:return{code:f,message:"permission_denied"};case 404:return{code:f,message:"not_found"};case 409:return{code:f,message:"already_exists"};case 413:return{code:f,message:"failed_precondition"};case 429:return{code:f,message:"resource_exhausted"};case 499:return{code:f,message:"cancelled"};default:return{code:f,message:"invalid_argument"}}if(a>=500&&a<600)switch(a){case 501:return{code:f,message:"unimplemented"};case 503:return{code:f,message:"unavailable"};case 504:return{code:f,message:"deadline_exceeded"};default:return{code:f,message:"internal_error"}}return{code:f,message:"unknown_error"}}function h(a,b){a.setAttribute("http.response.status_code",b);let c=g(b);"unknown_error"!==c.message&&a.setStatus(c)}},2051:(a,b,c)=>{"use strict";c.d(b,{l:()=>e});var d=c(6144);function e(a){let b=d.O[Symbol.for("@vercel/request-context")],c=b?.get?.();c?.waitUntil&&c.waitUntil(a)}},2172:(a,b,c)=>{"use strict";c.d(b,{a:()=>g});var d=c(7657),e=c(5970),f=c(4612);async function g(){try{f.T&&d.Yz.log("Flushing events..."),await (0,e.bX)(2e3),f.T&&d.Yz.log("Done flushing events")}catch(a){f.T&&d.Yz.log("Error while flushing events:\n",a)}}},2674:(a,b,c)=>{"use strict";c.d(b,{E1:()=>l,Ef:()=>f,JD:()=>h,Le:()=>k,Sn:()=>i,i_:()=>d,jG:()=>m,sy:()=>e,uT:()=>g,xc:()=>j});let d="sentry.source",e="sentry.sample_rate",f="sentry.previous_trace_sample_rate",g="sentry.op",h="sentry.origin",i="sentry.measurement_unit",j="sentry.measurement_value",k="sentry.custom_span_name",l="sentry.profile_id",m="sentry.exclusive_time"},2984:(a,b,c)=>{"use strict";function d(a){if("boolean"==typeof a)return Number(a);let b="string"==typeof a?parseFloat(a):a;if(!("number"!=typeof b||isNaN(b))&&!(b<0)&&!(b>1))return b}c.d(b,{i:()=>d})},3211:(a,b,c)=>{"use strict";c.d(b,{KU:()=>m,m6:()=>j,o5:()=>h,rB:()=>l,rm:()=>i,v4:()=>k,vn:()=>n});var d=c(9191),e=c(1491),f=c(7791),g=c(1744);function h(){let a=(0,e.EU)();return(0,d.h)(a).getCurrentScope()}function i(){let a=(0,e.EU)();return(0,d.h)(a).getIsolationScope()}function j(){return(0,e.BY)("globalScope",()=>new f.H)}function k(...a){let b=(0,e.EU)(),c=(0,d.h)(b);if(2===a.length){let[b,d]=a;return b?c.withSetScope(b,d):c.withScope(d)}return c.withScope(a[0])}function l(...a){let b=(0,e.EU)(),c=(0,d.h)(b);if(2===a.length){let[b,d]=a;return b?c.withSetIsolationScope(b,d):c.withIsolationScope(d)}return c.withIsolationScope(a[0])}function m(){return h().getClient()}function n(a){let{traceId:b,parentSpanId:c,propagationSpanId:d}=a.getPropagationContext(),e={trace_id:b,span_id:d||(0,g.Z)()};return c&&(e.parent_span_id=c),e}},3711:(a,b,c)=>{"use strict";c.d(b,{q:()=>g,r:()=>f});var d=c(1491),e=c(7791);function f(){return(0,d.BY)("defaultCurrentScope",()=>new e.H)}function g(){return(0,d.BY)("defaultIsolationScope",()=>new e.H)}},4120:(a,b,c)=>{"use strict";c.d(b,{Xr:()=>h,_c:()=>g,gt:()=>f,xv:()=>e});var d=c(8595);function e(a,b=0){return"string"!=typeof a||0===b||a.length<=b?a:`${a.slice(0,b)}...`}function f(a,b){if(!Array.isArray(a))return"";let c=[];for(let b=0;b<a.length;b++){let e=a[b];try{(0,d.L2)(e)?c.push("[VueViewModel]"):c.push(String(e))}catch{c.push("[value cannot be serialized]")}}return c.join(b)}function g(a,b,c=!1){return!!(0,d.Kg)(a)&&((0,d.gd)(b)?b.test(a):!!(0,d.Kg)(b)&&(c?a===b:a.includes(b)))}function h(a,b=[],c=!1){return b.some(b=>g(a,b,c))}},4480:a=>{"use strict";a.exports=["chrome 64","edge 79","firefox 67","opera 51","safari 12"]},4612:(a,b,c)=>{"use strict";c.d(b,{T:()=>d});let d=!1},4687:(a,b,c)=>{"use strict";c.d(b,{s:()=>i});var d=c(3211),e=c(7174),f=c(5970),g=c(2051),h=c(2172);function i(a,b,c){(0,d.v4)(d=>{d.setSDKProcessingMetadata({normalizedRequest:{headers:(0,e.WK)(b.headers),method:b.method}}),d.setContext("nextjs",{request_path:b.path,router_kind:c.routerKind,router_path:c.routePath,route_type:c.routeType}),d.setTransactionName(c.routePath),(0,f.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.on_request_error"}}),(0,g.l)((0,h.a)())})}},5146:(a,b,c)=>{"use strict";c.d(b,{Bk:()=>H,CC:()=>p,Ck:()=>s,G_:()=>v,Hu:()=>E,Qh:()=>u,aO:()=>q,cI:()=>x,et:()=>z,kX:()=>t,pK:()=>A,uU:()=>w,xO:()=>F,xl:()=>I,yW:()=>B,zU:()=>G});var d=c(9191),e=c(1491),f=c(3211),g=c(2674),h=c(1838),i=c(5851),j=c(9379),k=c(1744),l=c(9452),m=c(255),n=c(7657),o=c(480);let p=0,q=1,r=!1;function s(a){let{spanId:b,traceId:c}=a.spanContext(),{data:d,op:e,parent_span_id:f,status:g,origin:h,links:i}=z(a);return{parent_span_id:f,span_id:b,trace_id:c,data:d,op:e,status:g,origin:h,links:i}}function t(a){let{spanId:b,traceId:c,isRemote:d}=a.spanContext(),e=d?b:z(a).parent_span_id,f=(0,i.L)(a).scope;return{parent_span_id:e,span_id:d?f?.getPropagationContext().propagationSpanId||(0,k.Z)():b,trace_id:c}}function u(a){let{traceId:b,spanId:c}=a.spanContext(),d=A(a);return(0,m.TC)(b,c,d)}function v(a){let{traceId:b,spanId:c}=a.spanContext(),d=A(a);return(0,m.Iy)(b,c,d)}function w(a){return a&&a.length>0?a.map(({context:{spanId:a,traceId:b,traceFlags:c,...d},attributes:e})=>({span_id:a,trace_id:b,sampled:c===q,attributes:e,...d})):void 0}function x(a){return"number"==typeof a?y(a):Array.isArray(a)?a[0]+a[1]/1e9:a instanceof Date?y(a.getTime()):(0,l.zf)()}function y(a){return a>0x2540be3ff?a/1e3:a}function z(a){var b;if("function"==typeof a.getSpanJSON)return a.getSpanJSON();let{spanId:c,traceId:d}=a.spanContext();if((b=a).attributes&&b.startTime&&b.name&&b.endTime&&b.status){let{attributes:b,startTime:e,name:f,endTime:h,status:i,links:j}=a;return{span_id:c,trace_id:d,data:b,description:f,parent_span_id:"parentSpanId"in a?a.parentSpanId:"parentSpanContext"in a?a.parentSpanContext?.spanId:void 0,start_timestamp:x(e),timestamp:x(h)||void 0,status:B(i),op:b[g.uT],origin:b[g.JD],links:w(j)}}return{span_id:c,trace_id:d,start_timestamp:0,data:{}}}function A(a){let{traceFlags:b}=a.spanContext();return b===q}function B(a){if(a&&a.code!==h.a3)return a.code===h.F3?"ok":a.message||"unknown_error"}let C="_sentryChildSpans",D="_sentryRootSpan";function E(a,b){let c=a[D]||a;(0,j.my)(b,D,c),a[C]?a[C].add(b):(0,j.my)(a,C,new Set([b]))}function F(a){let b=new Set;return!function a(c){if(!b.has(c)&&A(c))for(let d of(b.add(c),c[C]?Array.from(c[C]):[]))a(d)}(a),Array.from(b)}function G(a){return a[D]||a}function H(){let a=(0,e.EU)(),b=(0,d.h)(a);return b.getActiveSpan?b.getActiveSpan():(0,o.f)((0,f.o5)())}function I(){r||((0,n.pq)(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),r=!0)}},5356:a=>{"use strict";a.exports=require("node:buffer")},5358:(a,b,c)=>{"use strict";c.d(b,{AD:()=>k,SB:()=>h,ul:()=>j});var d=c(7217),e=c(7657);let f=/^o(\d+)\./,g=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function h(a,b=!1){let{host:c,path:d,pass:e,port:f,projectId:g,protocol:i,publicKey:j}=a;return`${i}://${j}${b&&e?`:${e}`:""}@${c}${f?`:${f}`:""}/${d?`${d}/`:d}${g}`}function i(a){return{protocol:a.protocol,publicKey:a.publicKey||"",pass:a.pass||"",host:a.host,port:a.port||"",path:a.path||"",projectId:a.projectId}}function j(a){let b,c=a.getOptions(),{host:d}=a.getDsn()||{};return c.orgId?b=String(c.orgId):d&&(b=function(a){let b=a.match(f);return b?.[1]}(d)),b}function k(a){let b="string"==typeof a?function(a){let b=g.exec(a);if(!b)return void(0,e.pq)(()=>{console.error(`Invalid Sentry Dsn: ${a}`)});let[c,d,f="",h="",j="",k=""]=b.slice(1),l="",m=k,n=m.split("/");if(n.length>1&&(l=n.slice(0,-1).join("/"),m=n.pop()),m){let a=m.match(/^\d+/);a&&(m=a[0])}return i({host:h,pass:f,path:l,projectId:m,port:j,protocol:c,publicKey:d})}(a):i(a);if(b&&function(a){if(!d.T)return!0;let{port:b,projectId:c,protocol:f}=a;return!["protocol","publicKey","host","projectId"].find(b=>!a[b]&&(e.Yz.error(`Invalid Sentry Dsn: ${b} missing`),!0))&&(c.match(/^\d+$/)?"http"!==f&&"https"!==f?(e.Yz.error(`Invalid Sentry Dsn: Invalid protocol ${f}`),!1):!(b&&isNaN(parseInt(b,10)))||(e.Yz.error(`Invalid Sentry Dsn: Invalid port ${b}`),!1):(e.Yz.error(`Invalid Sentry Dsn: Invalid projectId ${c}`),!1))}(b))return b}},5382:(a,b,c)=>{"use strict";c.r(b),c.d(b,{onRequestError:()=>f,register:()=>e});var d=c(4687);async function e(){(await Promise.resolve().then(c.bind(c,7694))).init({dsn:process.env.NEXT_PUBLIC_SENTRY_DSN,tracesSampleRate:1,debug:!1,environment:"production",beforeSend(a,b){if(a.request?.headers){let b=a.request.headers;b.authorization&&(b.authorization="[Filtered]"),b.cookie&&(b.cookie="[Filtered]")}return a}})}globalThis._sentryRewritesTunnelPath="/monitoring",globalThis.SENTRY_RELEASE={id:"5902242700f8420296346f568cc81d963ab727a6"},globalThis._sentryBasePath=void 0,globalThis._sentryNextJsVersion="15.5.4",globalThis._sentryRewriteFramesDistDir=".next";let f=d.s},5851:(a,b,c)=>{"use strict";c.d(b,{L:()=>i,d:()=>h});var d=c(9379),e=c(6144);let f="_sentryScope",g="_sentryIsolationScope";function h(a,b,c){a&&((0,d.my)(a,g,function(a){try{let b=e.O.WeakRef;if("function"==typeof b)return new b(a)}catch{}return a}(c)),(0,d.my)(a,f,b))}function i(a){return{scope:a[f],isolationScope:function(a){if(a){if("object"==typeof a&&"deref"in a&&"function"==typeof a.deref)try{return a.deref()}catch{return}return a}}(a[g])}}},5970:(a,b,c)=>{"use strict";c.d(b,{Cp:()=>k,Dp:()=>y,NA:()=>r,Ol:()=>z,Q:()=>t,SA:()=>A,SE:()=>u,T$:()=>v,VN:()=>x,Wt:()=>q,bX:()=>w,cx:()=>o,gV:()=>s,l7:()=>p,o:()=>n,r:()=>m,wd:()=>l});var d=c(3211),e=c(7217),f=c(7657),g=c(8595),h=c(8347),i=c(8943),j=c(9452);function k(a,b){return(0,d.o5)().captureException(a,(0,i.li)(b))}function l(a,b){let c="string"==typeof b?b:void 0,e="string"!=typeof b?{captureContext:b}:void 0;return(0,d.o5)().captureMessage(a,c,e)}function m(a,b){return(0,d.o5)().captureEvent(a,b)}function n(a,b){(0,d.rm)().setContext(a,b)}function o(a){(0,d.rm)().setExtras(a)}function p(a,b){(0,d.rm)().setExtra(a,b)}function q(a){(0,d.rm)().setTags(a)}function r(a,b){(0,d.rm)().setTag(a,b)}function s(a){(0,d.rm)().setUser(a)}function t(){return(0,d.rm)().lastEventId()}function u(a,b){let c=(0,d.o5)(),g=(0,d.KU)();if(g)if(g.captureCheckIn)return g.captureCheckIn(a,b,c);else e.T&&f.Yz.warn("Cannot capture check-in. Client does not support sending check-ins.");else e.T&&f.Yz.warn("Cannot capture check-in. No client defined.");return(0,h.eJ)()}function v(a,b,c){let e=u({monitorSlug:a,status:"in_progress"},c),f=(0,j.zf)();function h(b){u({monitorSlug:a,status:b,checkInId:e,duration:(0,j.zf)()-f})}return(0,d.rB)(()=>{let a;try{a=b()}catch(a){throw h("error"),a}return(0,g.Qg)(a)?a.then(a=>(h("ok"),a),a=>{throw h("error"),a}):(h("ok"),a)})}async function w(a){let b=(0,d.KU)();return b?b.flush(a):(e.T&&f.Yz.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function x(a){let b=(0,d.KU)();return b?b.close(a):(e.T&&f.Yz.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function y(){return!!(0,d.KU)()}function z(){let a=(0,d.KU)();return a?.getOptions().enabled!==!1&&!!a?.getTransport()}function A(a){(0,d.rm)().addEventProcessor(a)}},6144:(a,b,c)=>{"use strict";c.d(b,{O:()=>d});let d=globalThis},7174:(a,b,c)=>{"use strict";function d(a){let b={};try{a.forEach((a,c)=>{"string"==typeof a&&(b[c]=a)})}catch{}return b}function e(a){let b=Object.create(null);try{Object.entries(a).forEach(([a,c])=>{"string"==typeof c&&(b[a]=c)})}catch{}return b}function f(a){let b=d(a.headers);return{method:a.method,url:a.url,query_string:j(a.url),headers:b}}function g(a){let b=a.headers||{},c=("string"==typeof b["x-forwarded-host"]?b["x-forwarded-host"]:void 0)||("string"==typeof b.host?b.host:void 0),d=("string"==typeof b["x-forwarded-proto"]?b["x-forwarded-proto"]:void 0)||a.protocol||(a.socket?.encrypted?"https":"http"),f=a.url||"",g=function({url:a,protocol:b,host:c}){return a?.startsWith("http")?a:a&&c?`${b}://${c}${a}`:void 0}({url:f,host:c,protocol:d}),h=a.body||void 0,i=a.cookies;return{url:g,method:a.method,query_string:j(f),headers:e(b),cookies:i,data:h}}c.d(b,{Iv:()=>g,NI:()=>d,WK:()=>e,xF:()=>f,xY:()=>i});let h=["auth","token","secret","cookie","-user","password","key"];function i(a,b=!1){let c={};try{Object.entries(a).forEach(([a,d])=>{if(void 0!==d){let e=a.toLowerCase();if(!b&&h.some(a=>e.includes(a)))return;let f=`http.request.header.${e.replace(/-/g,"_")}`;Array.isArray(d)?c[f]=d.map(a=>null!=a?String(a):a).join(";"):"string"==typeof d&&(c[f]=d)}})}catch{}return c}function j(a){if(a)try{let b=new URL(a,"http://s.io").search.slice(1);return b.length?b:void 0}catch{return}}},7193:(a,b,c)=>{"use strict";c.d(b,{M:()=>d});let d="10.22.0"},7217:(a,b,c)=>{"use strict";c.d(b,{T:()=>d});let d=!1},7657:(a,b,c)=>{"use strict";c.d(b,{Ow:()=>g,Yz:()=>m,Z9:()=>h,pq:()=>i});var d=c(1491),e=c(7217),f=c(6144);let g=["debug","info","warn","error","log","assert","trace"],h={};function i(a){if(!("console"in f.O))return a();let b=f.O.console,c={},d=Object.keys(h);d.forEach(a=>{let d=h[a];c[a]=b[a],b[a]=d});try{return a()}finally{d.forEach(a=>{b[a]=c[a]})}}function j(){return l().enabled}function k(a,...b){e.T&&j()&&i(()=>{f.O.console[a](`Sentry Logger [${a}]:`,...b)})}function l(){return e.T?(0,d.BY)("loggerSettings",()=>({enabled:!1})):{enabled:!1}}let m={enable:function(){l().enabled=!0},disable:function(){l().enabled=!1},isEnabled:j,log:function(...a){k("log",...a)},warn:function(...a){k("warn",...a)},error:function(...a){k("error",...a)}}},7694:(a,b,c)=>{"use strict";let d;c.r(b),c.d(b,{SDK_VERSION:()=>ac.M,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>ae.uT,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>ae.JD,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>ae.sy,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>ae.i_,Scope:()=>dS.H,VercelEdgeClient:()=>fD,addBreadcrumb:()=>cH,addEventProcessor:()=>cf.SA,addIntegration:()=>bv,captureCheckIn:()=>cf.SE,captureConsoleIntegration:()=>dT,captureEvent:()=>cf.r,captureException:()=>cf.Cp,captureFeedback:()=>dU,captureMessage:()=>cf.wd,captureRequestError:()=>h0.s,captureUnderscoreErrorException:()=>h1,close:()=>cf.VN,consoleIntegration:()=>c0,consoleLoggingIntegration:()=>dX,continueTrace:()=>cv,createConsolaReporter:()=>dZ,createLangChainCallbackHandler:()=>d9,createTransport:()=>cJ,dedupeIntegration:()=>cL,eventFiltersIntegration:()=>cQ,extraErrorDataIntegration:()=>ea,featureFlagsIntegration:()=>ec,flush:()=>cf.bX,functionToStringIntegration:()=>cV,getActiveSpan:()=>$.Bk,getClient:()=>ag.KU,getCurrentScope:()=>ag.o5,getDefaultIntegrations:()=>ht,getGlobalScope:()=>ag.m6,getIsolationScope:()=>ag.rm,getRootSpan:()=>$.zU,getSpanDescendants:()=>$.xO,getSpanStatusFromHttpCode:()=>_.AJ,getTraceData:()=>cF,getTraceMetaTags:()=>ed,inboundFiltersIntegration:()=>cR,init:()=>h3,instrumentAnthropicAiClient:()=>ej,instrumentGoogleGenAIClient:()=>eq,instrumentOpenAiClient:()=>ez,instrumentSupabaseClient:()=>eH,isEnabled:()=>cf.Ol,isInitialized:()=>cf.Dp,lastEventId:()=>cf.Q,linkedErrorsIntegration:()=>cY,logger:()=>m,moduleMetadataIntegration:()=>eT,requestDataIntegration:()=>c4,rewriteFramesIntegration:()=>eX,setContext:()=>cf.o,setCurrentClient:()=>eY,setExtra:()=>cf.l7,setExtras:()=>cf.cx,setHttpStatus:()=>_.N8,setMeasurement:()=>cd,setTag:()=>cf.NA,setTags:()=>cf.Wt,setUser:()=>cf.gV,spanToBaggageHeader:()=>av.HW,spanToJSON:()=>$.et,spanToTraceHeader:()=>$.Qh,startInactiveSpan:()=>cu,startNewTrace:()=>cy,startSpan:()=>cs,startSpanManual:()=>ct,supabaseIntegration:()=>eI,suppressTracing:()=>cx,trpcMiddleware:()=>e$,vercelAIIntegration:()=>hu,winterCGFetchIntegration:()=>hm,withActiveSpan:()=>cw,withIsolationScope:()=>ag.rB,withMonitor:()=>cf.T$,withScope:()=>ag.v4,withSentryConfig:()=>h4,withServerActionInstrumentation:()=>h$,wrapApiHandlerWithSentry:()=>h2,wrapApiHandlerWithSentryVercelCrons:()=>hV,wrapAppGetInitialPropsWithSentry:()=>hH,wrapDocumentGetInitialPropsWithSentry:()=>hI,wrapErrorGetInitialPropsWithSentry:()=>hJ,wrapGenerationFunctionWithSentry:()=>hY,wrapGetInitialPropsWithSentry:()=>hG,wrapGetServerSidePropsWithSentry:()=>hK,wrapGetStaticPropsWithSentry:()=>hF,wrapMcpServerWithSentry:()=>fs,wrapMiddlewareWithSentry:()=>hW,wrapPageComponentWithSentry:()=>hX,wrapRouteHandlerWithSentry:()=>hU,wrapServerComponentWithSentry:()=>hT,zodErrorsIntegration:()=>fu});var e,f,g,h,i,j,k,l,m={};function n(a){return Symbol.for(a)}c.r(m),c.d(m,{debug:()=>eM,error:()=>eP,fatal:()=>eQ,fmt:()=>eJ,info:()=>eN,trace:()=>eL,warn:()=>eO});var o=new function a(b){var c=this;c._currentContext=b?new Map(b):new Map,c.getValue=function(a){return c._currentContext.get(a)},c.setValue=function(b,d){var e=new a(c._currentContext);return e._currentContext.set(b,d),e},c.deleteValue=function(b){var d=new a(c._currentContext);return d._currentContext.delete(b),d}},p=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},q=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},r=function(){function a(){}return a.prototype.active=function(){return o},a.prototype.with=function(a,b,c){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];return b.call.apply(b,q([c],p(d),!1))},a.prototype.bind=function(a,b){return b},a.prototype.enable=function(){return this},a.prototype.disable=function(){return this},a}(),s="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof c.g?c.g:{},t="1.9.0",u=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,v=function(a){var b=new Set([a]),c=new Set,d=a.match(u);if(!d)return function(){return!1};var e={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=e.prerelease)return function(b){return b===a};function f(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;var d=a.match(u);if(!d)return f(a);var g={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=g.prerelease||e.major!==g.major)return f(a);if(0===e.major)return e.minor===g.minor&&e.patch<=g.patch?(b.add(a),!0):f(a);return e.minor<=g.minor?(b.add(a),!0):f(a)}}(t),w=Symbol.for("opentelemetry.js.api."+t.split(".")[0]);function x(a,b,c,d){void 0===d&&(d=!1);var e,f=s[w]=null!=(e=s[w])?e:{version:t};if(!d&&f[a]){var g=Error("@opentelemetry/api: Attempted duplicate registration of API: "+a);return c.error(g.stack||g.message),!1}if(f.version!==t){var g=Error("@opentelemetry/api: Registration of version v"+f.version+" for "+a+" does not match previously registered API v"+t);return c.error(g.stack||g.message),!1}return f[a]=b,c.debug("@opentelemetry/api: Registered a global for "+a+" v"+t+"."),!0}function y(a){var b,c,d=null==(b=s[w])?void 0:b.version;if(d&&v(d))return null==(c=s[w])?void 0:c[a]}function z(a,b){b.debug("@opentelemetry/api: Unregistering a global for "+a+" v"+t+".");var c=s[w];c&&delete c[a]}var A=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},B=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},C=function(){function a(a){this._namespace=a.namespace||"DiagComponentLogger"}return a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return D("debug",this._namespace,a)},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return D("error",this._namespace,a)},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return D("info",this._namespace,a)},a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return D("warn",this._namespace,a)},a.prototype.verbose=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return D("verbose",this._namespace,a)},a}();function D(a,b,c){var d=y("diag");if(d)return c.unshift(b),d[a].apply(d,B([],A(c),!1))}!function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(e||(e={}));var E=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},F=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},G=function(){function a(){function a(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=y("diag");if(d)return d[a].apply(d,F([],E(b),!1))}}var b=this;b.setLogger=function(a,c){if(void 0===c&&(c={logLevel:e.INFO}),a===b){var d,f,g,h=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=h.stack)?d:h.message),!1}"number"==typeof c&&(c={logLevel:c});var i=y("diag"),j=function(a,b){function c(c,d){var e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<e.NONE?a=e.NONE:a>e.ALL&&(a=e.ALL),b=b||{},{error:c("error",e.ERROR),warn:c("warn",e.WARN),info:c("info",e.INFO),debug:c("debug",e.DEBUG),verbose:c("verbose",e.VERBOSE)}}(null!=(f=c.logLevel)?f:e.INFO,a);if(i&&!c.suppressOverrideMessage){var k=null!=(g=Error().stack)?g:"<failed to generate stacktrace>";i.warn("Current logger will be overwritten from "+k),j.warn("Current logger will overwrite one already registered from "+k)}return x("diag",j,b,!0)},b.disable=function(){z("diag",b)},b.createComponentLogger=function(a){return new C(a)},b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}(),H=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},I=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},J="context",K=new r,L=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalContextManager=function(a){return x(J,a,G.instance())},a.prototype.active=function(){return this._getContextManager().active()},a.prototype.with=function(a,b,c){for(var d,e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];return(d=this._getContextManager()).with.apply(d,I([a,b,c],H(e),!1))},a.prototype.bind=function(a,b){return this._getContextManager().bind(a,b)},a.prototype._getContextManager=function(){return y(J)||K},a.prototype.disable=function(){this._getContextManager().disable(),z(J,G.instance())},a}(),M=L.getInstance(),N=c(7217),O=c(6144),P=c(7657),Q=c(9232);let R={},S={};function T(a,b){R[a]=R[a]||[],R[a].push(b)}function U(a,b){if(!S[a]){S[a]=!0;try{b()}catch(b){N.T&&P.Yz.error(`Error while instrumenting ${a}`,b)}}}function V(a,b){let c=a&&R[a];if(c)for(let d of c)try{d(b)}catch(b){N.T&&P.Yz.error(`Error while triggering instrumentation handler.
Type: ${a}
Name: ${(0,Q.qQ)(d)}
Error:`,b)}}let W=null;function X(){W=O.O.onerror,O.O.onerror=function(a,b,c,d,e){return V("error",{column:d,error:e,line:c,msg:a,url:b}),!!W&&W.apply(this,arguments)},O.O.onerror.__SENTRY_INSTRUMENTED__=!0}let Y=null;function Z(){Y=O.O.onunhandledrejection,O.O.onunhandledrejection=function(a){return V("unhandledrejection",a),!Y||Y.apply(this,arguments)},O.O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var $=c(5146),_=c(1838);let aa=!1;function ab(){if(!aa){a.tag="sentry_tracingErrorCallback",aa=!0;let b="error";T(b,a),U(b,X);let c="unhandledrejection";T(c,a),U(c,Z)}function a(){let a=(0,$.Bk)(),b=a&&(0,$.zU)(a);if(b){let a="internal_error";N.T&&P.Yz.log(`[Tracing] Root span: ${a} -> Global error occurred`),b.setStatus({code:_.TJ,message:a})}}}var ac=c(7193);function ad(a,b,c=[b],d="npm"){let e=a._metadata||{};e.sdk||(e.sdk={name:`sentry.javascript.${b}`,packages:c.map(a=>({name:`${d}:@sentry/${a}`,version:ac.M})),version:ac.M}),a._metadata=e}var ae=c(2674),af=c(5851),ag=c(3211);function ah(a){return"isRelative"in a}function ai(a,b){let c=0>=a.indexOf("://")&&0!==a.indexOf("//"),d=b??(c?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(a,d))return;let b=new URL(a,d);if(c)return{isRelative:c,pathname:b.pathname,search:b.search,hash:b.hash};return b}catch{}}function aj(a){if(ah(a))return a.pathname;let b=new URL(a);return b.search="",b.hash="",["80","443"].includes(b.port)&&(b.port=""),b.password&&(b.password="%filtered%"),b.username&&(b.username="%filtered%"),b.toString()}function ak(a){if(!a)return{};let b=a.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!b)return{};let c=b[6]||"",d=b[8]||"";return{host:b[4],path:b[5],protocol:b[2],search:c,hash:d,relative:b[5]+c+d}}function al(a){return a.split(/[?#]/,1)[0]}function am(a){let{protocol:b,host:c,path:d}=a,e=c?.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${b?`${b}://`:""}${e}${d}`}var an=c(2051);let ao="telemetry.sdk.language",ap="telemetry.sdk.name",aq="telemetry.sdk.version";var ar=c(9619);class as{constructor(a){this._maxSize=a,this._cache=new Map}get size(){return this._cache.size}get(a){let b=this._cache.get(a);if(void 0!==b)return this._cache.delete(a),this._cache.set(a,b),b}set(a,b){if(this._cache.size>=this._maxSize){let a=this._cache.keys().next().value;this._cache.delete(a)}this._cache.set(a,b)}remove(a){let b=this._cache.get(a);return b&&this._cache.delete(a),b}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let a=[];return this._cache.forEach(b=>a.push(b)),a}}var at=c(255),au=c(4120),av=c(7957);!function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(f||(f={}));var aw="0000000000000000",ax="00000000000000000000000000000000",ay={traceId:ax,spanId:aw,traceFlags:f.NONE},az=function(){function a(a){void 0===a&&(a=ay),this._spanContext=a}return a.prototype.spanContext=function(){return this._spanContext},a.prototype.setAttribute=function(a,b){return this},a.prototype.setAttributes=function(a){return this},a.prototype.addEvent=function(a,b){return this},a.prototype.addLink=function(a){return this},a.prototype.addLinks=function(a){return this},a.prototype.setStatus=function(a){return this},a.prototype.updateName=function(a){return this},a.prototype.end=function(a){},a.prototype.isRecording=function(){return!1},a.prototype.recordException=function(a,b){},a}(),aA=n("OpenTelemetry Context Key SPAN");function aB(a){return a.getValue(aA)||void 0}function aC(){return aB(L.getInstance().active())}function aD(a,b){return a.setValue(aA,b)}function aE(a){return a.deleteValue(aA)}function aF(a,b){return aD(a,new az(b))}function aG(a){var b;return null==(b=aB(a))?void 0:b.spanContext()}var aH=/^([0-9a-f]{32})$/i,aI=/^[0-9a-f]{16}$/i;function aJ(a){return aH.test(a)&&a!==ax}function aK(a){var b;return aJ(a.traceId)&&(b=a.spanId,aI.test(b)&&b!==aw)}function aL(a){return new az(a)}var aM=L.getInstance(),aN=function(){function a(){}return a.prototype.startSpan=function(a,b,c){if(void 0===c&&(c=aM.active()),null==b?void 0:b.root)return new az;var d,e=c&&aG(c);return"object"==typeof(d=e)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&aK(e)?new az(e):new az},a.prototype.startActiveSpan=function(a,b,c,d){if(!(arguments.length<2)){2==arguments.length?g=b:3==arguments.length?(e=b,g=c):(e=b,f=c,g=d);var e,f,g,h=null!=f?f:aM.active(),i=this.startSpan(a,e,h),j=aD(h,i);return aM.with(j,g,void 0,i)}},a}(),aO=new aN,aP=function(){function a(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}return a.prototype.startSpan=function(a,b,c){return this._getTracer().startSpan(a,b,c)},a.prototype.startActiveSpan=function(a,b,c,d){var e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)},a.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):aO},a}(),aQ=new(function(){function a(){}return a.prototype.getTracer=function(a,b,c){return new aN},a}()),aR=function(){function a(){}return a.prototype.getTracer=function(a,b,c){var d;return null!=(d=this.getDelegateTracer(a,b,c))?d:new aP(this,a,b,c)},a.prototype.getDelegate=function(){var a;return null!=(a=this._delegate)?a:aQ},a.prototype.setDelegate=function(a){this._delegate=a},a.prototype.getDelegateTracer=function(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)},a}(),aS="trace",aT=(function(){function a(){this._proxyTracerProvider=new aR,this.wrapSpanContext=aL,this.isSpanContextValid=aK,this.deleteSpan=aE,this.getSpan=aB,this.getActiveSpan=aC,this.getSpanContext=aG,this.setSpan=aD,this.setSpanContext=aF}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(a){var b=x(aS,this._proxyTracerProvider,G.instance());return b&&this._proxyTracerProvider.setDelegate(a),b},a.prototype.getTracerProvider=function(){return y(aS)||this._proxyTracerProvider},a.prototype.getTracer=function(a,b){return this.getTracerProvider().getTracer(a,b)},a.prototype.disable=function(){z(aS,G.instance()),this._proxyTracerProvider=new aR},a})().getInstance(),aU=function(){function a(){}return a.prototype.inject=function(a,b){},a.prototype.extract=function(a,b){return a},a.prototype.fields=function(){return[]},a}(),aV={get:function(a,b){if(null!=a)return a[b]},keys:function(a){return null==a?[]:Object.keys(a)}},aW={set:function(a,b,c){null!=a&&(a[b]=c)}},aX=n("OpenTelemetry Baggage Key");function aY(a){return a.getValue(aX)||void 0}function aZ(){return aY(L.getInstance().active())}function a$(a,b){return a.setValue(aX,b)}function a_(a){return a.deleteValue(aX)}var a0=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},a1=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},a2=function(){function a(a){this._entries=a?new Map(a):new Map}return a.prototype.getEntry=function(a){var b=this._entries.get(a);if(b)return Object.assign({},b)},a.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(a){var b=a0(a,2);return[b[0],b[1]]})},a.prototype.setEntry=function(b,c){var d=new a(this._entries);return d._entries.set(b,c),d},a.prototype.removeEntry=function(b){var c=new a(this._entries);return c._entries.delete(b),c},a.prototype.removeEntries=function(){for(var b,c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];var f=new a(this._entries);try{for(var g=a1(d),h=g.next();!h.done;h=g.next()){var i=h.value;f._entries.delete(i)}}catch(a){b={error:a}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(b)throw b.error}}return f},a.prototype.clear=function(){return new a},a}(),a3=Symbol("BaggageEntryMetadata"),a4=G.instance();function a5(a){return void 0===a&&(a={}),new a2(new Map(Object.entries(a)))}var a6="propagation",a7=new aU,a8=(function(){function a(){this.createBaggage=a5,this.getBaggage=aY,this.getActiveBaggage=aZ,this.setBaggage=a$,this.deleteBaggage=a_}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalPropagator=function(a){return x(a6,a,G.instance())},a.prototype.inject=function(a,b,c){return void 0===c&&(c=aW),this._getGlobalPropagator().inject(a,b,c)},a.prototype.extract=function(a,b,c){return void 0===c&&(c=aV),this._getGlobalPropagator().extract(a,b,c)},a.prototype.fields=function(){return this._getGlobalPropagator().fields()},a.prototype.disable=function(){z(a6,G.instance())},a.prototype._getGlobalPropagator=function(){return y(a6)||a7},a})().getInstance();let a9="[_0-9a-z-*/]",ba=`[a-z]${a9}{0,255}`,bb=`[a-z0-9]${a9}{0,240}@[a-z]${a9}{0,13}`,bc=RegExp(`^(?:${ba}|${bb})$`),bd=/^[ -~]{0,255}[!-~]$/,be=/,|=/;class bf{_internalState=new Map;constructor(a){a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),d=c.indexOf("=");if(-1!==d){let e=c.slice(0,d),f=c.slice(d+1,b.length);bc.test(e)&&bd.test(f)&&!be.test(f)&&a.set(e,f)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new bf;return a._internalState=new Map(this._internalState),a}}n("OpenTelemetry SDK Context Key SUPPRESS_TRACING");let bg=n("sentry_scopes");n("sentry_fork_isolation_scope"),n("sentry_fork_set_scope"),n("sentry_fork_set_isolation_scope");var bh=c(5358),bi=c(1491),bj=c(8168);function bk(a,b=[]){return[a,b]}function bl(a,b){for(let c of a[1]){let a=c[0].type;if(b(c,a))return!0}return!1}function bm(a){let b=(0,bi.Se)(O.O);return b.encodePolyfill?b.encodePolyfill(a):new TextEncoder().encode(a)}let bn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function bo(a){if(!a?.sdk)return;let{name:b,version:c}=a.sdk;return{name:b,version:c}}var bp=c(172);function bq(a){P.Yz.log(`Ignoring span ${a.op} - ${a.description} because it matches \`ignoreSpans\`.`)}function br(a,b){if(!b?.length||!a.description)return!1;for(let d of b){var c;if("string"==typeof(c=d)||c instanceof RegExp){if((0,au._c)(a.description,d))return N.T&&bq(a),!0;continue}if(!d.name&&!d.op)continue;let b=!d.name||(0,au._c)(a.description,d.name),e=!d.op||a.op&&(0,au._c)(a.op,d.op);if(b&&e)return N.T&&bq(a),!0}return!1}let bs=[];function bt(a,b){for(let c of b)c?.afterAllSetup&&c.afterAllSetup(a)}function bu(a,b,c){if(c[b.name]){N.T&&P.Yz.log(`Integration skipped because it was already installed: ${b.name}`);return}if(c[b.name]=b,-1===bs.indexOf(b.name)&&"function"==typeof b.setupOnce&&(b.setupOnce(),bs.push(b.name)),b.setup&&"function"==typeof b.setup&&b.setup(a),"function"==typeof b.preprocessEvent){let c=b.preprocessEvent.bind(b);a.on("preprocessEvent",(b,d)=>c(b,d,a))}if("function"==typeof b.processEvent){let c=b.processEvent.bind(b),d=Object.assign((b,d)=>c(b,d,a),{id:b.name});a.addEventProcessor(d)}N.T&&P.Yz.log(`Integration installed: ${b.name}`)}function bv(a){let b=(0,ag.KU)();if(!b){N.T&&P.Yz.warn(`Cannot add integration "${a.name}" because no SDK Client is available.`);return}b.addIntegration(a)}var bw=c(572),bx=c(8595),by=c(480),bz=c(9452);function bA(a,b){return b?(0,ag.v4)(b,()=>{let c=(0,$.Bk)(),d=c?(0,$.kX)(c):(0,ag.vn)(b);return[c?(0,av.k1)(c):(0,av.ao)(a,b),d]}):[void 0,void 0]}let bB={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function bC(a,b,c,d=!0){c&&(!a[b]||d)&&(a[b]=c)}function bD(a,b){var c;let d=bG(),e=(c=a,bG().get(c));void 0===e?d.set(a,[b]):(d.set(a,[...e,b]),e.length>=100&&bF(a,e))}function bE(a,b=(0,ag.o5)(),c=bD){let d=b?.getClient()??(0,ag.KU)();if(!d){N.T&&P.Yz.warn("No client available to capture log.");return}let{release:e,environment:f,enableLogs:g=!1,beforeSendLog:h}=d.getOptions();if(!g){N.T&&P.Yz.warn("logging option not enabled, log will not be captured.");return}let[,i]=bA(d,b),j={...a.attributes},{user:{id:k,email:l,username:m}}=function(a){let b=(0,ag.m6)().getScopeData();return(0,bw.Rg)(b,(0,ag.rm)().getScopeData()),(0,bw.Rg)(b,a.getScopeData()),b}(b);bC(j,"user.id",k,!1),bC(j,"user.email",l,!1),bC(j,"user.name",m,!1),bC(j,"sentry.release",e),bC(j,"sentry.environment",f);let{name:n,version:o}=d.getSdkMetadata()?.sdk??{};bC(j,"sentry.sdk.name",n),bC(j,"sentry.sdk.version",o);let p=d.getIntegrationByName("Replay"),q=p?.getReplayId(!0);bC(j,"sentry.replay_id",q),q&&p?.getRecordingMode()==="buffer"&&bC(j,"sentry._internal.replay_is_buffering",!0);let r=a.message;if((0,bx.NF)(r)){let{__sentry_template_string__:a,__sentry_template_values__:b=[]}=r;b?.length&&(j["sentry.message.template"]=a),b.forEach((a,b)=>{j[`sentry.message.parameter.${b}`]=a})}let s=(0,by.f)(b);bC(j,"sentry.trace.parent_span_id",s?.spanContext().spanId);let t={...a,attributes:j};d.emit("beforeCaptureLog",t);let u=h?(0,P.pq)(()=>h(t)):t;if(!u){d.recordDroppedEvent("before_send","log_item",1),N.T&&P.Yz.warn("beforeSendLog returned null, log will not be captured.");return}let{level:v,message:w,attributes:x={},severityNumber:y}=u;c(d,{timestamp:(0,bz.zf)(),level:v,body:w,trace_id:i?.trace_id,severity_number:y??bB[v],attributes:Object.keys(x).reduce((a,b)=>(a[b]=function(a){switch(typeof a){case"number":if(Number.isInteger(a))return{value:a,type:"integer"};return{value:a,type:"double"};case"boolean":return{value:a,type:"boolean"};case"string":return{value:a,type:"string"};default:{let b="";try{b=JSON.stringify(a)??""}catch{}return{value:b,type:"string"}}}}(x[b]),a),{})}),d.emit("afterCaptureLog",u)}function bF(a,b){var c;let d=b??(c=a,bG().get(c))??[];if(0===d.length)return;let e=a.getOptions(),f=function(a,b,c,d){let e={};return b?.sdk&&(e.sdk={name:b.sdk.name,version:b.sdk.version}),c&&d&&(e.dsn=(0,bh.SB)(d)),bk(e,[[{type:"log",item_count:a.length,content_type:"application/vnd.sentry.items.log+json"},{items:a}]])}(d,e._metadata,e.tunnel,a.getDsn());bG().set(a,[]),a.emit("flushLogs"),a.sendEnvelope(f)}function bG(){return(0,bi.BY)("clientToLogBufferMap",()=>new WeakMap)}function bH(a,b){var c;let d=b??(c=a,bI().get(c))??[];if(0===d.length)return;let e=a.getOptions(),f=function(a,b,c,d){let e={};return b?.sdk&&(e.sdk={name:b.sdk.name,version:b.sdk.version}),c&&d&&(e.dsn=(0,bh.SB)(d)),bk(e,[[{type:"trace_metric",item_count:a.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:a}]])}(d,e._metadata,e.tunnel,a.getDsn());bI().set(a,[]),a.emit("flushMetrics"),a.sendEnvelope(f)}function bI(){return(0,bi.BY)("clientToMetricBufferMap",()=>new WeakMap)}var bJ=c(8339);function bK(a){let b=[];a.message&&b.push(a.message);try{let c=a.exception.values[a.exception.values.length-1];c?.value&&(b.push(c.value),c.type&&b.push(`${c.type}: ${c.value}`))}catch{}return b}var bL=c(7789),bM=c(8347),bN=c(2984),bO=c(8943),bP=c(1033);let bQ="Not capturing exception because it's already been captured.",bR="Discarded session because of missing or non-string release",bS=Symbol.for("SentryInternalError"),bT=Symbol.for("SentryDoNotSendEventError");function bU(a){return{message:a,[bS]:!0}}function bV(a){return{message:a,[bT]:!0}}function bW(a){return!!a&&"object"==typeof a&&bS in a}function bX(a){return!!a&&"object"==typeof a&&bT in a}function bY(a,b,c,d,e){let f,g=0;a.on(c,()=>{g=0,clearTimeout(f)}),a.on(b,b=>{(g+=d(b))>=8e5?e(a):(clearTimeout(f),f=setTimeout(()=>{e(a)},5e3))}),a.on("flush",()=>{e(a)})}class bZ{constructor(a){if(this._options=a,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],a.dsn?this._dsn=(0,bh.AD)(a.dsn):N.T&&P.Yz.warn("No DSN provided, client will not send events."),this._dsn){let b=function(a,b,c){return b||`${function(a){let b=a.protocol?`${a.protocol}:`:"",c=a.port?`:${a.port}`:"";return`${b}//${a.host}${c}${a.path?`/${a.path}`:""}/api/`}(a)}${a.projectId}/envelope/?${function(a,b){let c={sentry_version:"7"};return a.publicKey&&(c.sentry_key=a.publicKey),b&&(c.sentry_client=`${b.name}/${b.version}`),new URLSearchParams(c).toString()}(a,c)}`}(this._dsn,a.tunnel,a._metadata?a._metadata.sdk:void 0);this._transport=a.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...a.transportOptions,url:b})}this._options.enableLogs&&bY(this,"afterCaptureLog","flushLogs",b1,bF),this._options._experiments?.enableMetrics&&bY(this,"afterCaptureMetric","flushMetrics",b0,bH)}captureException(a,b,c){let d=(0,bM.eJ)();if((0,bM.GR)(a))return N.T&&P.Yz.log(bQ),d;let e={event_id:d,...b};return this._process(this.eventFromException(a,e).then(a=>this._captureEvent(a,e,c))),e.event_id}captureMessage(a,b,c,d){let e={event_id:(0,bM.eJ)(),...c},f=(0,bx.NF)(a)?a:String(a),g=(0,bx.sO)(a)?this.eventFromMessage(f,b,e):this.eventFromException(a,e);return this._process(g.then(a=>this._captureEvent(a,e,d))),e.event_id}captureEvent(a,b,c){let d=(0,bM.eJ)();if(b?.originalException&&(0,bM.GR)(b.originalException))return N.T&&P.Yz.log(bQ),d;let e={event_id:d,...b},f=a.sdkProcessingMetadata||{},g=f.capturedSpanScope,h=f.capturedSpanIsolationScope;return this._process(this._captureEvent(a,e,g||c,h)),e.event_id}captureSession(a){this.sendSession(a),(0,bJ.qO)(a,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(a){let b=this._transport;if(!b)return!0;this.emit("flush");let c=await this._isClientDoneProcessing(a),d=await b.flush(a);return c&&d}async close(a){let b=await this.flush(a);return this.getOptions().enabled=!1,this.emit("close"),b}getEventProcessors(){return this._eventProcessors}addEventProcessor(a){this._eventProcessors.push(a)}init(){(this._isEnabled()||this._options.integrations.some(({name:a})=>a.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(a){return this._integrations[a]}addIntegration(a){let b=this._integrations[a.name];bu(this,a,this._integrations),b||bt(this,[a])}sendEvent(a,b={}){this.emit("beforeSendEvent",a,b);let c=function(a,b,c,d){let e=bo(c),f=a.type&&"replay_event"!==a.type?a.type:"event";!function(a,b){if(!b)return;let c=a.sdk||{};a.sdk={...c,name:c.name||b.name,version:c.version||b.version,integrations:[...a.sdk?.integrations||[],...b.integrations||[]],packages:[...a.sdk?.packages||[],...b.packages||[]],settings:a.sdk?.settings||b.settings?{...a.sdk?.settings,...b.settings}:void 0}}(a,c?.sdk);let g=function(a,b,c,d){let e=a.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:a.event_id,sent_at:new Date().toISOString(),...b&&{sdk:b},...!!c&&d&&{dsn:(0,bh.SB)(d)},...e&&{trace:e}}}(a,e,d,b);return delete a.sdkProcessingMetadata,bk(g,[[{type:f},a]])}(a,this._dsn,this._options._metadata,this._options.tunnel);for(let a of b.attachments||[])c=function(a,b){let[c,d]=a;return[c,[...d,b]]}(c,function(a){let b="string"==typeof a.data?bm(a.data):a.data;return[{type:"attachment",length:b.length,filename:a.filename,content_type:a.contentType,attachment_type:a.attachmentType},b]}(a));this.sendEnvelope(c).then(b=>this.emit("afterSendEvent",a,b))}sendSession(a){let{release:b,environment:c=bp.U}=this._options;if("aggregates"in a){let d=a.attrs||{};if(!d.release&&!b){N.T&&P.Yz.warn(bR);return}d.release=d.release||b,d.environment=d.environment||c,a.attrs=d}else{if(!a.release&&!b){N.T&&P.Yz.warn(bR);return}a.release=a.release||b,a.environment=a.environment||c}this.emit("beforeSendSession",a);let d=function(a,b,c,d){let e=bo(c);return bk({sent_at:new Date().toISOString(),...e&&{sdk:e},...!!d&&b&&{dsn:(0,bh.SB)(b)}},["aggregates"in a?[{type:"sessions"},a]:[{type:"session"},a.toJSON()]])}(a,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(d)}recordDroppedEvent(a,b,c=1){if(this._options.sendClientReports){let d=`${a}:${b}`;N.T&&P.Yz.log(`Recording outcome: "${d}"${c>1?` (${c} times)`:""}`),this._outcomes[d]=(this._outcomes[d]||0)+c}}on(a,b){let c=this._hooks[a]=this._hooks[a]||new Set,d=(...a)=>b(...a);return c.add(d),()=>{c.delete(d)}}emit(a,...b){let c=this._hooks[a];c&&c.forEach(a=>a(...b))}async sendEnvelope(a){if(this.emit("beforeEnvelope",a),this._isEnabled()&&this._transport)try{return await this._transport.send(a)}catch(a){return N.T&&P.Yz.error("Error while sending envelope:",a),{}}return N.T&&P.Yz.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:a}=this._options;this._integrations=function(a,b){let c={};return b.forEach(b=>{b&&bu(a,b,c)}),c}(this,a),bt(this,a)}_updateSessionFromEvent(a,b){let c="fatal"===b.level,d=!1,e=b.exception?.values;if(e)for(let a of(d=!0,e)){let b=a.mechanism;if(b?.handled===!1){c=!0;break}}let f="ok"===a.status;(f&&0===a.errors||f&&c)&&((0,bJ.qO)(a,{...c&&{status:"crashed"},errors:a.errors||Number(d||c)}),this.captureSession(a))}async _isClientDoneProcessing(a){let b=0;for(;!a||b<a;){if(await new Promise(a=>setTimeout(a,1)),!this._numProcessing)return!0;b++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(a,b,c,d){let e=this.getOptions(),f=Object.keys(this._integrations);return!b.integrations&&f?.length&&(b.integrations=f),this.emit("preprocessEvent",a,b),a.type||d.setLastEventId(a.event_id||b.event_id),(0,bO.mG)(e,a,b,c,this,d).then(a=>(null===a||(this.emit("postprocessEvent",a,b),a.contexts={trace:(0,ag.vn)(c),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:(0,av.ao)(this,c),...a.sdkProcessingMetadata}),a))}_captureEvent(a,b={},c=(0,ag.o5)(),d=(0,ag.rm)()){return N.T&&b$(a)&&P.Yz.log(`Captured error event \`${bK(a)[0]||"<unknown>"}\``),this._processEvent(a,b,c,d).then(a=>a.event_id,a=>{N.T&&(bX(a)?P.Yz.log(a.message):bW(a)?P.Yz.warn(a.message):P.Yz.warn(a))})}_processEvent(a,b,c,d){let e=this.getOptions(),{sampleRate:f}=e,g=b_(a),h=b$(a),i=a.type||"error",j=`before send for type \`${i}\``,k=void 0===f?void 0:(0,bN.i)(f);if(h&&"number"==typeof k&&Math.random()>k)return this.recordDroppedEvent("sample_rate","error"),(0,bP.xg)(bV(`Discarding event because it's not included in the random sample (sampling rate = ${f})`));let l="replay_event"===i?"replay":i;return this._prepareEvent(a,b,c,d).then(a=>{if(null===a)throw this.recordDroppedEvent("event_processor",l),bV("An event processor returned `null`, will not send event.");return b.data&&!0===b.data.__sentry__?a:function(a,b){let c=`${b} must return \`null\` or a valid event.`;if((0,bx.Qg)(a))return a.then(a=>{if(!(0,bx.Qd)(a)&&null!==a)throw bU(c);return a},a=>{throw bU(`${b} rejected with ${a}`)});if(!(0,bx.Qd)(a)&&null!==a)throw bU(c);return a}(function(a,b,c,d){let{beforeSend:e,beforeSendTransaction:f,beforeSendSpan:g,ignoreSpans:h}=b,i=c;if(b$(i)&&e)return e(i,d);if(b_(i)){if(g||h){let b=function(a){let{trace_id:b,parent_span_id:c,span_id:d,status:e,origin:f,data:g,op:h}=a.contexts?.trace??{};return{data:g??{},description:a.transaction,op:h,parent_span_id:c,span_id:d??"",start_timestamp:a.start_timestamp??0,status:e,timestamp:a.timestamp,trace_id:b??"",origin:f,profile_id:g?.[ae.E1],exclusive_time:g?.[ae.jG],measurements:a.measurements,is_segment:!0}}(i);if(h?.length&&br(b,h))return null;if(g){let a=g(b);if(a)i=(0,bL.h)(c,{type:"transaction",timestamp:a.timestamp,start_timestamp:a.start_timestamp,transaction:a.description,contexts:{trace:{trace_id:a.trace_id,span_id:a.span_id,parent_span_id:a.parent_span_id,op:a.op,status:a.status,origin:a.origin,data:{...a.data,...a.profile_id&&{[ae.E1]:a.profile_id},...a.exclusive_time&&{[ae.jG]:a.exclusive_time}}}},measurements:a.measurements});else(0,$.xl)()}if(i.spans){let b=[],c=i.spans;for(let a of c){if(h?.length&&br(a,h)){let b=a.parent_span_id,d=a.span_id;if(b)for(let a of c)a.parent_span_id===d&&(a.parent_span_id=b);continue}if(g){let c=g(a);c?b.push(c):((0,$.xl)(),b.push(a))}else b.push(a)}let d=i.spans.length-b.length;d&&a.recordDroppedEvent("before_send","span",d),i.spans=b}}if(f){if(i.spans){let a=i.spans.length;i.sdkProcessingMetadata={...c.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return f(i,d)}}return i}(this,e,a,b),j)}).then(e=>{if(null===e){if(this.recordDroppedEvent("before_send",l),g){let b=1+(a.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw bV(`${j} returned \`null\`, will not send event.`)}let f=c.getSession()||d.getSession();if(h&&f&&this._updateSessionFromEvent(f,e),g){let a=(e.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(e.spans?e.spans.length:0);a>0&&this.recordDroppedEvent("before_send","span",a)}let i=e.transaction_info;return g&&i&&e.transaction!==a.transaction&&(e.transaction_info={...i,source:"custom"}),this.sendEvent(e,b),e}).then(null,a=>{if(bX(a)||bW(a))throw a;throw this.captureException(a,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:a}),bU(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${a}`)})}_process(a){this._numProcessing++,a.then(a=>(this._numProcessing--,a),a=>(this._numProcessing--,a))}_clearOutcomes(){let a=this._outcomes;return this._outcomes={},Object.entries(a).map(([a,b])=>{let[c,d]=a.split(":");return{reason:c,category:d,quantity:b}})}_flushOutcomes(){var a;N.T&&P.Yz.log("Flushing outcomes...");let b=this._clearOutcomes();if(0===b.length){N.T&&P.Yz.log("No outcomes to send");return}if(!this._dsn){N.T&&P.Yz.log("No dsn provided, will not send outcomes");return}N.T&&P.Yz.log("Sending outcomes:",b);let c=bk((a=this._options.tunnel&&(0,bh.SB)(this._dsn))?{dsn:a}:{},[[{type:"client_report"},{timestamp:(0,bz.lu)(),discarded_events:b}]]);this.sendEnvelope(c)}}function b$(a){return void 0===a.type}function b_(a){return"transaction"===a.type}function b0(a){let b=0;return a.name&&(b+=2*a.name.length),"string"==typeof a.value?b+=2*a.value.length:b+=8,b+b2(a.attributes)}function b1(a){let b=0;return a.message&&(b+=2*a.message.length),b+b2(a.attributes)}function b2(a){if(!a)return 0;let b=0;return Object.values(a).forEach(a=>{Array.isArray(a)?b+=a.length*b3(a[0]):(0,bx.sO)(a)?b+=b3(a):b+=100}),b}function b3(a){return"string"==typeof a?2*a.length:"number"==typeof a?8:4*("boolean"==typeof a)}var b4=c(9379);function b5(a,b){return a(b.stack||"",1)}function b6(a,b){let c={type:b.name||b.constructor.name,value:b.message},d=b5(a,b);return d.length&&(c.stacktrace={frames:d}),c}class b7 extends bZ{constructor(a){ab(),super(a)}eventFromException(a,b){let c=function(a,b,c,d){let e=d?.data&&d.data.mechanism||{handled:!0,type:"generic"},[f,g]=function(a,b,c,d){if((0,bx.bJ)(c))return[c,void 0];if(b.synthetic=!0,(0,bx.Qd)(c)){let b=a?.getOptions().normalizeDepth,e={__serialized__:(0,bj.cd)(c,b)},f=function(a){for(let b in a)if(Object.prototype.hasOwnProperty.call(a,b)){let c=a[b];if(c instanceof Error)return c}}(c);if(f)return[f,e];let g=function(a){if("name"in a&&"string"==typeof a.name){let b=`'${a.name}' captured as exception`;return"message"in a&&"string"==typeof a.message&&(b+=` with message '${a.message}'`),b}if("message"in a&&"string"==typeof a.message)return a.message;let b=(0,b4.HF)(a);if((0,bx.T2)(a))return`Event \`ErrorEvent\` captured as exception with message \`${a.message}\``;let c=function(a){try{let b=Object.getPrototypeOf(a);return b?b.constructor.name:void 0}catch{}}(a);return`${c&&"Object"!==c?`'${c}'`:"Object"} captured as exception with keys: ${b}`}(c),h=d?.syntheticException||Error(g);return h.message=g,[h,e]}let e=d?.syntheticException||Error(c);return e.message=`${c}`,[e,void 0]}(a,e,c,d),h={exception:{values:[b6(b,f)]}};return g&&(h.extra=g),(0,bM.gO)(h,void 0,void 0),(0,bM.M6)(h,e),{...h,event_id:d?.event_id}}(this,this._options.stackParser,a,b);return c.level="error",(0,bP.XW)(c)}eventFromMessage(a,b="info",c){return(0,bP.XW)(function(a,b,c="info",d,e){let f={event_id:d?.event_id,level:c};if(e&&d?.syntheticException){let c=b5(a,d.syntheticException);c.length&&(f.exception={values:[{value:b,stacktrace:{frames:c}}]},(0,bM.M6)(f,{synthetic:!0}))}if((0,bx.NF)(b)){let{__sentry_template_string__:a,__sentry_template_values__:c}=b;return f.logentry={message:a,params:c},f}return f.message=b,f}(this._options.stackParser,a,b,c,this._options.attachStacktrace))}captureException(a,b,c){return b8(b),super.captureException(a,b,c)}captureEvent(a,b,c){return!a.type&&a.exception?.values&&a.exception.values.length>0&&b8(b),super.captureEvent(a,b,c)}captureCheckIn(a,b,c){let d="checkInId"in a&&a.checkInId?a.checkInId:(0,bM.eJ)();if(!this._isEnabled())return N.T&&P.Yz.warn("SDK not enabled, will not capture check-in."),d;let{release:e,environment:f,tunnel:g}=this.getOptions(),h={check_in_id:d,monitor_slug:a.monitorSlug,status:a.status,release:e,environment:f};"duration"in a&&(h.duration=a.duration),b&&(h.monitor_config={schedule:b.schedule,checkin_margin:b.checkinMargin,max_runtime:b.maxRuntime,timezone:b.timezone,failure_issue_threshold:b.failureIssueThreshold,recovery_threshold:b.recoveryThreshold});let[i,j]=bA(this,c);j&&(h.contexts={trace:j});let k=function(a,b,c,d,e){let f={sent_at:new Date().toISOString()};return c?.sdk&&(f.sdk={name:c.sdk.name,version:c.sdk.version}),d&&e&&(f.dsn=(0,bh.SB)(e)),b&&(f.trace=b),bk(f,[[{type:"check_in"},a]])}(h,i,this.getSdkMetadata(),g,this.getDsn());return N.T&&P.Yz.log("Sending checkin:",a.monitorSlug,a.status),this.sendEnvelope(k),d}_prepareEvent(a,b,c,d){return this._options.platform&&(a.platform=a.platform||this._options.platform),this._options.runtime&&(a.contexts={...a.contexts,runtime:a.contexts?.runtime||this._options.runtime}),this._options.serverName&&(a.server_name=a.server_name||this._options.serverName),super._prepareEvent(a,b,c,d)}}function b8(a){let b=(0,ag.rm)().getScopeData().sdkProcessingMetadata.requestSession;if(b){let c=a?.mechanism?.handled??!0;c&&"crashed"!==b.status?b.status="errored":c||(b.status="crashed")}}var b9=c(9355);function ca(a,b,c=()=>{},d=()=>{}){var e,f,g,h;let i;try{i=a()}catch(a){throw b(a),c(),a}return e=i,f=b,g=c,h=d,(0,bx.Qg)(e)?e.then(a=>(g(),h(a),a),a=>{throw f(a),g(),a}):(g(),h(e),e)}var cb=c(3711),cc=c(9191);function cd(a,b,c,d=(0,$.Bk)()){let e=d&&(0,$.zU)(d);e&&(N.T&&P.Yz.log(`[Measurement] Setting measurement on root span: ${a} = ${b} ${c}`),e.addEvent(a,{[ae.xc]:b,[ae.Sn]:c}))}function ce(a){if(!a||0===a.length)return;let b={};return a.forEach(a=>{let c=a.attributes||{},d=c[ae.Sn],e=c[ae.xc];"string"==typeof d&&"number"==typeof e&&(b[a.name]={value:e,unit:d})}),b}var cf=c(5970);function cg(a){if(!N.T)return;let{description:b="< unknown name >",op:c="< unknown op >",parent_span_id:d}=(0,$.et)(a),{spanId:e}=a.spanContext(),f=(0,$.pK)(a),g=(0,$.zU)(a),h=g===a,i=`[Tracing] Starting ${f?"sampled":"unsampled"} ${h?"root ":""}span`,j=[`op: ${c}`,`name: ${b}`,`ID: ${e}`];if(d&&j.push(`parent ID: ${d}`),!h){let{op:a,description:b}=(0,$.et)(g);j.push(`root ID: ${g.spanContext().spanId}`),a&&j.push(`root op: ${a}`),b&&j.push(`root description: ${b}`)}P.Yz.log(`${i}
  ${j.join("\n  ")}`)}function ch(a){if(!N.T)return;let{description:b="< unknown name >",op:c="< unknown op >"}=(0,$.et)(a),{spanId:d}=a.spanContext(),e=(0,$.zU)(a)===a,f=`[Tracing] Finishing "${c}" ${e?"root ":""}span "${b}" with ID ${d}`;P.Yz.log(f)}function ci(a,b,c){let d,e;if(!(0,b9.f)(a))return[!1];"function"==typeof a.tracesSampler?(d=a.tracesSampler({...b,inheritOrSampleWith:a=>"number"==typeof b.parentSampleRate?b.parentSampleRate:"boolean"==typeof b.parentSampled?Number(b.parentSampled):a}),e=!0):void 0!==b.parentSampled?d=b.parentSampled:void 0!==a.tracesSampleRate&&(d=a.tracesSampleRate,e=!0);let f=(0,bN.i)(d);if(void 0===f)return N.T&&P.Yz.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(d)} of type ${JSON.stringify(typeof d)}.`),[!1];if(!f)return N.T&&P.Yz.log(`[Tracing] Discarding transaction because ${"function"==typeof a.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,f,e];let g=c<f;return!g&&N.T&&P.Yz.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(d)})`),[g,f,e]}function cj(a,b){return!!a&&"object"==typeof a&&!!a[b]}function ck(a){return"string"==typeof a?a:a?cj(a,"url")?a.url:a.toString?a.toString():"":""}function cl(a){return"/"===a[a.length-1]?a.slice(0,-1):a}O.O;var cm=c(1744);class cn{constructor(a={}){this._traceId=a.traceId||(0,cm.e)(),this._spanId=a.spanId||(0,cm.Z)()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:$.CC}}end(a){}setAttribute(a,b){return this}setAttributes(a){return this}setStatus(a){return this}updateName(a){return this}isRecording(){return!1}addEvent(a,b,c){return this}addLink(a){return this}addLinks(a){return this}recordException(a,b){}}class co{constructor(a={}){this._traceId=a.traceId||(0,cm.e)(),this._spanId=a.spanId||(0,cm.Z)(),this._startTime=a.startTimestamp||(0,bz.zf)(),this._links=a.links,this._attributes={},this.setAttributes({[ae.JD]:"manual",[ae.uT]:a.op,...a.attributes}),this._name=a.name,a.parentSpanId&&(this._parentSpanId=a.parentSpanId),"sampled"in a&&(this._sampled=a.sampled),a.endTimestamp&&(this._endTime=a.endTimestamp),this._events=[],this._isStandaloneSpan=a.isStandalone,this._endTime&&this._onSpanEnded()}addLink(a){return this._links?this._links.push(a):this._links=[a],this}addLinks(a){return this._links?this._links.push(...a):this._links=a,this}recordException(a,b){}spanContext(){let{_spanId:a,_traceId:b,_sampled:c}=this;return{spanId:a,traceId:b,traceFlags:c?$.aO:$.CC}}setAttribute(a,b){return void 0===b?delete this._attributes[a]:this._attributes[a]=b,this}setAttributes(a){return Object.keys(a).forEach(b=>this.setAttribute(b,a[b])),this}updateStartTime(a){this._startTime=(0,$.cI)(a)}setStatus(a){return this._status=a,this}updateName(a){return this._name=a,this.setAttribute(ae.i_,"custom"),this}end(a){this._endTime||(this._endTime=(0,$.cI)(a),ch(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[ae.uT],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:(0,$.yW)(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ae.JD],profile_id:this._attributes[ae.E1],exclusive_time:this._attributes[ae.jG],measurements:ce(this._events),is_segment:this._isStandaloneSpan&&(0,$.zU)(this)===this||void 0,segment_id:this._isStandaloneSpan?(0,$.zU)(this).spanContext().spanId:void 0,links:(0,$.uU)(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(a,b,c){N.T&&P.Yz.log("[Tracing] Adding an event to span:",a);let d=cp(b)?b:c||(0,bz.zf)(),e=cp(b)?{}:b||{},f={name:a,time:(0,$.cI)(d),attributes:e};return this._events.push(f),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let a=(0,ag.KU)();if(a&&a.emit("spanEnd",this),!(this._isStandaloneSpan||this===(0,$.zU)(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(a){let b=(0,ag.KU)();if(!b)return;let c=a[1];if(!c||0===c.length)return b.recordDroppedEvent("before_send","span");b.sendEnvelope(a)}(function(a,b){let c=(0,av.k1)(a[0]),d=b?.getDsn(),e=b?.getOptions().tunnel,f={sent_at:new Date().toISOString(),...!!c.trace_id&&!!c.public_key&&{trace:c},...!!e&&d&&{dsn:(0,bh.SB)(d)}},{beforeSendSpan:g,ignoreSpans:h}=b?.getOptions()||{},i=h?.length?a.filter(a=>!br((0,$.et)(a),h)):a,j=a.length-i.length;j&&b?.recordDroppedEvent("before_send","span",j);let k=g?a=>{let b=(0,$.et)(a),c=g(b);return c||((0,$.xl)(),b)}:$.et,l=[];for(let a of i){let b=k(a);b&&l.push([{type:"span"},b])}return bk(f,l)}([this],a)):(N.T&&P.Yz.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),a&&a.recordDroppedEvent("sample_rate","span")));let b=this._convertSpanToTransaction();b&&((0,af.L)(this).scope||(0,ag.o5)()).captureEvent(b)}_convertSpanToTransaction(){if(!cq((0,$.et)(this)))return;this._name||(N.T&&P.Yz.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:a,isolationScope:b}=(0,af.L)(this),c=a?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;let d=(0,$.xO)(this).filter(a=>{var b;return a!==this&&!((b=a)instanceof co&&b.isStandaloneSpan())}).map(a=>(0,$.et)(a)).filter(cq),e=this._attributes[ae.i_];delete this._attributes[ae.Le],d.forEach(a=>{delete a.data[ae.Le]});let f={contexts:{trace:(0,$.Ck)(this)},spans:d.length>1e3?d.sort((a,b)=>a.start_timestamp-b.start_timestamp).slice(0,1e3):d,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:a,capturedSpanIsolationScope:b,dynamicSamplingContext:(0,av.k1)(this)},request:c,...e&&{transaction_info:{source:e}}},g=ce(this._events);return g&&Object.keys(g).length&&(N.T&&P.Yz.log("[Measurements] Adding measurements to transaction event",JSON.stringify(g,void 0,2)),f.measurements=g),f}}function cp(a){return a&&"number"==typeof a||a instanceof Date||Array.isArray(a)}function cq(a){return!!a.start_timestamp&&!!a.timestamp&&!!a.span_id&&!!a.trace_id}let cr="__SENTRY_SUPPRESS_TRACING__";function cs(a,b){let c=cB();if(c.startSpan)return c.startSpan(a,b);let d=cA(a),{forceTransaction:e,parentSpan:f,scope:g}=a,h=g?.clone();return(0,ag.v4)(h,()=>cE(f)(()=>{let c=(0,ag.o5)(),g=cD(c,f),h=a.onlyIfParent&&!g?new cn:cz({parentSpan:g,spanArguments:d,forceTransaction:e,scope:c});return(0,by.r)(c,h),ca(()=>b(h),()=>{let{status:a}=(0,$.et)(h);h.isRecording()&&(!a||"ok"===a)&&h.setStatus({code:_.TJ,message:"internal_error"})},()=>{h.end()})}))}function ct(a,b){let c=cB();if(c.startSpanManual)return c.startSpanManual(a,b);let d=cA(a),{forceTransaction:e,parentSpan:f,scope:g}=a,h=g?.clone();return(0,ag.v4)(h,()=>cE(f)(()=>{let c=(0,ag.o5)(),g=cD(c,f),h=a.onlyIfParent&&!g?new cn:cz({parentSpan:g,spanArguments:d,forceTransaction:e,scope:c});return(0,by.r)(c,h),ca(()=>b(h,()=>h.end()),()=>{let{status:a}=(0,$.et)(h);h.isRecording()&&(!a||"ok"===a)&&h.setStatus({code:_.TJ,message:"internal_error"})})}))}function cu(a){let b=cB();if(b.startInactiveSpan)return b.startInactiveSpan(a);let c=cA(a),{forceTransaction:d,parentSpan:e}=a;return(a.scope?b=>(0,ag.v4)(a.scope,b):void 0!==e?a=>cw(e,a):a=>a())(()=>{let b=(0,ag.o5)(),f=cD(b,e);return a.onlyIfParent&&!f?new cn:cz({parentSpan:f,spanArguments:c,forceTransaction:d,scope:b})})}let cv=(a,b)=>{let c=(0,bi.EU)(),d=(0,cc.h)(c);if(d.continueTrace)return d.continueTrace(a,b);let{sentryTrace:e,baggage:f}=a,g=(0,ag.KU)(),h=(0,ar.yD)(f);return g&&!(0,at.A9)(g,h?.org_id)?cy(b):(0,ag.v4)(a=>{let c=(0,at.kM)(e,f);return a.setPropagationContext(c),b()})};function cw(a,b){let c=cB();return c.withActiveSpan?c.withActiveSpan(a,b):(0,ag.v4)(c=>((0,by.r)(c,a||void 0),b(c)))}function cx(a){let b=cB();return b.suppressTracing?b.suppressTracing(a):(0,ag.v4)(b=>{b.setSDKProcessingMetadata({[cr]:!0});let c=a();return b.setSDKProcessingMetadata({[cr]:void 0}),c})}function cy(a){return(0,ag.v4)(b=>(b.setPropagationContext({traceId:(0,cm.e)(),sampleRand:Math.random()}),N.T&&P.Yz.log(`Starting a new trace with id ${b.getPropagationContext().traceId}`),cw(null,a)))}function cz({parentSpan:a,spanArguments:b,forceTransaction:c,scope:d}){let e;if(!(0,b9.f)()){let d=new cn;if(c||!a){let a={sampled:"false",sample_rate:"0",transaction:b.name,...(0,av.k1)(d)};(0,av.LZ)(d,a)}return d}let f=(0,ag.rm)();if(a&&!c)e=function(a,b,c){let{spanId:d,traceId:e}=a.spanContext(),f=!b.getScopeData().sdkProcessingMetadata[cr]&&(0,$.pK)(a),g=f?new co({...c,parentSpanId:d,traceId:e,sampled:f}):new cn({traceId:e});(0,$.Hu)(a,g);let h=(0,ag.KU)();return h&&(h.emit("spanStart",g),c.endTimestamp&&h.emit("spanEnd",g)),g}(a,d,b),(0,$.Hu)(a,e);else if(a){let c=(0,av.k1)(a),{traceId:f,spanId:g}=a.spanContext(),h=(0,$.pK)(a);e=cC({traceId:f,parentSpanId:g,...b},d,h),(0,av.LZ)(e,c)}else{let{traceId:a,dsc:c,parentSpanId:g,sampled:h}={...f.getPropagationContext(),...d.getPropagationContext()};e=cC({traceId:a,parentSpanId:g,...b},d,h),c&&(0,av.LZ)(e,c)}return cg(e),(0,af.d)(e,d,f),e}function cA(a){let b={isStandalone:(a.experimental||{}).standalone,...a};if(a.startTime){let c={...b};return c.startTimestamp=(0,$.cI)(a.startTime),delete c.startTime,c}return b}function cB(){let a=(0,bi.EU)();return(0,cc.h)(a)}function cC(a,b,c){let d=(0,ag.KU)(),e=d?.getOptions()||{},{name:f=""}=a,g={spanAttributes:{...a.attributes},spanName:f,parentSampled:c};d?.emit("beforeSampling",g,{decision:!1});let h=g.parentSampled??c,i=g.spanAttributes,j=b.getPropagationContext(),[k,l,m]=b.getScopeData().sdkProcessingMetadata[cr]?[!1]:ci(e,{name:f,parentSampled:h,attributes:i,parentSampleRate:(0,bN.i)(j.dsc?.sample_rate)},j.sampleRand),n=new co({...a,attributes:{[ae.i_]:"custom",[ae.sy]:void 0!==l&&m?l:void 0,...i},sampled:k});return!k&&d&&(N.T&&P.Yz.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),d.recordDroppedEvent("sample_rate","transaction")),d&&d.emit("spanStart",n),n}function cD(a,b){if(b)return b;if(null===b)return;let c=(0,by.f)(a);if(!c)return;let d=(0,ag.KU)();return(d?d.getOptions():{}).parentSpanIsAlwaysRootSpan?(0,$.zU)(c):c}function cE(a){return void 0!==a?b=>cw(a,b):a=>a()}function cF(a={}){let b=a.client||(0,ag.KU)();if(!(0,cf.Ol)()||!b)return{};let c=(0,bi.EU)(),d=(0,cc.h)(c);if(d.getTraceData)return d.getTraceData(a);let e=a.scope||(0,ag.o5)(),f=a.span||(0,$.Bk)(),g=f?(0,$.Qh)(f):function(a){let{traceId:b,sampled:c,propagationSpanId:d}=a.getPropagationContext();return(0,at.TC)(b,d,c)}(e),h=f?(0,av.k1)(f):(0,av.ao)(b,e),i=(0,ar.De)(h);if(!at.MI.test(g))return P.Yz.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let j={"sentry-trace":g,baggage:i};if(a.propagateTraceparent){let a=f?(0,$.G_)(f):function(a){let{traceId:b,sampled:c,propagationSpanId:d}=a.getPropagationContext();return(0,at.Iy)(b,d,c)}(e);a&&(j.traceparent=a)}return j}function cG(a){return a.split(",").some(a=>a.trim().startsWith(ar.sv))}function cH(a,b){let c=(0,ag.KU)(),d=(0,ag.rm)();if(!c)return;let{beforeBreadcrumb:e=null,maxBreadcrumbs:f=100}=c.getOptions();if(f<=0)return;let g={timestamp:(0,bz.lu)(),...a},h=e?(0,P.pq)(()=>e(g,b)):g;null!==h&&(c.emit&&c.emit("beforeAddBreadcrumb",h,b),d.addBreadcrumb(h,f))}let cI=Symbol.for("SentryBufferFullError");function cJ(a,b,c=function(a=100){let b=new Set;return{get $(){return Array.from(b)},add:function(c){if(!(b.size<a))return(0,bP.xg)(cI);let d=c();return b.add(d),d.then(()=>{b.delete(d)},()=>{b.delete(d)}),d},drain:function(a){if(!b.size)return(0,bP.XW)(!0);let c=Promise.allSettled(Array.from(b)).then(()=>!0);return a?Promise.race([c,new Promise(b=>setTimeout(()=>b(!1),a))]):c}}}(a.bufferSize||64)){let d={};return{send:function(e){let f=[];if(bl(e,(b,c)=>{let e=bn[c];!function(a,b,c=Date.now()){return(a[b]||a.all||0)>c}(d,e)?f.push(b):a.recordDroppedEvent("ratelimit_backoff",e)}),0===f.length)return Promise.resolve({});let g=bk(e[0],f),h=b=>{bl(g,(c,d)=>{a.recordDroppedEvent(b,bn[d])})};return c.add(()=>b({body:function(a){let[b,c]=a,d=JSON.stringify(b);function e(a){"string"==typeof d?d="string"==typeof a?d+a:[bm(d),a]:d.push("string"==typeof a?bm(a):a)}for(let a of c){let[b,c]=a;if(e(`
${JSON.stringify(b)}
`),"string"==typeof c||c instanceof Uint8Array)e(c);else{let a;try{a=JSON.stringify(c)}catch{a=JSON.stringify((0,bj.S8)(c))}e(a)}}return"string"==typeof d?d:function(a){let b=new Uint8Array(a.reduce((a,b)=>a+b.length,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}(d)}(g)}).then(a=>(void 0!==a.statusCode&&(a.statusCode<200||a.statusCode>=300)&&N.T&&P.Yz.warn(`Sentry responded with status code ${a.statusCode} to sent event.`),d=function(a,{statusCode:b,headers:c},d=Date.now()){let e={...a},f=c?.["x-sentry-rate-limits"],g=c?.["retry-after"];if(f)for(let a of f.trim().split(",")){let[b,c,,,f]=a.split(":",5),g=parseInt(b,10),h=(isNaN(g)?60:g)*1e3;if(c)for(let a of c.split(";"))"metric_bucket"===a?(!f||f.split(";").includes("custom"))&&(e[a]=d+h):e[a]=d+h;else e.all=d+h}else g?e.all=d+function(a,b=Date.now()){let c=parseInt(`${a}`,10);if(!isNaN(c))return 1e3*c;let d=Date.parse(`${a}`);return isNaN(d)?6e4:d-b}(g,d):429===b&&(e.all=d+6e4);return e}(d,a),a),a=>{throw h("network_error"),N.T&&P.Yz.error("Encountered error running transport request:",a),a})).then(a=>a,a=>{if(a===cI)return N.T&&P.Yz.error("Skipped sending event because buffer is full."),h("queue_overflow"),Promise.resolve({});throw a})},flush:a=>c.drain(a)}}function cK(a){return parseInt(a||"",10)||void 0}let cL=()=>{let a;return{name:"Dedupe",processEvent(b){if(b.type)return b;try{var c,d;if(c=b,(d=a)&&(function(a,b){let c=a.message,d=b.message;return(!!c||!!d)&&(!c||!!d)&&(!!c||!d)&&c===d&&!!cN(a,b)&&!!cM(a,b)&&!0}(c,d)||function(a,b){let c=cO(b),d=cO(a);return!!c&&!!d&&c.type===d.type&&c.value===d.value&&!!cN(a,b)&&!!cM(a,b)}(c,d)))return N.T&&P.Yz.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return a=b}}};function cM(a,b){let c=(0,Q.RV)(a),d=(0,Q.RV)(b);if(!c&&!d)return!0;if(c&&!d||!c&&d||d.length!==c.length)return!1;for(let a=0;a<d.length;a++){let b=d[a],e=c[a];if(b.filename!==e.filename||b.lineno!==e.lineno||b.colno!==e.colno||b.function!==e.function)return!1}return!0}function cN(a,b){let c=a.fingerprint,d=b.fingerprint;if(!c&&!d)return!0;if(c&&!d||!c&&d)return!1;try{return c.join("")===d.join("")}catch{return!1}}function cO(a){return a.exception?.values?.[0]}let cP=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],cQ=(a={})=>{let b;return{name:"EventFilters",setup(c){b=cS(a,c.getOptions())},processEvent:(c,d,e)=>(b||(b=cS(a,e.getOptions())),!function(a,b){if(a.type){if("transaction"===a.type&&function(a,b){if(!b?.length)return!1;let c=a.transaction;return!!c&&(0,au.Xr)(c,b)}(a,b.ignoreTransactions))return N.T&&P.Yz.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${(0,bM.$X)(a)}`),!0}else{var c,d,e;if(c=a,d=b.ignoreErrors,d?.length&&bK(c).some(a=>(0,au.Xr)(a,d)))return N.T&&P.Yz.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${(0,bM.$X)(a)}`),!0;if(e=a,e.exception?.values?.length&&!e.message&&!e.exception.values.some(a=>a.stacktrace||a.type&&"Error"!==a.type||a.value))return N.T&&P.Yz.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${(0,bM.$X)(a)}`),!0;if(function(a,b){if(!b?.length)return!1;let c=cT(a);return!!c&&(0,au.Xr)(c,b)}(a,b.denyUrls))return N.T&&P.Yz.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${(0,bM.$X)(a)}.
Url: ${cT(a)}`),!0;if(!function(a,b){if(!b?.length)return!0;let c=cT(a);return!c||(0,au.Xr)(c,b)}(a,b.allowUrls))return N.T&&P.Yz.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${(0,bM.$X)(a)}.
Url: ${cT(a)}`),!0}return!1}(c,b)?c:null)}},cR=(a={})=>({...cQ(a),name:"InboundFilters"});function cS(a={},b={}){return{allowUrls:[...a.allowUrls||[],...b.allowUrls||[]],denyUrls:[...a.denyUrls||[],...b.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...b.ignoreErrors||[],...a.disableErrorDefaults?[]:cP],ignoreTransactions:[...a.ignoreTransactions||[],...b.ignoreTransactions||[]]}}function cT(a){try{let b=[...a.exception?.values??[]].reverse().find(a=>a.mechanism?.parent_id===void 0&&a.stacktrace?.frames?.length),c=b?.stacktrace?.frames;return c?function(a=[]){for(let b=a.length-1;b>=0;b--){let c=a[b];if(c&&"<anonymous>"!==c.filename&&"[native code]"!==c.filename)return c.filename||null}return null}(c):null}catch{return N.T&&P.Yz.error(`Cannot extract url for event ${(0,bM.$X)(a)}`),null}}let cU=new WeakMap,cV=()=>({name:"FunctionToString",setupOnce(){d=Function.prototype.toString;try{Function.prototype.toString=function(...a){let b=(0,b4.sp)(this),c=cU.has((0,ag.KU)())&&void 0!==b?b:this;return d.apply(c,a)}}catch{}},setup(a){cU.set(a,!0)}});function cW(a,b){a.mechanism={handled:!0,type:"auto.core.linked_errors",...a.mechanism,..."AggregateError"===a.type&&{is_exception_group:!0},exception_id:b}}function cX(a,b,c,d){a.mechanism={handled:!0,...a.mechanism,type:"chained",source:b,exception_id:c,parent_id:d}}let cY=(a={})=>{let b=a.limit||5,c=a.key||"cause";return{name:"LinkedErrors",preprocessEvent(a,d,e){!function(a,b,c,d,e,f){if(!e.exception?.values||!f||!(0,bx.tH)(f.originalException,Error))return;let g=e.exception.values.length>0?e.exception.values[e.exception.values.length-1]:void 0;g&&(e.exception.values=function a(b,c,d,e,f,g,h,i){if(g.length>=d+1)return g;let j=[...g];if((0,bx.tH)(e[f],Error)){cW(h,i);let g=b(c,e[f]),k=j.length;cX(g,f,k,i),j=a(b,c,d,e[f],f,[g,...j],g,k)}return Array.isArray(e.errors)&&e.errors.forEach((e,g)=>{if((0,bx.tH)(e,Error)){cW(h,i);let k=b(c,e),l=j.length;cX(k,`errors[${g}]`,l,i),j=a(b,c,d,e,f,[k,...j],k,l)}}),j}(a,b,d,f.originalException,c,e.exception.values,g,0))}(b6,e.getOptions().stackParser,c,b,a,d)}}};function cZ(a){let b="console";T(b,a),U(b,c$)}function c$(){"console"in O.O&&P.Ow.forEach(function(a){a in O.O.console&&(0,b4.GS)(O.O.console,a,function(b){return P.Z9[a]=b,function(...b){V("console",{args:b,level:a});let c=P.Z9[a];c?.apply(O.O.console,b)}})})}function c_(a){return"warn"===a?"warning":["fatal","error","warning","log","info","debug"].includes(a)?a:"log"}let c0=(a={})=>{let b=new Set(a.levels||P.Ow);return{name:"Console",setup(a){cZ(({args:c,level:d})=>{(0,ag.KU)()===a&&b.has(d)&&function(a,b){let c={category:"console",data:{arguments:b,logger:"console"},level:c_(a),message:c1(b)};if("assert"===a)if(!1!==b[0])return;else{let a=b.slice(1);c.message=a.length>0?`Assertion failed: ${c1(a)}`:"Assertion failed",c.data.arguments=a}cH(c,{input:b,level:a})}(d,c)})}}};function c1(a){return"util"in O.O&&"function"==typeof O.O.util.format?O.O.util.format(...a):(0,au.gt)(a," ")}let c2=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"],c3={cookies:!0,data:!0,headers:!0,query_string:!0,url:!0},c4=(a={})=>{let b={...c3,...a.include};return{name:"RequestData",processEvent(a,c,d){let{sdkProcessingMetadata:e={}}=a,{normalizedRequest:f,ipAddress:g}=e,h={...b,ip:b.ip??d.getOptions().sendDefaultPii};return f&&function(a,b,c,d){if(a.request={...a.request,...function(a,b){let c={},d={...a.headers};return b.headers&&(c.headers=d,b.cookies||delete d.cookie,b.ip||c2.forEach(a=>{delete d[a]})),c.method=a.method,b.url&&(c.url=a.url),b.cookies&&(c.cookies=a.cookies||(d?.cookie?function(a){let b={},c=0;for(;c<a.length;){let d=a.indexOf("=",c);if(-1===d)break;let e=a.indexOf(";",c);if(-1===e)e=a.length;else if(e<d){c=a.lastIndexOf(";",d-1)+1;continue}let f=a.slice(c,d).trim();if(void 0===b[f]){let c=a.slice(d+1,e).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1));try{b[f]=-1!==c.indexOf("%")?decodeURIComponent(c):c}catch{b[f]=c}}c=e+1}return b}(d.cookie):void 0)||{}),b.query_string&&(c.query_string=a.query_string),b.data&&(c.data=a.data),c}(b,d)},d.ip){var e;let d=b.headers&&(e=b.headers,c2.map(a=>{let b=e[a],c=Array.isArray(b)?b.join(";"):b;return"Forwarded"===a?function(a){if(!a)return null;for(let b of a.split(";"))if(b.startsWith("for="))return b.slice(4);return null}(c):c?.split(",").map(a=>a.trim())}).reduce((a,b)=>b?a.concat(b):a,[]).find(a=>{var b;return null!==a&&(b=a,/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(b))})||null)||c.ipAddress;d&&(a.user={...a.user,ip_address:d})}}(a,f,{ipAddress:g},h),a}}},c5="gen_ai.system",c6="gen_ai.request.model",c7="gen_ai.request.stream",c8="gen_ai.request.temperature",c9="gen_ai.request.max_tokens",da="gen_ai.request.frequency_penalty",db="gen_ai.request.presence_penalty",dc="gen_ai.request.top_p",dd="gen_ai.request.top_k",de="gen_ai.response.finish_reasons",df="gen_ai.response.model",dg="gen_ai.response.id",dh="gen_ai.usage.input_tokens",di="gen_ai.usage.output_tokens",dj="gen_ai.usage.total_tokens",dk="gen_ai.operation.name",dl="gen_ai.request.messages",dm="gen_ai.response.text",dn="gen_ai.request.available_tools",dp="gen_ai.response.streaming",dq="gen_ai.response.tool_calls",dr="gen_ai.usage.input_tokens.cache_write",ds="gen_ai.usage.input_tokens.cached",dt={CHAT:"chat",RESPONSES:"responses"},du="anthropic.response.timestamp",dv=a=>new TextEncoder().encode(a).length,dw=a=>dv(JSON.stringify(a));function dx(a,b){if(dv(a)<=b)return a;let c=0,d=a.length,e="";for(;c<=d;){let f=Math.floor((c+d)/2),g=a.slice(0,f);dv(g)<=b?(e=g,c=f+1):d=f-1}return e}function dy(a,b){return"string"==typeof a?b:{...a,text:b}}function dz(a){return a.includes("messages")?"messages":a.includes("completions")?"completions":a.includes("models")?"models":a.includes("chat")?"chat":a.split(".").pop()||"unknown"}function dA(a){return`gen_ai.${dz(a)}`}function dB(a,b){return a?`${a}.${b}`:b}function dC(a,b,c,d,e){void 0!==b&&a.setAttributes({[dh]:b}),void 0!==c&&a.setAttributes({[di]:c}),(void 0!==b||void 0!==c||void 0!==d||void 0!==e)&&a.setAttributes({[dj]:(b??0)+(c??0)+(d??0)+(e??0)})}function dD(a){return"string"==typeof a?a:Array.isArray(a)?JSON.stringify(function(a,b){if(!Array.isArray(a)||0===a.length||2e4>=dw(a))return a;let c=a.map(dw),d=0,e=a.length;for(let b=a.length-1;b>=0;b--){let a=c[b];if(a&&d+a>2e4)break;a&&(d+=a),e=b}return e===a.length?function(a,b){if(!a||"object"!=typeof a)return[];if(null!==a&&"object"==typeof a&&"content"in a&&"string"==typeof a.content){let c=b-dw({...a,content:""});if(c<=0)return[];let d=dx(a.content,c);return[{...a,content:d}]}return null!==a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)&&a.parts.length>0?function(a,b){let{parts:c}=a,d=c.map(a=>dy(a,"")),e=b-dw({...a,parts:d});if(e<=0)return[];let f=[];for(let a of c){let b="string"==typeof a?a:a.text,c=dv(b);if(c<=e)f.push(a),e-=c;else if(0===f.length){let c=dx(b,e);c&&f.push(dy(a,c));break}else break}return f.length>0?[{...a,parts:f}]:[]}(a,b):[]}(a[a.length-1],b):a.slice(e)}(a,2e4)):JSON.stringify(a)}let dE=new Map;function dF(a,b){let c=b.get(a.span_id);c&&a.data&&(c.inputTokens>0&&(a.data[dh]=c.inputTokens),c.outputTokens>0&&(a.data[di]=c.outputTokens),(c.inputTokens>0||c.outputTokens>0)&&(a.data["gen_ai.usage.total_tokens"]=c.inputTokens+c.outputTokens))}let dG="ai.prompt",dH="ai.model.id",dI="gen_ai.response.model",dJ="gen_ai.usage.input_tokens",dK="gen_ai.usage.output_tokens",dL="ai.toolCall.name",dM="ai.toolCall.id";function dN(a,b){a.setAttribute(ae.JD,b)}function dO(a){let{data:b,description:c}=(0,$.et)(a);if(!c)return;if(b[dL]&&b[dM]&&"ai.toolCall"===c)return void function(a,b){dN(a,"auto.vercelai.otel"),a.setAttribute(ae.uT,"gen_ai.execute_tool"),dQ(b,dL,"gen_ai.tool.name"),dQ(b,dM,"gen_ai.tool.call.id");let c=b["gen_ai.tool.call.id"];"string"==typeof c&&dE.set(c,a),b["gen_ai.tool.type"]||a.setAttribute("gen_ai.tool.type","function");let d=b["gen_ai.tool.name"];d&&a.updateName(`execute_tool ${d}`)}(a,b);let d=b[dH],e=b["ai.model.provider"];"string"==typeof d&&"string"==typeof e&&d&&e&&function(a,b,c){dN(a,"auto.vercelai.otel");let d=b.replace("ai.","");a.setAttribute("ai.pipeline.name",d),a.updateName(d);let e=c["ai.telemetry.functionId"];if(e&&"string"==typeof e&&(a.updateName(`${d} ${e}`),a.setAttribute("gen_ai.function_id",e)),c[dG]){let b=dD(c[dG]);a.setAttribute("gen_ai.prompt",b)}if(c[dH]&&!c[dI]&&a.setAttribute(dI,c[dH]),a.setAttribute("ai.streaming",b.includes("stream")),"ai.generateText"===b)return a.setAttribute(ae.uT,"gen_ai.invoke_agent");if("ai.generateText.doGenerate"===b){a.setAttribute(ae.uT,"gen_ai.generate_text"),a.updateName(`generate_text ${c[dH]}`);return}if("ai.streamText"===b)return a.setAttribute(ae.uT,"gen_ai.invoke_agent");if("ai.streamText.doStream"===b){a.setAttribute(ae.uT,"gen_ai.stream_text"),a.updateName(`stream_text ${c[dH]}`);return}if("ai.generateObject"===b)return a.setAttribute(ae.uT,"gen_ai.invoke_agent");if("ai.generateObject.doGenerate"===b){a.setAttribute(ae.uT,"gen_ai.generate_object"),a.updateName(`generate_object ${c[dH]}`);return}if("ai.streamObject"===b)return a.setAttribute(ae.uT,"gen_ai.invoke_agent");if("ai.streamObject.doStream"===b){a.setAttribute(ae.uT,"gen_ai.stream_object"),a.updateName(`stream_object ${c[dH]}`);return}if("ai.embed"===b)return a.setAttribute(ae.uT,"gen_ai.invoke_agent");if("ai.embed.doEmbed"===b){a.setAttribute(ae.uT,"gen_ai.embed"),a.updateName(`embed ${c[dH]}`);return}if("ai.embedMany"===b)return a.setAttribute(ae.uT,"gen_ai.invoke_agent");if("ai.embedMany.doEmbed"===b){a.setAttribute(ae.uT,"gen_ai.embed_many"),a.updateName(`embed_many ${c[dH]}`);return}b.startsWith("ai.stream")&&a.setAttribute(ae.uT,"ai.run")}(a,c,b)}function dP(a){if("transaction"===a.type&&a.spans){let b=new Map;for(let c of a.spans)(function(a){let{data:b,origin:c}=a;if("auto.vercelai.otel"===c)for(let a of(dQ(b,"ai.usage.completionTokens",dK),dQ(b,"ai.usage.promptTokens",dJ),dQ(b,"ai.usage.cachedInputTokens",ds),"number"==typeof b[dK]&&"number"==typeof b[dJ]&&(b["gen_ai.usage.total_tokens"]=b[dK]+b[dJ]),dQ(b,"ai.prompt.messages","gen_ai.request.messages"),dQ(b,"ai.response.text","gen_ai.response.text"),dQ(b,"ai.response.toolCalls","gen_ai.response.tool_calls"),dQ(b,"ai.response.object","gen_ai.response.object"),dQ(b,"ai.prompt.tools","gen_ai.request.available_tools"),dQ(b,"ai.toolCall.args","gen_ai.tool.input"),dQ(b,"ai.toolCall.result","gen_ai.tool.output"),dQ(b,"ai.schema","gen_ai.request.schema"),function(a){let b=a["ai.response.providerMetadata"];if(b)try{let c=JSON.parse(b);if(c.openai&&(dR(a,ds,c.openai.cachedPromptTokens),dR(a,"gen_ai.usage.output_tokens.reasoning",c.openai.reasoningTokens),dR(a,"gen_ai.usage.output_tokens.prediction_accepted",c.openai.acceptedPredictionTokens),dR(a,"gen_ai.usage.output_tokens.prediction_rejected",c.openai.rejectedPredictionTokens),dR(a,"gen_ai.conversation.id",c.openai.responseId)),c.anthropic){let b=c.anthropic.usage?.cache_read_input_tokens??c.anthropic.cacheReadInputTokens;dR(a,ds,b);let d=c.anthropic.usage?.cache_creation_input_tokens??c.anthropic.cacheCreationInputTokens;dR(a,dr,d)}c.bedrock?.usage&&(dR(a,ds,c.bedrock.usage.cacheReadInputTokens),dR(a,dr,c.bedrock.usage.cacheWriteInputTokens)),c.deepseek&&(dR(a,ds,c.deepseek.promptCacheHitTokens),dR(a,"gen_ai.usage.input_tokens.cache_miss",c.deepseek.promptCacheMissTokens))}catch{}}(b),Object.keys(b)))a.startsWith("ai.")&&dQ(b,a,`vercel.${a}`)})(c),function(a,b){let c=a.parent_span_id;if(!c)return;let d=a.data[dh],e=a.data[di];if("number"==typeof d||"number"==typeof e){let a=b.get(c)||{inputTokens:0,outputTokens:0};"number"==typeof d&&(a.inputTokens+=d),"number"==typeof e&&(a.outputTokens+=e),b.set(c,a)}}(c,b);for(let c of a.spans)"gen_ai.invoke_agent"===c.op&&dF(c,b);let c=a.contexts?.trace;c&&"gen_ai.invoke_agent"===c.op&&dF(c,b)}return a}function dQ(a,b,c){null!=a[b]&&(a[c]=a[b],delete a[b])}function dR(a,b,c){null!=c&&(a[b]=c)}var dS=c(7791);let dT=(a={})=>{let b=a.levels||P.Ow,c=a.handled??!0;return{name:"CaptureConsole",setup(a){"console"in O.O&&cZ(({args:d,level:e})=>{(0,ag.KU)()===a&&b.includes(e)&&function(a,b,c){let d={level:c_(b),extra:{arguments:a}};(0,ag.v4)(e=>{if(e.addEventProcessor(a=>(a.logger="console",(0,bM.M6)(a,{handled:c,type:"auto.core.capture_console"}),a)),"assert"===b){if(!a[0]){let b=`Assertion failed: ${(0,au.gt)(a.slice(1)," ")||"console.assert"}`;e.setExtra("arguments",a.slice(1)),(0,cf.wd)(b,d)}return}let f=a.find(a=>a instanceof Error);if(f)return void(0,cf.Cp)(f,d);let g=(0,au.gt)(a," ");(0,cf.wd)(g,d)})}(d,e,c)})}}};function dU(a,b={},c=(0,ag.o5)()){let{message:d,name:e,email:f,url:g,source:h,associatedEventId:i,tags:j}=a,k={contexts:{feedback:{contact_email:f,name:e,message:d,url:g,source:h,associated_event_id:i}},type:"feedback",level:"info",tags:j},l=c?.getClient()||(0,ag.KU)();return l&&l.emit("beforeSendFeedback",k,b),c.captureEvent(k,b)}function dV(a,b,c){var d,e,f;return"util"in O.O&&"function"==typeof O.O.util.format?O.O.util.format(...a):(d=a,e=b,f=c,d.map(a=>(0,bx.sO)(a)?String(a):JSON.stringify((0,bj.S8)(a,e,f))).join(" "))}let dW={[ae.JD]:"auto.log.console"},dX=(a={})=>{let b=a.levels||P.Ow;return{name:"ConsoleLogs",setup(a){let{enableLogs:c,normalizeDepth:d=3,normalizeMaxBreadth:e=1e3}=a.getOptions();if(!c){N.T&&P.Yz.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}cZ(({args:c,level:f})=>{var g;if((0,ag.KU)()!==a||!b.includes(f))return;let h=c[0],i=c.slice(1);if("assert"===f){h||bE({level:"error",message:i.length>0?`Assertion failed: ${dV(i,d,e)}`:"Assertion failed",attributes:dW});return}let j="log"===f,k=c.length>1&&"string"==typeof c[0]&&(g=c[0],!/%[sdifocO]/.test(g)),l={...dW,...k?function(a,b){let c={},d=Array(b.length).fill("{}").join(" ");return c["sentry.message.template"]=`${a} ${d}`,b.forEach((a,b)=>{c[`sentry.message.parameter.${b}`]=a}),c}(h,i):{}};bE({level:j?"info":f,message:dV(c,d,e),severityNumber:j?10:void 0,attributes:l})})}}},dY=["trace","debug","info","warn","error","fatal"];function dZ(a={}){let b=new Set(a.levels??dY),c=a.client;return{log(a){let{type:d,level:e,message:f,args:g,tag:h,date:i,...j}=a,k=c||(0,ag.KU)();if(!k)return;let l=function(a,b){if("verbose"===a)return"debug";if("silent"===a)return"trace";if(a){let b=d$[a];if(b)return b}if("number"==typeof b){let a=d_[b];if(a)return a}return"info"}(d,e);if(!b.has(l))return;let{normalizeDepth:m=3,normalizeMaxBreadth:n=1e3}=k.getOptions(),o=[];f&&o.push(f),g&&g.length>0&&o.push(dV(g,m,n));let p=o.join(" ");j["sentry.origin"]="auto.log.consola",h&&(j["consola.tag"]=h),d&&(j["consola.type"]=d),null!=e&&"number"==typeof e&&(j["consola.level"]=e),bE({level:l,message:p,attributes:j})}}}let d$={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},d_={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"},d0="auto.ai.langchain",d1={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},d2=(a,b,c)=>{null!=c&&(a[b]=c)},d3=(a,b,c)=>{let d=Number(c);Number.isNaN(d)||(a[b]=d)};function d4(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return String(a)}}function d5(a){let b=a.toLowerCase();return d1[b]??b}function d6(a){return a.includes("System")?"system":a.includes("Human")?"user":a.includes("AI")||a.includes("Assistant")?"assistant":a.includes("Function")?"function":a.includes("Tool")?"tool":"user"}function d7(a){if(!(!a||Array.isArray(a)))return a.invocation_params}function d8(a,b,c,d,e,f){return{[c5]:d4(a??"langchain"),[dk]:c,[c6]:d4(b),[ae.JD]:d0,...function(a,b,c){let d={},e="kwargs"in a?a.kwargs:void 0;return d3(d,c8,b?.temperature??c?.ls_temperature??e?.temperature),d3(d,c9,b?.max_tokens??c?.ls_max_tokens??e?.max_tokens),d3(d,dc,b?.top_p??e?.top_p),d3(d,da,b?.frequency_penalty),d3(d,db,b?.presence_penalty),b&&"stream"in b&&d2(d,c7,!!b.stream),d}(d,e,f)}}function d9(a={}){let b=a.recordInputs??!1,c=a.recordOutputs??!1,d=new Map,e=a=>{let b=d.get(a);b?.isRecording()&&(b.end(),d.delete(a))},f={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(a,c,e,f,g,h,i,j){let k=function(a,b,c,d,e){let f=d8(e?.ls_provider,d?.model??e?.ls_model_name??"unknown","pipeline",a,d,e);return c&&Array.isArray(b)&&b.length>0&&d2(f,dl,d4(b.map(a=>({role:"user",content:a})))),f}(a,c,b,d7(h),i),l=k[c6],m=k[dk];ct({name:`${m} ${l}`,op:"gen_ai.pipeline",attributes:{...k,[ae.uT]:"gen_ai.pipeline"}},a=>(d.set(e,a),a))},handleChatModelStart(a,c,e,f,g,h,i,j){let k=function(a,b,c,d,e){let f=d8(e?.ls_provider??a.id?.[2],d?.model??e?.ls_model_name??"unknown","chat",a,d,e);if(c&&Array.isArray(b)&&b.length>0){let a=b.flat().map(a=>{let b=a._getType;if("function"==typeof b)return{role:d5(b.call(a)),content:d4(a.content)};let c=a.constructor?.name;if(c)return{role:d5(d6(c)),content:d4(a.content)};if(a.type)return{role:d5(String(a.type).toLowerCase()),content:d4(a.content)};if(a.role)return{role:d5(String(a.role)),content:d4(a.content)};if(1===a.lc&&a.kwargs){let b=a.id,c=Array.isArray(b)&&b.length>0?b[b.length-1]:"";return{role:d5("string"==typeof c?d6(c):"user"),content:d4(a.kwargs?.content)}}return{role:"user",content:d4(a.content)}});d2(f,dl,d4(a))}return f}(a,c,b,d7(h),i),l=k[c6],m=k[dk];ct({name:`${m} ${l}`,op:"gen_ai.chat",attributes:{...k,[ae.uT]:"gen_ai.chat"}},a=>(d.set(e,a),a))},handleLLMEnd(a,b,f,g,h){let i=d.get(b);if(i?.isRecording()){let d=function(a,b){if(!a)return;let c={};if(Array.isArray(a.generations)){let e=a.generations.flat().map(a=>a.generation_info?.finish_reason).filter(a=>"string"==typeof a);e.length>0&&d2(c,de,d4(e));var d=a.generations;let f=[];for(let a of d.flat()){let b=a.message?.content;if(Array.isArray(b))for(let a of b)"tool_use"===a.type&&f.push(a)}if(f.length>0&&d2(c,dq,d4(f)),b){let b=a.generations.flat().map(a=>a.text??a.message?.content).filter(a=>"string"==typeof a);b.length>0&&d2(c,dm,d4(b))}}!function(a,b){if(!a)return;let c=a.tokenUsage,d=a.usage;if(c)d3(b,dh,c.promptTokens),d3(b,di,c.completionTokens),d3(b,dj,c.totalTokens);else if(d){d3(b,dh,d.input_tokens),d3(b,di,d.output_tokens);let a=Number(d.input_tokens),c=Number(d.output_tokens),e=(Number.isNaN(a)?0:a)+(Number.isNaN(c)?0:c);e>0&&d3(b,dj,e),void 0!==d.cache_creation_input_tokens&&d3(b,"gen_ai.usage.cache_creation_input_tokens",d.cache_creation_input_tokens),void 0!==d.cache_read_input_tokens&&d3(b,"gen_ai.usage.cache_read_input_tokens",d.cache_read_input_tokens)}}(a.llmOutput,c);let e=a.llmOutput,f=e?.model_name??e?.model;return f&&d2(c,df,f),e?.id&&d2(c,dg,e.id),e?.stop_reason&&d2(c,"gen_ai.response.stop_reason",d4(e.stop_reason)),c}(a,c);d&&i.setAttributes(d),e(b)}},handleLLMError(a,b){let c=d.get(b);c?.isRecording()&&(c.setStatus({code:_.TJ,message:"llm_error"}),e(b)),(0,cf.Cp)(a,{mechanism:{handled:!1,type:`${d0}.llm_error_handler`}})},handleChainStart(a,c,e,f){let g=a.name||"unknown_chain",h={[ae.JD]:"auto.ai.langchain","langchain.chain.name":g};b&&(h["langchain.chain.inputs"]=JSON.stringify(c)),ct({name:`chain ${g}`,op:"gen_ai.invoke_agent",attributes:{...h,[ae.uT]:"gen_ai.invoke_agent"}},a=>(d.set(e,a),a))},handleChainEnd(a,b){let f=d.get(b);f?.isRecording()&&(c&&f.setAttributes({"langchain.chain.outputs":JSON.stringify(a)}),e(b))},handleChainError(a,b){let c=d.get(b);c?.isRecording()&&(c.setStatus({code:_.TJ,message:"chain_error"}),e(b)),(0,cf.Cp)(a,{mechanism:{handled:!1,type:`${d0}.chain_error_handler`}})},handleToolStart(a,c,e,f){let g=a.name||"unknown_tool",h={[ae.JD]:d0,"gen_ai.tool.name":g};b&&(h["gen_ai.tool.input"]=c),ct({name:`execute_tool ${g}`,op:"gen_ai.execute_tool",attributes:{...h,[ae.uT]:"gen_ai.execute_tool"}},a=>(d.set(e,a),a))},handleToolEnd(a,b){let f=d.get(b);f?.isRecording()&&(c&&f.setAttributes({"gen_ai.tool.output":JSON.stringify(a)}),e(b))},handleToolError(a,b){let c=d.get(b);c?.isRecording()&&(c.setStatus({code:_.TJ,message:"tool_error"}),e(b)),(0,cf.Cp)(a,{mechanism:{handled:!1,type:`${d0}.tool_error_handler`}})},copy:()=>f,toJSON:()=>({lc:1,type:"not_implemented",id:f.lc_id}),toJSONNotImplemented:()=>({lc:1,type:"not_implemented",id:f.lc_id})};return f}let ea=(a={})=>{let{depth:b=3,captureErrorCause:c=!0}=a;return{name:"ExtraErrorData",processEvent(a,d,e){let{maxValueLength:f=250}=e.getOptions();return function(a,b={},c,d,e){if(!b.originalException||!(0,bx.bJ)(b.originalException))return a;let f=b.originalException.name||b.originalException.constructor.name,g=function a(b,c,d){try{let e=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],f={};for(let a of Object.keys(b)){if(-1!==e.indexOf(a))continue;let c=b[a];f[a]=(0,bx.bJ)(c)||"string"==typeof c?(0,au.xv)(`${c}`,d):c}if(c&&void 0!==b.cause&&((0,bx.bJ)(b.cause)?f.cause={[b.cause.name||b.cause.constructor.name]:a(b.cause,!1,d)}:f.cause=b.cause),"function"==typeof b.toJSON){let a=b.toJSON();for(let b of Object.keys(a)){let c=a[b];f[b]=(0,bx.bJ)(c)?c.toString():c}}return f}catch(a){N.T&&P.Yz.error("Unable to extract extra data from the Error object:",a)}return null}(b.originalException,d,e);if(g){let b={...a.contexts},d=(0,bj.S8)(g,c);return(0,bx.Qd)(d)&&((0,b4.my)(d,"__sentry_skip_normalization__",!0),b[f]=d),{...a,contexts:b}}return a}(a,d,b,c,f)}}},eb="flag.evaluation.",ec=()=>({name:"FeatureFlags",processEvent:(a,b,c)=>(function(a){let b=(0,ag.o5)().getScopeData().contexts.flags,c=b?b.values:[];return c.length&&(void 0===a.contexts&&(a.contexts={}),a.contexts.flags={values:[...c]}),a})(a),addFeatureFlag(a,b){!function(a,b,c=100){let d=(0,ag.o5)().getScopeData().contexts;d.flags||(d.flags={values:[]}),function(a,b,c,d){if("boolean"!=typeof c)return;if(a.length>d){N.T&&P.Yz.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${d}`);return}let e=a.findIndex(a=>a.flag===b);-1!==e&&a.splice(e,1),a.length===d&&a.shift(),a.push({flag:b,result:c})}(d.flags.values,a,b,c)}(a,b),function(a,b,c=10){if("boolean"!=typeof b)return;let d=(0,$.Bk)();if(!d)return;let e=(0,$.et)(d).data;if(`${eb}${a}`in e)return d.setAttribute(`${eb}${a}`,b);Object.keys(e).filter(a=>a.startsWith(eb)).length<c&&d.setAttribute(`${eb}${a}`,b)}(a,b)}});function ed(a){return Object.entries(a||cF()).map(([a,b])=>`<meta name="${a}" content="${b}"/>`).join("\n")}function ee(a,b,c,d){if(a&&"object"==typeof a&&(!("type"in a)||"string"!=typeof a.type||"error"!==a.type||(d.setStatus({code:_.TJ,message:a.error?.type??"unknown_error"}),(0,cf.Cp)(a.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),0))){if("message_delta"===a.type&&a.usage&&"output_tokens"in a.usage&&"number"==typeof a.usage.output_tokens&&(b.completionTokens=a.usage.output_tokens),a.message){let c=a.message;c.id&&(b.responseId=c.id),c.model&&(b.responseModel=c.model),c.stop_reason&&b.finishReasons.push(c.stop_reason),c.usage&&("number"==typeof c.usage.input_tokens&&(b.promptTokens=c.usage.input_tokens),"number"==typeof c.usage.cache_creation_input_tokens&&(b.cacheCreationInputTokens=c.usage.cache_creation_input_tokens),"number"==typeof c.usage.cache_read_input_tokens&&(b.cacheReadInputTokens=c.usage.cache_read_input_tokens))}"content_block_start"===a.type&&"number"==typeof a.index&&a.content_block&&("tool_use"===a.content_block.type||"server_tool_use"===a.content_block.type)&&(b.activeToolBlocks[a.index]={id:a.content_block.id,name:a.content_block.name,inputJsonParts:[]});if("content_block_delta"===a.type&&a.delta){if("number"==typeof a.index&&"partial_json"in a.delta&&"string"==typeof a.delta.partial_json){let c=b.activeToolBlocks[a.index];c&&c.inputJsonParts.push(a.delta.partial_json)}c&&"string"==typeof a.delta.text&&b.responseTexts.push(a.delta.text)}!function(a,b){let c;if("content_block_stop"!==a.type||"number"!=typeof a.index)return;let d=b.activeToolBlocks[a.index];if(!d)return;let e=d.inputJsonParts.join("");try{c=e?JSON.parse(e):{}}catch{c={__unparsed:e}}b.toolCalls.push({type:"tool_use",id:d.id,name:d.name,input:c}),delete b.activeToolBlocks[a.index]}(a,b)}}async function*ef(a,b,c){let d={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let e of a)ee(e,d,c,b),yield e}finally{d.responseId&&b.setAttributes({[dg]:d.responseId}),d.responseModel&&b.setAttributes({[df]:d.responseModel}),dC(b,d.promptTokens,d.completionTokens,d.cacheCreationInputTokens,d.cacheReadInputTokens),b.setAttributes({[dp]:!0}),d.finishReasons.length>0&&b.setAttributes({[de]:JSON.stringify(d.finishReasons)}),c&&d.responseTexts.length>0&&b.setAttributes({[dm]:d.responseTexts.join("")}),c&&d.toolCalls.length>0&&b.setAttributes({[dq]:JSON.stringify(d.toolCalls)}),b.end()}}let eg=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function eh(a,b){if("messages"in b){let c=dD(b.messages);a.setAttributes({[dl]:c})}if("input"in b){let c=dD(b.input);a.setAttributes({[dl]:c})}"prompt"in b&&a.setAttributes({"gen_ai.prompt":JSON.stringify(b.prompt)})}function ei(a,b,c){throw(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:c}}}),b.isRecording()&&(b.setStatus({code:_.TJ,message:"internal_error"}),b.end()),a}function ej(a,b){let c=!!(0,ag.KU)()?.getOptions().sendDefaultPii;return function a(b,c="",d){return new Proxy(b,{get(b,e){let f=b[e],g=dB(c,String(e));return"function"==typeof f&&eg.includes(g)?new Proxy(f,{apply(a,c,e){let h=function(a,b){let c={[c5]:"anthropic",[dk]:dz(b),[ae.JD]:"auto.ai.anthropic"};if(a.length>0&&"object"==typeof a[0]&&null!==a[0]){let b=a[0];b.tools&&Array.isArray(b.tools)&&(c[dn]=JSON.stringify(b.tools)),c[c6]=b.model??"unknown","temperature"in b&&(c[c8]=b.temperature),"top_p"in b&&(c[dc]=b.top_p),"stream"in b&&(c[c7]=b.stream),"top_k"in b&&(c[dd]=b.top_k),"frequency_penalty"in b&&(c[da]=b.frequency_penalty),"max_tokens"in b&&(c[c9]=b.max_tokens)}else"models.retrieve"===b||"models.get"===b?c[c6]=a[0]:c[c6]="unknown";return c}(e,g),i=h[c6]??"unknown",j=dz(g),k="object"==typeof e[0]?e[0]:void 0,l=!!k?.stream,m="messages.stream"===g;if(l||m){let c=h[c6]??"unknown",i={name:`${j} ${c} stream-response`,op:dA(g),attributes:h};return l&&!m?ct(i,async a=>{try{d.recordInputs&&k&&eh(a,k);let c=await f.apply(b,e);return ef(c,a,d.recordOutputs??!1)}catch(b){return ei(b,a,g)}}):ct(i,c=>{try{d.recordInputs&&k&&eh(c,k);var f=a.apply(b,e),h=d.recordOutputs??!1;let g={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return f.on("streamEvent",a=>{ee(a,g,h,c)}),f.on("message",()=>{c.isRecording()&&(g.responseId&&c.setAttributes({[dg]:g.responseId}),g.responseModel&&c.setAttributes({[df]:g.responseModel}),dC(c,g.promptTokens,g.completionTokens,g.cacheCreationInputTokens,g.cacheReadInputTokens),c.setAttributes({[dp]:!0}),g.finishReasons.length>0&&c.setAttributes({[de]:JSON.stringify(g.finishReasons)}),h&&g.responseTexts.length>0&&c.setAttributes({[dm]:g.responseTexts.join("")}),h&&g.toolCalls.length>0&&c.setAttributes({[dq]:JSON.stringify(g.toolCalls)}),c.end())}),f.on("error",a=>{(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),c.isRecording()&&(c.setStatus({code:_.TJ,message:"stream_error"}),c.end())}),f}catch(a){return ei(a,c,g)}})}return cs({name:`${j} ${i}`,op:dA(g),attributes:h},c=>(d.recordInputs&&k&&eh(c,k),ca(()=>a.apply(b,e),a=>{(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:g}}})},()=>{},a=>(function(a,b,c){if(b&&"object"==typeof b){if("type"in b&&"error"===b.type)return void(b.error&&(a.setStatus({code:_.TJ,message:b.error.type||"unknown_error"}),(0,cf.Cp)(b.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}})));c&&function(a,b){if("content"in b&&Array.isArray(b.content)){a.setAttributes({[dm]:b.content.map(a=>a.text).filter(a=>!!a).join("")});let c=[];for(let a of b.content)("tool_use"===a.type||"server_tool_use"===a.type)&&c.push(a);c.length>0&&a.setAttributes({[dq]:JSON.stringify(c)})}"completion"in b&&a.setAttributes({[dm]:b.completion}),"input_tokens"in b&&a.setAttributes({[dm]:JSON.stringify(b.input_tokens)})}(a,b),"id"in b&&"model"in b&&(a.setAttributes({[dg]:b.id,[df]:b.model}),"created"in b&&"number"==typeof b.created&&a.setAttributes({[du]:new Date(1e3*b.created).toISOString()}),"created_at"in b&&"number"==typeof b.created_at&&a.setAttributes({[du]:new Date(1e3*b.created_at).toISOString()}),"usage"in b&&b.usage&&dC(a,b.usage.input_tokens,b.usage.output_tokens,b.usage.cache_creation_input_tokens,b.usage.cache_read_input_tokens))}})(c,a,d.recordOutputs))))}}):"function"==typeof f?f.bind(b):f&&"object"==typeof f?a(f,g,d):f}})}(a,"",{recordInputs:c,recordOutputs:c,...b})}let ek=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],el="chats.create";async function*em(a,b,c){let d={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let e of a)!function(a,b,c,d){if(!(!a||function(a,b){let c=a?.promptFeedback;if(c?.blockReason){let a=c.blockReasonMessage??c.blockReason;return b.setStatus({code:_.TJ,message:`Content blocked: ${a}`}),(0,cf.Cp)(`Content blocked: ${a}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}(a,d))){"string"==typeof a.responseId&&(b.responseId=a.responseId),"string"==typeof a.modelVersion&&(b.responseModel=a.modelVersion);let d=a.usageMetadata;d&&("number"==typeof d.promptTokenCount&&(b.promptTokens=d.promptTokenCount),"number"==typeof d.candidatesTokenCount&&(b.completionTokens=d.candidatesTokenCount),"number"==typeof d.totalTokenCount&&(b.totalTokens=d.totalTokenCount));for(let d of(Array.isArray(a.functionCalls)&&b.toolCalls.push(...a.functionCalls),a.candidates??[]))for(let a of(d?.finishReason&&!b.finishReasons.includes(d.finishReason)&&b.finishReasons.push(d.finishReason),d?.content?.parts??[]))c&&a.text&&b.responseTexts.push(a.text),a.functionCall&&b.toolCalls.push({type:"function",id:a.functionCall.id,name:a.functionCall.name,arguments:a.functionCall.args})}}(e,d,c,b),yield e}finally{let a={[dp]:!0};d.responseId&&(a[dg]=d.responseId),d.responseModel&&(a[df]=d.responseModel),void 0!==d.promptTokens&&(a[dh]=d.promptTokens),void 0!==d.completionTokens&&(a[di]=d.completionTokens),void 0!==d.totalTokens&&(a[dj]=d.totalTokens),d.finishReasons.length&&(a[de]=JSON.stringify(d.finishReasons)),c&&d.responseTexts.length&&(a[dm]=d.responseTexts.join("")),c&&d.toolCalls.length&&(a[dq]=JSON.stringify(d.toolCalls)),b.setAttributes(a),b.end()}}function en(a,b){if("model"in a&&"string"==typeof a.model)return a.model;if(b&&"object"==typeof b){if("model"in b&&"string"==typeof b.model)return b.model;if("modelVersion"in b&&"string"==typeof b.modelVersion)return b.modelVersion}return"unknown"}function eo(a,b){if("contents"in b){let c=dD(b.contents);a.setAttributes({[dl]:c})}if("message"in b){let c=dD(b.message);a.setAttributes({[dl]:c})}if("history"in b){let c=dD(b.history);a.setAttributes({[dl]:c})}}function ep(a,b,c,d){let e=b===el;return new Proxy(a,{apply(a,f,g){let h=g[0],i=function(a,b,c){let d={[c5]:"google_genai",[dk]:dz(a),[ae.JD]:"auto.ai.google_genai"};if(b){if(d[c6]=en(b,c),"config"in b&&"object"==typeof b.config&&b.config){let a=b.config;if(Object.assign(d,function(a){let b={};return"temperature"in a&&"number"==typeof a.temperature&&(b[c8]=a.temperature),"topP"in a&&"number"==typeof a.topP&&(b[dc]=a.topP),"topK"in a&&"number"==typeof a.topK&&(b[dd]=a.topK),"maxOutputTokens"in a&&"number"==typeof a.maxOutputTokens&&(b[c9]=a.maxOutputTokens),"frequencyPenalty"in a&&"number"==typeof a.frequencyPenalty&&(b[da]=a.frequencyPenalty),"presencePenalty"in a&&"number"==typeof a.presencePenalty&&(b[db]=a.presencePenalty),b}(a)),"tools"in a&&Array.isArray(a.tools)){let b=a.tools.map(a=>a.functionDeclarations);d[dn]=JSON.stringify(b)}}}else d[c6]=en({},c);return d}(b,h,c),j=i[c6]??"unknown",k=dz(b);return b.includes("Stream")||b.endsWith("generateContentStream")||b.endsWith("sendMessageStream")?ct({name:`${k} ${j} stream-response`,op:dA(b),attributes:i},async e=>{try{d.recordInputs&&h&&eo(e,h);let b=await a.apply(c,g);return em(b,e,!!d.recordOutputs)}catch(a){throw e.setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:b}}}),e.end(),a}}):cs({name:e?`${k} ${j} create`:`${k} ${j}`,op:dA(b),attributes:i},f=>(d.recordInputs&&h&&eo(f,h),ca(()=>a.apply(c,g),a=>{(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:b}}})},()=>{},a=>{e||function(a,b,c){if(b&&"object"==typeof b){if(b.usageMetadata&&"object"==typeof b.usageMetadata){let c=b.usageMetadata;"number"==typeof c.promptTokenCount&&a.setAttributes({[dh]:c.promptTokenCount}),"number"==typeof c.candidatesTokenCount&&a.setAttributes({[di]:c.candidatesTokenCount}),"number"==typeof c.totalTokenCount&&a.setAttributes({[dj]:c.totalTokenCount})}if(c&&Array.isArray(b.candidates)&&b.candidates.length>0){let c=b.candidates.map(a=>a.content?.parts&&Array.isArray(a.content.parts)?a.content.parts.map(a=>"string"==typeof a.text?a.text:"").filter(a=>a.length>0).join(""):"").filter(a=>a.length>0);c.length>0&&a.setAttributes({[dm]:c.join("")})}if(c&&b.functionCalls){let c=b.functionCalls;Array.isArray(c)&&c.length>0&&a.setAttributes({[dq]:JSON.stringify(c)})}}}(f,a,d.recordOutputs)})))}})}function eq(a,b){let c=!!(0,ag.KU)()?.getOptions().sendDefaultPii;return function a(b,c="",d){return new Proxy(b,{get:(b,e,f)=>{let g=Reflect.get(b,e,f),h=dB(c,String(e));if("function"==typeof g&&function(a){if(ek.includes(a))return!0;let b=a.split(".").pop();return ek.includes(b)}(h)){if(h===el){let c=ep(g,h,b,d);return function(...b){let e=c(...b);return e&&"object"==typeof e?a(e,"chat",d):e}}return ep(g,h,b,d)}return"function"==typeof g?g.bind(b):g&&"object"==typeof g?a(g,h,d):g}})}(a,"",{recordInputs:c,recordOutputs:c,...b})}let er=["responses.create","chat.completions.create"],es=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta","response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"];function et(a){return a.includes("chat.completions")?dt.CHAT:a.includes("responses")?dt.RESPONSES:a.split(".").pop()||"unknown"}function eu(a){return`gen_ai.${et(a)}`}function ev(a,b,c,d){void 0!==b&&a.setAttributes({"openai.usage.prompt_tokens":b,[dh]:b}),void 0!==c&&a.setAttributes({"openai.usage.completion_tokens":c,[di]:c}),void 0!==d&&a.setAttributes({[dj]:d})}function ew(a,b,c,d){a.setAttributes({"openai.response.id":b,[dg]:b}),a.setAttributes({"openai.response.model":c,[df]:c}),a.setAttributes({"openai.response.timestamp":new Date(1e3*d).toISOString()})}async function*ex(a,b,c){let d={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let e of a){if(null!==e&&"object"==typeof e&&"object"in e&&"chat.completion.chunk"===e.object){for(let a of(d.responseId=e.id??d.responseId,d.responseModel=e.model??d.responseModel,d.responseTimestamp=e.created??d.responseTimestamp,e.usage&&(d.promptTokens=e.usage.prompt_tokens,d.completionTokens=e.usage.completion_tokens,d.totalTokens=e.usage.total_tokens),e.choices??[]))c&&(a.delta?.content&&d.responseTexts.push(a.delta.content),a.delta?.tool_calls&&function(a,b){for(let c of a){let a=c.index;if(void 0!==a&&c.function)if(a in b.chatCompletionToolCalls){let d=b.chatCompletionToolCalls[a];c.function.arguments&&d?.function&&(d.function.arguments+=c.function.arguments)}else b.chatCompletionToolCalls[a]={...c,function:{name:c.function.name,arguments:c.function.arguments||""}}}}(a.delta.tool_calls,d)),a.finish_reason&&d.finishReasons.push(a.finish_reason)}else null!==e&&"object"==typeof e&&"type"in e&&"string"==typeof e.type&&e.type.startsWith("response.")&&function(a,b,c,d){if(!(a&&"object"==typeof a))return b.eventTypes.push("unknown:non-object");if(a instanceof Error){d.setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if("type"in a){if(!es.includes(a.type))return b.eventTypes.push(a.type);if(c&&("response.output_item.done"===a.type&&"item"in a&&b.responsesApiToolCalls.push(a.item),"response.output_text.delta"===a.type&&"delta"in a&&a.delta))return b.responseTexts.push(a.delta);if("response"in a){let{response:d}=a;b.responseId=d.id??b.responseId,b.responseModel=d.model??b.responseModel,b.responseTimestamp=d.created_at??b.responseTimestamp,d.usage&&(b.promptTokens=d.usage.input_tokens,b.completionTokens=d.usage.output_tokens,b.totalTokens=d.usage.total_tokens),d.status&&b.finishReasons.push(d.status),c&&d.output_text&&b.responseTexts.push(d.output_text)}}}(e,d,c,b);yield e}}finally{ew(b,d.responseId,d.responseModel,d.responseTimestamp),ev(b,d.promptTokens,d.completionTokens,d.totalTokens),b.setAttributes({[dp]:!0}),d.finishReasons.length&&b.setAttributes({[de]:JSON.stringify(d.finishReasons)}),c&&d.responseTexts.length&&b.setAttributes({[dm]:d.responseTexts.join("")});let a=[...Object.values(d.chatCompletionToolCalls),...d.responsesApiToolCalls];a.length>0&&b.setAttributes({[dq]:JSON.stringify(a)}),b.end()}}function ey(a,b){if("messages"in b){let c=dD(b.messages);a.setAttributes({[dl]:c})}if("input"in b){let c=dD(b.input);a.setAttributes({[dl]:c})}}function ez(a,b){return function a(b,c="",d){return new Proxy(b,{get(b,e){var f;let g=b[e],h=(f=String(e),c?`${c}.${f}`:f);return"function"==typeof g&&er.includes(h)?async function(...a){let c=d||function(){let a=(0,ag.o5)().getClient(),b=a?.getIntegrationByName("OpenAI"),c=!!b&&!!a?.getOptions().sendDefaultPii;return{recordInputs:b?.options?.recordInputs??c,recordOutputs:b?.options?.recordOutputs??c}}(),e=function(a,b){let c={[c5]:"openai",[dk]:et(b),[ae.JD]:"auto.ai.openai"};if(a.length>0&&"object"==typeof a[0]&&null!==a[0]){let b=a[0],d=[...Array.isArray(b.tools)?b.tools:[],...b.web_search_options&&"object"==typeof b.web_search_options?[{type:"web_search_options",...b.web_search_options}]:[]];d.length>0&&(c[dn]=JSON.stringify(d))}if(a.length>0&&"object"==typeof a[0]&&null!==a[0]){let b=a[0];c[c6]=b.model??"unknown","temperature"in b&&(c[c8]=b.temperature),"top_p"in b&&(c[dc]=b.top_p),"frequency_penalty"in b&&(c[da]=b.frequency_penalty),"presence_penalty"in b&&(c[db]=b.presence_penalty),"stream"in b&&(c[c7]=b.stream)}else c[c6]="unknown";return c}(a,h),f=e[c6]||"unknown",i=et(h),j=a[0];return j&&"object"==typeof j&&!0===j.stream?ct({name:`${i} ${f} stream-response`,op:eu(h),attributes:e},async d=>{try{c.recordInputs&&a[0]&&"object"==typeof a[0]&&ey(d,a[0]);let e=await g.apply(b,a);return ex(e,d,c.recordOutputs??!1)}catch(a){throw d.setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:h}}}),d.end(),a}}):cs({name:`${i} ${f}`,op:eu(h),attributes:e},async d=>{try{c.recordInputs&&a[0]&&"object"==typeof a[0]&&ey(d,a[0]);let e=await g.apply(b,a);return!function(a,b,c){if(b&&"object"==typeof b){if(null!==b&&"object"==typeof b&&"object"in b&&"chat.completion"===b.object){if(ew(a,b.id,b.model,b.created),b.usage&&ev(a,b.usage.prompt_tokens,b.usage.completion_tokens,b.usage.total_tokens),Array.isArray(b.choices)){let d=b.choices.map(a=>a.finish_reason).filter(a=>null!==a);if(d.length>0&&a.setAttributes({[de]:JSON.stringify(d)}),c){let c=b.choices.map(a=>a.message?.tool_calls).filter(a=>Array.isArray(a)&&a.length>0).flat();c.length>0&&a.setAttributes({[dq]:JSON.stringify(c)})}}if(c&&b.choices?.length){let c=b.choices.map(a=>a.message?.content||"");a.setAttributes({[dm]:JSON.stringify(c)})}}else if(null!==b&&"object"==typeof b&&"object"in b&&"response"===b.object){if(ew(a,b.id,b.model,b.created_at),b.status&&a.setAttributes({[de]:JSON.stringify([b.status])}),b.usage&&ev(a,b.usage.input_tokens,b.usage.output_tokens,b.usage.total_tokens),c&&Array.isArray(b.output)&&b.output.length>0){let c=b.output.filter(a=>"object"==typeof a&&null!==a&&"function_call"===a.type);c.length>0&&a.setAttributes({[dq]:JSON.stringify(c)})}c&&b.output_text&&a.setAttributes({[dm]:b.output_text})}}}(d,e,c.recordOutputs),e}catch(a){throw(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:h}}}),a}})}:"function"==typeof g?g.bind(b):g&&"object"==typeof g?a(g,h,d):g}})}(a,"",b)}let eA=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],eB=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],eC={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},eD=["select","insert","upsert","update","delete"];function eE(a){try{a.__SENTRY_INSTRUMENTED__=!0}catch{}}function eF(a){try{return a.__SENTRY_INSTRUMENTED__}catch{return!1}}function eG(a,b=!1){return new Proxy(a,{apply:(c,d,e)=>cs({name:`auth ${b?"(admin) ":""}${a.name}`,attributes:{[ae.JD]:"auto.db.supabase",[ae.uT]:"db","db.system":"postgresql","db.operation":`auth.${b?"admin.":""}${a.name}`}},a=>Reflect.apply(c,d,e).then(b=>(b&&"object"==typeof b&&"error"in b&&b.error?(a.setStatus({code:_.TJ}),(0,cf.Cp)(b.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):a.setStatus({code:_.F3}),a.end(),b)).catch(b=>{throw a.setStatus({code:_.TJ}),a.end(),(0,cf.Cp)(b,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),b}).then(...e))})}let eH=a=>{if(!a){N.T&&P.Yz.warn("Supabase integration was not installed because no Supabase client was provided.");return}!function(a){eF(a.prototype.from)||(a.prototype.from=new Proxy(a.prototype.from,{apply(a,b,c){let d=Reflect.apply(a,b,c);return function(a){for(let b of eD)eF(a.prototype[b])||(a.prototype[b]=new Proxy(a.prototype[b],{apply(a,c,d){let e=Reflect.apply(a,c,d),f=e.constructor;return N.T&&P.Yz.log(`Instrumenting ${b} operation's PostgRESTFilterBuilder`),eF(f.prototype.then)||(f.prototype.then=new Proxy(f.prototype.then,{apply(a,b,c){let d=function(a,b={}){switch(a){case"GET":return"select";case"POST":if(b.Prefer?.includes("resolution="))return"upsert";return"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(b.method,b.headers);if(!eD.includes(d)||!b?.url?.pathname||"string"!=typeof b.url.pathname)return Reflect.apply(a,b,c);let e=b.url.pathname.split("/"),f=e.length>0?e[e.length-1]:"",g=[];for(let[a,c]of b.url.searchParams.entries())g.push(function(a,b){let c;if(""===b||"*"===b)return"select(*)";if("select"===a)return`select(${b})`;if("or"===a||a.endsWith(".or"))return`${a}${b}`;let[d,...e]=b.split(".");return c=d?.startsWith("fts")?"textSearch":d?.startsWith("plfts")?"textSearch[plain]":d?.startsWith("phfts")?"textSearch[phrase]":d?.startsWith("wfts")?"textSearch[websearch]":d&&eC[d]||"filter",`${c}(${a}, ${e.join(".")})`}(a,c));let h=Object.create(null);if((0,bx.Qd)(b.body))for(let[a,c]of Object.entries(b.body))h[a]=c;let i=`${"select"===d?"":`${d}${h?"(...) ":""}`}${g.join(" ")} from(${f})`,j={"db.table":f,"db.schema":b.schema,"db.url":b.url.origin,"db.sdk":b.headers["X-Client-Info"],"db.system":"postgresql","db.operation":d,[ae.JD]:"auto.db.supabase",[ae.uT]:"db"};return g.length&&(j["db.query"]=g),Object.keys(h).length&&(j["db.body"]=h),cs({name:i,attributes:j},e=>Reflect.apply(a,b,[]).then(a=>{if(e&&(a&&"object"==typeof a&&"status"in a&&(0,_.N8)(e,a.status||500),e.end()),a.error){let b=Error(a.error.message);a.error.code&&(b.code=a.error.code),a.error.details&&(b.details=a.error.details);let c={};g.length&&(c.query=g),Object.keys(h).length&&(c.body=h),(0,cf.Cp)(b,a=>(a.addEventProcessor(a=>((0,bM.M6)(a,{handled:!1,type:"auto.db.supabase.postgres"}),a)),a.setContext("supabase",c),a))}let b={type:"supabase",category:`db.${d}`,message:i},c={};return g.length&&(c.query=g),Object.keys(h).length&&(c.body=h),Object.keys(c).length&&(b.data=c),cH(b),a},a=>{throw e&&((0,_.N8)(e,500),e.end()),a}).then(...c))}}),eE(f.prototype.then)),e}}),eE(a.prototype[b]))}(d.constructor),d}}),eE(a.prototype.from))}(a.constructor===Function?a:a.constructor),function(a){let b=a.auth;if(!(!b||eF(a.auth))){for(let c of eA){let d=b[c];d&&"function"==typeof a.auth[c]&&(a.auth[c]=eG(d))}for(let c of eB){let d=b.admin[c];d&&"function"==typeof a.auth.admin[c]&&(a.auth.admin[c]=eG(d,!0))}eE(a.auth)}}(a)},eI=a=>{let b;return b=a.supabaseClient,{setupOnce(){eH(b)},name:"Supabase"}},eJ=function(a,...b){let c=new String(String.raw(a,...b));return c.__sentry_template_string__=a.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),c.__sentry_template_values__=b,c};function eK(a,b,c,d,e){bE({level:a,message:b,attributes:c,severityNumber:e},d)}function eL(a,b,{scope:c}={}){eK("trace",a,b,c)}function eM(a,b,{scope:c}={}){eK("debug",a,b,c)}function eN(a,b,{scope:c}={}){eK("info",a,b,c)}function eO(a,b,{scope:c}={}){eK("warn",a,b,c)}function eP(a,b,{scope:c}={}){eK("error",a,b,c)}function eQ(a,b,{scope:c}={}){eK("fatal",a,b,c)}let eR=new Map,eS=new Set,eT=()=>({name:"ModuleMetadata",setup(a){a.on("beforeEnvelope",a=>{bl(a,(a,b)=>{if("event"===b){let b=Array.isArray(a)?a[1]:void 0;b&&(b.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{delete a.module_metadata})}),a[1]=b)}})}),a.on("applyFrameMetadata",b=>{var c;b.type||(c=a.getOptions().stackParser,b.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{if(!a.filename||a.module_metadata)return;let b=function(a,b){if(O.O._sentryModuleMetadata)for(let b of Object.keys(O.O._sentryModuleMetadata)){let c=O.O._sentryModuleMetadata[b];if(!eS.has(b)){for(let d of(eS.add(b),a(b).reverse()))if(d.filename){eR.set(d.filename,c);break}}}return eR.get(b)}(c,a.filename);b&&(a.module_metadata=b)})}))})}}),eU=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function eV(...a){let b="",c=!1;for(let d=a.length-1;d>=-1&&!c;d--){let e=d>=0?a[d]:"/";e&&(b=`${e}/${b}`,c="/"===e.charAt(0))}return b=(function(a,b){let c=0;for(let b=a.length-1;b>=0;b--){let d=a[b];"."===d?a.splice(b,1):".."===d?(a.splice(b,1),c++):c&&(a.splice(b,1),c--)}if(b)for(;c--;)a.unshift("..");return a})(b.split("/").filter(a=>!!a),!c).join("/"),(c?"/":"")+b||"."}function eW(a){let b=0;for(;b<a.length&&""===a[b];b++);let c=a.length-1;for(;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}let eX=(a={})=>{let b=a.root,c=a.prefix||"app:///",d="window"in O.O&&!!O.O.window,e=a.iteratee||function({isBrowser:a,root:b,prefix:c}){return d=>{if(!d.filename)return d;let e=/^[a-zA-Z]:\\/.test(d.filename)||d.filename.includes("\\")&&!d.filename.includes("/"),f=/^\//.test(d.filename);if(a){if(b){let a=d.filename;0===a.indexOf(b)&&(d.filename=a.replace(b,c))}}else if(e||f){let a=e?d.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):d.filename,f=b?function(a,b){a=eV(a).slice(1),b=eV(b).slice(1);let c=eW(a.split("/")),d=eW(b.split("/")),e=Math.min(c.length,d.length),f=e;for(let a=0;a<e;a++)if(c[a]!==d[a]){f=a;break}let g=[];for(let a=f;a<c.length;a++)g.push("..");return(g=g.concat(d.slice(f))).join("/")}(b,a):function(a){let b=a.length>1024?`<truncated>${a.slice(-1024)}`:a,c=eU.exec(b);return c?c.slice(1):[]}(a)[2]||"";d.filename=`${c}${f}`}return d}}({isBrowser:d,root:b,prefix:c});return{name:"RewriteFrames",processEvent(a){let b=a;return a.exception&&Array.isArray(a.exception.values)&&(b=function(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(a=>{var b;return{...a,...a.stacktrace&&{stacktrace:{...b=a.stacktrace,frames:b?.frames?.map(a=>e(a))}}}})}}}catch{return a}}(b)),b}}};function eY(a){(0,ag.o5)().setClient(a)}let eZ={mechanism:{handled:!1,type:"auto.rpc.trpc.middleware"}};function e$(a={}){return async function(b){let{path:c,type:d,next:e,rawInput:f,getRawInput:g}=b,h=(0,ag.KU)(),i=h?.getOptions(),j={procedure_path:c,procedure_type:d};if((0,b4.my)(j,"__sentry_override_normalization_depth__",1+(i?.normalizeDepth??5)),(void 0!==a.attachRpcInput?a.attachRpcInput:i?.sendDefaultPii)&&(void 0!==f&&(j.input=(0,bj.S8)(f)),void 0!==g&&"function"==typeof g))try{let a=await g();j.input=(0,bj.S8)(a)}catch{}return(0,ag.rB)(b=>(b.setContext("trpc",j),ct({name:`trpc/${c}`,op:"rpc.server",attributes:{[ae.i_]:"route",[ae.JD]:"auto.rpc.trpc"},forceTransaction:!!a.forceTransaction},async a=>{try{let b=await e();return"object"==typeof b&&null!==b&&"ok"in b&&!b.ok&&"error"in b&&(0,cf.Cp)(b.error,eZ),a.end(),b}catch(b){throw(0,cf.Cp)(b,eZ),a.end(),b}})))}}function e_(a,b,c){try{if(!(0,ag.KU)())return;let d=(0,$.Bk)();d?.isRecording()&&d.setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(a,{mechanism:{type:"auto.ai.mcp_server",handled:!1,data:{error_type:b||"handler_execution",...c}}})}catch{}}function e0(a,b){(0,b4.GS)(a,b,a=>function(c,...d){var e,f,g;let h=d[d.length-1];if("function"!=typeof h)return a.call(this,c,...d);let i=(e=h,f=b,g=c,function(...a){try{return e1.call(this,e,f,g,a)}catch(b){return N.T&&P.Yz.warn("MCP handler wrapping failed:",b),e.apply(this,a)}});return a.call(this,c,...d.slice(0,-1),i)})}function e1(a,b,c,d){try{let e=a.apply(this,d);if(e&&"object"==typeof e&&"function"==typeof e.then)return Promise.resolve(e).catch(a=>{throw e2(a,b,c),a});return e}catch(a){throw e2(a,b,c),a}}function e2(a,b,c){try{let d={};"tool"===b?(d.tool_name=c,"ProtocolValidationError"===a.name||a.message.includes("validation")||a.message.includes("protocol")?e_(a,"validation",d):"ServerTimeoutError"===a.name||a.message.includes("timed out")||a.message.includes("timeout")?e_(a,"timeout",d):e_(a,"tool_execution",d)):"resource"===b?(d.resource_uri=c,e_(a,"resource_execution",d)):"prompt"===b&&(d.prompt_name=c,e_(a,"prompt_execution",d))}catch(a){}}let e3="mcp.method.name",e4="mcp.resource.uri",e5="mcp.prompt.result.description",e6="mcp.request.argument",e7="mcp.logging.message",e8="client.address",e9="client.port",fa="mcp.server",fb="auto.mcp.notification",fc=new Set([e8,e9,e7,e5,"mcp.prompt.result.message_content",e4,"mcp.tool.result.content"]);function fd(a,b){return b?a:Object.entries(a).reduce((a,[b,c])=>(fc.has(b)||b.startsWith(`${e6}.`)||(b.startsWith("mcp.tool.result.")||b.startsWith("mcp.prompt.result."))&&!b.endsWith("_count")&&!b.endsWith("_error")&&!b.endsWith(".is_error")||(a[b]=c),a),{})}function fe(a){return"object"==typeof a&&null!==a&&"jsonrpc"in a&&"2.0"===a.jsonrpc&&"method"in a&&!("id"in a)}function ff(a){return null!=a&&"object"==typeof a}let fg=new WeakMap;function fh(a){let b=fg.get(a);return b||(b=new Map,fg.set(a,b)),b}let fi=new WeakMap;function fj(a){let b={};return ff(a)&&("string"==typeof a.name&&(b.name=a.name),"string"==typeof a.title&&(b.title=a.title),"string"==typeof a.version&&(b.version=a.version)),b}function fk(a,b){let c=a&&"sessionId"in a?a.sessionId:void 0,d=b?{address:b?.requestInfo?.remoteAddress||b?.clientAddress||b?.request?.ip||b?.request?.connection?.remoteAddress,port:b?.requestInfo?.remotePort||b?.clientPort||b?.request?.connection?.remotePort}:{},{mcpTransport:e,networkTransport:f}=function(a){if(!a?.constructor)return{mcpTransport:"unknown",networkTransport:"unknown"};let b="string"==typeof a.constructor?.name?a.constructor.name:"unknown",c="unknown",d=b.toLowerCase();return d.includes("stdio")?c="pipe":(d.includes("http")||d.includes("sse"))&&(c="tcp"),{mcpTransport:b,networkTransport:c}}(a),g=function(a){let b=fi.get(a)?.clientInfo,c={};return b?.name&&(c["mcp.client.name"]=b.name),b?.title&&(c["mcp.client.title"]=b.title),b?.version&&(c["mcp.client.version"]=b.version),c}(a),h=function(a){let b=fi.get(a)?.serverInfo,c={};return b?.name&&(c["mcp.server.name"]=b.name),b?.title&&(c["mcp.server.title"]=b.title),b?.version&&(c["mcp.server.version"]=b.version),c}(a),i=fi.get(a)?.protocolVersion;return{...c&&{"mcp.session.id":c},...d.address&&{[e8]:d.address},...d.port&&{[e9]:d.port},"mcp.transport":e,"network.transport":f,"network.protocol.version":"2.0",...i&&{"mcp.protocol.version":i},...g,...h}}let fl={"tools/call":{targetField:"name",targetAttribute:"mcp.tool.name",captureArguments:!0,argumentsField:"arguments"},"resources/read":{targetField:"uri",targetAttribute:e4,captureUri:!0},"resources/subscribe":{targetField:"uri",targetAttribute:e4},"resources/unsubscribe":{targetField:"uri",targetAttribute:e4},"prompts/get":{targetField:"name",targetAttribute:"mcp.prompt.name",captureName:!0,captureArguments:!0,argumentsField:"arguments"}};function fm(a,b){let c=fl[a];if(!c)return{attributes:{}};let d=c.targetField&&"string"==typeof b?.[c.targetField]?b[c.targetField]:void 0;return{target:d,attributes:d&&c.targetAttribute?{[c.targetAttribute]:d}:{}}}function fn(a,b,c){if("request"===a){let a=fm(b.method,c||{});return{...void 0!==b.id&&{"mcp.request.id":String(b.id)},...a.attributes,...function(a,b){let c={},d=fl[a];if(!d)return c;if(d.captureArguments&&d.argumentsField&&b?.[d.argumentsField]){let a=b[d.argumentsField];if("object"==typeof a&&null!==a)for(let[b,d]of Object.entries(a))c[`${e6}.${b.toLowerCase()}`]=JSON.stringify(d)}return d.captureUri&&b?.uri&&(c[`${e6}.uri`]=JSON.stringify(b.uri)),d.captureName&&b?.name&&(c[`${e6}.name`]=JSON.stringify(b.name)),c}(b.method,c||{})}}return function(a,b){let c={};switch(a){case"notifications/cancelled":b?.requestId&&(c["mcp.cancelled.request_id"]=String(b.requestId)),b?.reason&&(c["mcp.cancelled.reason"]=String(b.reason));break;case"notifications/message":b?.level&&(c["mcp.logging.level"]=String(b.level)),b?.logger&&(c["mcp.logging.logger"]=String(b.logger)),b?.data!==void 0&&(c["mcp.logging.data_type"]=typeof b.data,"string"==typeof b.data?c[e7]=b.data:c[e7]=JSON.stringify(b.data));break;case"notifications/progress":b?.progressToken&&(c["mcp.progress.token"]=String(b.progressToken)),"number"==typeof b?.progress&&(c["mcp.progress.current"]=b.progress),"number"==typeof b?.total&&(c["mcp.progress.total"]=b.total,"number"==typeof b?.progress&&(c["mcp.progress.percentage"]=b.progress/b.total*100)),b?.message&&(c["mcp.progress.message"]=String(b.message));break;case"notifications/resources/updated":if(b?.uri){c[e4]=String(b.uri);let a=ai(String(b.uri));a&&!ah(a)&&(c["mcp.resource.protocol"]=a.protocol.replace(":",""))}break;case"notifications/initialized":c["mcp.lifecycle.phase"]="initialization_complete",c["mcp.protocol.ready"]=1}return c}(b.method,c||{})}function fo(a,b){return b?`${a} ${b}`:a}function fp(a){let b,c;switch(a){case"request":b=fa,c="auto.function.mcp_server";break;case"notification-incoming":b="mcp.notification.client_to_server",c=fb;break;case"notification-outgoing":b="mcp.notification.server_to_client",c=fb}return{[ae.uT]:b,[ae.JD]:c,[ae.i_]:"route"}}function fq(a){let b,{type:c,message:d,transport:e,extra:f,callback:g}=a,{method:h}=d,i=d.params;if("request"===c){let a=fm(h,i||{});b=fo(h,a.target)}else b=h;let j={...fk(e,f),[e3]:h,...fn(c,d,i),...fp(c)},k=(0,ag.KU)();return cs({name:b,forceTransaction:!0,attributes:fd(j,!!k?.getOptions().sendDefaultPii)},g)}let fr=new WeakSet;function fs(a){if(fr.has(a)||!("object"==typeof a&&null!==a&&"resource"in a&&"tool"in a&&"prompt"in a&&"connect"in a||(N.T&&P.Yz.warn("Did not patch MCP server. Interface is incompatible."),0)))return a;return(0,b4.GS)(a,"connect",a=>async function(b,...c){let d=await a.call(this,b,...c);return b.onmessage&&(0,b4.GS)(b,"onmessage",a=>function(b,c){if("object"==typeof b&&null!==b&&"jsonrpc"in b&&"2.0"===b.jsonrpc&&"method"in b&&"id"in b){if("initialize"===b.method)try{let a=function(a){let b={};return ff(a.params)&&("string"==typeof a.params.protocolVersion&&(b.protocolVersion=a.params.protocolVersion),a.params.clientInfo&&(b.clientInfo=fj(a.params.clientInfo))),b}(b);this.sessionId&&fi.set(this,a)}catch{}let d=(0,ag.rm)().clone();return(0,ag.rB)(d,()=>{var d,e;let f=cu(function(a,b,c){let{method:d}=a,e=a.params,f=fm(d,e||{}),g=fo(d,f.target),h={...fk(b,c),[e3]:d,...fn("request",a,e),...fp("request")},i=(0,ag.KU)();return{name:g,op:fa,forceTransaction:!0,attributes:fd(h,!!i?.getOptions().sendDefaultPii)}}(b,this,c));return d=b.id,e=b.method,fh(this).set(d,{span:f,method:e,startTime:Date.now()}),cw(f,()=>a.call(this,b,c))})}return fe(b)?fq({type:"notification-incoming",message:b,transport:this,extra:c,callback:()=>a.call(this,b,c)}):a.call(this,b,c)}),b.send&&(0,b4.GS)(b,"send",a=>async function(...b){let[c]=b;if(fe(c))return fq({type:"notification-outgoing",message:c,transport:this,callback:()=>a.call(this,...b)});if("object"==typeof c&&null!==c&&"jsonrpc"in c&&"2.0"===c.jsonrpc&&"id"in c&&("result"in c||"error"in c)&&null!==c.id&&void 0!==c.id){if(c.error&&function(a){try{if(a&&"object"==typeof a&&"code"in a&&"message"in a&&(-32603===a.code||a.code>=-32099&&a.code<=-32e3)){let b=Error(a.message);b.name=`JsonRpcError_${a.code}`,e_(b,"protocol")}}catch{}}(c.error),ff(c.result)&&(c.result.protocolVersion||c.result.serverInfo))try{let a=function(a){let b={};return ff(a)&&("string"==typeof a.protocolVersion&&(b.protocolVersion=a.protocolVersion),a.serverInfo&&(b.serverInfo=fj(a.serverInfo))),b}(c.result);if(this.sessionId){let b=fi.get(this)||{};fi.set(this,{...b,...a})}}catch{}!function(a,b,c){let d=fh(a),e=d.get(b);if(e){let{span:a,method:f}=e;if("tools/call"===f){let b=function(a){if(!ff(a))return{};let b=Array.isArray(a.content)?function(a){let b={"mcp.tool.result.content_count":a.length};for(let[c,d]of a.entries()){if(!ff(d))continue;let e=1===a.length?"mcp.tool.result":`mcp.tool.result.${c}`,f=(a,c)=>{"string"==typeof c&&(b[`${e}.${a}`]=c)};f("content_type",d.type),f("mime_type",d.mimeType),f("uri",d.uri),f("name",d.name),"string"==typeof d.text&&(b[`${e}.content`]=d.text),"string"==typeof d.data&&(b[`${e}.data_size`]=d.data.length);let g=d.resource;ff(g)&&(f("resource_uri",g.uri),f("resource_mime_type",g.mimeType))}return b}(a.content):{};return"boolean"==typeof a.isError&&(b["mcp.tool.result.is_error"]=a.isError),b}(c),d=(0,ag.KU)(),e=fd(b,!!d?.getOptions().sendDefaultPii);a.setAttributes(e)}else if("prompts/get"===f){let b=function(a){let b={};if(!ff(a))return b;if("string"==typeof a.description&&(b[e5]=a.description),Array.isArray(a.messages)){b["mcp.prompt.result.message_count"]=a.messages.length;let e=a.messages;for(let[a,f]of e.entries()){var c,d;if(!ff(f))continue;let g=1===e.length?"mcp.prompt.result":`mcp.prompt.result.${a}`;if(c="role","string"==typeof(d=f.role)&&(b[1===e.length?`${g}.message_${c}`:`${g}.${c}`]=d),ff(f.content)){let a=f.content;"string"==typeof a.text&&(b[1===e.length?`${g}.message_content`:`${g}.content`]=a.text)}}}return b}(c),d=(0,ag.KU)(),e=fd(b,!!d?.getOptions().sendDefaultPii);a.setAttributes(e)}a.end(),d.delete(b)}}(this,c.id,c.result)}return a.call(this,...b)}),b.onclose&&(0,b4.GS)(b,"onclose",a=>function(...b){let c=fg.get(this);if(c){for(let[,a]of c)a.span.setStatus({code:_.TJ,message:"cancelled"}),a.span.end();c.clear()}return fi.delete(this),a.call(this,...b)}),b.onerror&&(0,b4.GS)(b,"onerror",a=>function(b){return function(a){try{e_(a,"transport")}catch{}}(b),a.call(this,b)}),d}),e0(a,"tool"),e0(a,"resource"),e0(a,"prompt"),fr.add(a),a}function ft(a){return{...a,path:"path"in a&&Array.isArray(a.path)?a.path.join("."):void 0,keys:"keys"in a?JSON.stringify(a.keys):void 0,unionErrors:"unionErrors"in a?JSON.stringify(a.unionErrors):void 0}}let fu=(a={})=>{let b=a.limit??10;return{name:"ZodErrors",processEvent:(c,d)=>(function(a,b=!1,c,d){var e;if(!c.exception?.values||!d.originalException||(e=d.originalException,!((0,bx.bJ)(e)&&"ZodError"===e.name&&Array.isArray(e.issues)))||0===d.originalException.issues.length)return c;try{let e=(b?d.originalException.issues:d.originalException.issues.slice(0,a)).map(ft);return b&&(Array.isArray(d.attachments)||(d.attachments=[]),d.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:e})})),{...c,exception:{...c.exception,values:[{...c.exception.values[0],value:function(a){let b=new Set;for(let c of a.issues){let a=c.path.map(a=>"number"==typeof a?"<array>":a).join(".");a.length>0&&b.add(a)}let c=Array.from(b);if(0===c.length){let b="variable";if(a.issues.length>0){let c=a.issues[0];void 0!==c&&"expected"in c&&"string"==typeof c.expected&&(b=c.expected)}return`Failed to validate ${b}`}return`Failed to validate keys: ${(0,au.xv)(c.join(", "),100)}`}(d.originalException)},...c.exception.values.slice(1)]},extra:{...c.extra,"zoderror.issues":e.slice(0,a)}}}catch(a){return{...c,extra:{...c.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:a instanceof Error?`${a.name}: ${a.message}
${a.stack}`:"unknown"}}}}})(b,a.saveZodIssuesAsAttachment,c,d)}};var fv=G.instance();!function(a){a[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER"}(g||(g={})),function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(h||(h={})),function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(i||(i={}));let fw={[ap]:"opentelemetry","process.runtime.name":"browser",[ao]:"webjs",[aq]:"2.2.0"},fx=a=>null!==a&&"object"==typeof a&&"function"==typeof a.then;class fy{_rawAttributes;_asyncAttributesPending=!1;_schemaUrl;_memoizedAttributes;static FromAttributeList(a,b){let c=new fy({},b);return c._rawAttributes=fB(a),c._asyncAttributesPending=a.filter(([a,b])=>fx(b)).length>0,c}constructor(a,b){let c=a.attributes??{};this._rawAttributes=Object.entries(c).map(([a,b])=>(fx(b)&&(this._asyncAttributesPending=!0),[a,b])),this._rawAttributes=fB(this._rawAttributes),this._schemaUrl=function(a){if("string"==typeof a||void 0===a)return a;fv.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",a)}(b?.schemaUrl)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let a=0;a<this._rawAttributes.length;a++){let[b,c]=this._rawAttributes[a];this._rawAttributes[a]=[b,fx(c)?await c:c]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&fv.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;let a={};for(let[b,c]of this._rawAttributes){if(fx(c)){fv.debug(`Unsettled resource attribute ${b} skipped`);continue}null!=c&&(a[b]??=c)}return this._asyncAttributesPending||(this._memoizedAttributes=a),a}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(a){if(null==a)return this;let b=function(a,b){let c=a?.schemaUrl,d=b?.schemaUrl,e=void 0===d||""===d;return void 0===c||""===c?d:e||c===d?c:void fv.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',c,d)}(this,a);return fy.FromAttributeList([...a.getRawAttributes(),...this.getRawAttributes()],b?{schemaUrl:b}:void 0)}}function fz(a,b){return fy.FromAttributeList(Object.entries(a),b)}function fA(){return fz({"service.name":"unknown_service",[ao]:fw[ao],[ap]:fw[ap],[aq]:fw[aq]})}function fB(a){return a.map(([a,b])=>fx(b)?[a,b.catch(b=>{fv.debug("promise rejection for resource attribute: %s - %s",a,b)})]:[a,b])}var fC=c(5356).Buffer;void 0===globalThis.performance&&(globalThis.performance={timeOrigin:0,now:()=>Date.now()});class fD extends b7{constructor(a){ad(a,"vercel-edge"),a._metadata=a._metadata||{},super({...a,platform:"javascript",runtime:{name:"vercel-edge"},serverName:a.serverName||process.env.SENTRY_NAME})}async flush(a){let b=this.traceProvider;return await b?.forceFlush(),this.getOptions().sendClientReports&&this._flushOutcomes(),super.flush(a)}}let fE=n("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function fF(a){return a.setValue(fE,!0)}function fG(a){return!0===a.getValue(fE)}let fH="baggage";class fI{inject(a,b,c){let d=a8.getBaggage(a);if(!d||fG(a))return;let e=d.getAllEntries().map(([a,b])=>{let c=`${encodeURIComponent(a)}=${encodeURIComponent(b.value)}`;return void 0!==b.metadata&&(c+=";"+b.metadata.toString()),c}).filter(a=>a.length<=4096).slice(0,180).reduce((a,b)=>{let c=`${a}${""!==a?",":""}${b}`;return c.length>8192?a:c},"");e.length>0&&c.set(b,fH,e)}extract(a,b,c){let d=c.get(b,fH),e=Array.isArray(d)?d.join(","):d;if(!e)return a;let f={};return 0===e.length||(e.split(",").forEach(a=>{let b=function(a){var b;let c,d=a.split(";");if(d.length<=0)return;let e=d.shift();if(!e)return;let f=e.indexOf("=");if(f<=0)return;let g=decodeURIComponent(e.substring(0,f).trim()),h=decodeURIComponent(e.substring(f+1).trim());return d.length>0&&("string"!=typeof(b=d.join(";"))&&(a4.error("Cannot create baggage metadata from unknown type: "+typeof b),b=""),c={__TYPE__:a3,toString:function(){return b}}),{key:g,value:h,metadata:c}}(a);if(b){let a={value:b.value};b.metadata&&(a.metadata=b.metadata),f[b.key]=a}}),0===Object.entries(f).length)?a:a8.setBaggage(a,a8.createBaggage(f))}fields(){return[fH]}}function fJ(a){let b={};if("object"!=typeof a||null==a)return b;for(let[d,e]of Object.entries(a)){var c;if(!("string"==typeof(c=d)&&c.length>0)){fv.warn(`Invalid attribute key: ${d}`);continue}if(!fK(e)){fv.warn(`Invalid attribute value set for key: ${d}`);continue}Array.isArray(e)?b[d]=e.slice():b[d]=e}return b}function fK(a){return null==a||(Array.isArray(a)?function(a){let b;for(let c of a)if(null!=c){if(!b){if(fL(c)){b=typeof c;continue}return!1}if(typeof c!==b)return!1}return!0}(a):fL(a))}function fL(a){switch(typeof a){case"number":case"boolean":case"string":return!0}return!1}function fM(a){try{var b;fv.error((b=a,"string"==typeof b?b:JSON.stringify(function(a){let b={},c=a;for(;null!==c;)Object.getOwnPropertyNames(c).forEach(a=>{if(b[a])return;let d=c[a];d&&(b[a]=String(d))}),c=Object.getPrototypeOf(c);return b}(b))))}catch{}}function fN(a){let b=process.env[a];if(null==b||""===b.trim())return;let c=Number(b);return isNaN(c)?void fv.warn(`Unknown value ${JSON.stringify(b,null,2)} for ${a}, expected a number, using defaults`):c}let fO={timeOrigin:0,now:()=>Date.now()},fP="http.method",fQ="http.url",fR="http.status_code",fS="exception.message",fT="exception.type",fU="http.request.method",fV="http.response.status_code",fW="url.full";function fX(a){return[Math.trunc(a/1e3),Math.round(a%1e3*1e6)]}function fY(){return fO.timeOrigin}function fZ(a){return Array.isArray(a)&&2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]}function f$(a){return fZ(a)||"number"==typeof a||a instanceof Date}function f_(a,b){let c=[a[0]+b[0],a[1]+b[1]];return c[1]>=1e9&&(c[1]-=1e9,c[0]+=1),c}let f0="[_0-9a-z-*/]",f1=`[a-z]${f0}{0,255}`,f2=`[a-z0-9]${f0}{0,240}@[a-z]${f0}{0,13}`,f3=RegExp(`^(?:${f1}|${f2})$`),f4=/^[ -~]{0,255}[!-~]$/,f5=/,|=/;class f6{__init(){this._internalState=new Map}constructor(a){f6.prototype.__init.call(this),a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),d=c.indexOf("=");if(-1!==d){let e=c.slice(0,d),f=c.slice(d+1,b.length);f3.test(e)&&f4.test(f)&&!f5.test(f)&&a.set(e,f)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new f6;return a._internalState=new Map(this._internalState),a}}let f7=Function.prototype.toString,f8=f7.call(Object),f9=Object.getPrototypeOf,ga=Object.prototype,gb=ga.hasOwnProperty,gc=Symbol?Symbol.toStringTag:void 0,gd=ga.toString;function ge(a){var b,c,d;if(null==(b=a)||"object"!=typeof b||"[object Object]"!==(null==(c=a)?void 0===c?"[object Undefined]":"[object Null]":gc&&gc in Object(c)?function(a){let b=gb.call(a,gc),c=a[gc],d=!1;try{a[gc]=void 0,d=!0}catch{}let e=gd.call(a);return d&&(b?a[gc]=c:delete a[gc]),e}(c):(d=c,gd.call(d))))return!1;let e=f9(a);if(null===e)return!0;let f=gb.call(e,"constructor")&&e.constructor;return"function"==typeof f&&f instanceof f&&f7.call(f)===f8}function gf(a){return gh(a)?a.slice():a}function gg(a,b,c){let d=c.get(a[b])||[];for(let c=0,e=d.length;c<e;c++){let e=d[c];if(e.key===b&&e.obj===a)return!0}return!1}function gh(a){return Array.isArray(a)}function gi(a){return"function"==typeof a}function gj(a){return!gk(a)&&!gh(a)&&!gi(a)&&"object"==typeof a}function gk(a){return"string"==typeof a||"number"==typeof a||"boolean"==typeof a||void 0===a||a instanceof Date||a instanceof RegExp||null===a}class gl{__init(){this.attributes={}}__init2(){this.links=[]}__init3(){this.events=[]}__init4(){this._droppedAttributesCount=0}__init5(){this._droppedEventsCount=0}__init6(){this._droppedLinksCount=0}__init7(){this.status={code:i.UNSET}}__init8(){this.endTime=[0,0]}__init9(){this._ended=!1}__init10(){this._duration=[-1,-1]}constructor(a){gl.prototype.__init.call(this),gl.prototype.__init2.call(this),gl.prototype.__init3.call(this),gl.prototype.__init4.call(this),gl.prototype.__init5.call(this),gl.prototype.__init6.call(this),gl.prototype.__init7.call(this),gl.prototype.__init8.call(this),gl.prototype.__init9.call(this),gl.prototype.__init10.call(this);let b=Date.now();this._spanContext=a.spanContext,this._performanceStartTime=fO.now(),this._performanceOffset=b-(this._performanceStartTime+fY()),this._startTimeProvided=null!=a.startTime,this._spanLimits=a.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=a.spanProcessor,this.name=a.name,this.parentSpanContext=a.parentSpanContext,this.kind=a.kind,this.links=a.links||[],this.startTime=this._getTime(a.startTime??b),this.resource=a.resource,this.instrumentationScope=a.scope,null!=a.attributes&&this.setAttributes(a.attributes),this._spanProcessor.onStart(this,a.context)}spanContext(){return this._spanContext}setAttribute(a,b){if(null==b||this._isSpanEnded())return this;if(0===a.length)return fv.warn(`Invalid attribute key: ${a}`),this;if(!fK(b))return fv.warn(`Invalid attribute value set for key: ${a}`),this;let{attributeCountLimit:c}=this._spanLimits;return void 0!==c&&Object.keys(this.attributes).length>=c&&!Object.prototype.hasOwnProperty.call(this.attributes,a)?this._droppedAttributesCount++:this.attributes[a]=this._truncateToSize(b),this}setAttributes(a){for(let[b,c]of Object.entries(a))this.setAttribute(b,c);return this}addEvent(a,b,c){if(this._isSpanEnded())return this;let{eventCountLimit:d}=this._spanLimits;if(0===d)return fv.warn("No events allowed."),this._droppedEventsCount++,this;void 0!==d&&this.events.length>=d&&(0===this._droppedEventsCount&&fv.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),f$(b)&&(f$(c)||(c=b),b=void 0);let e=fJ(b);return this.events.push({name:a,attributes:e,time:this._getTime(c),droppedAttributesCount:0}),this}addLink(a){return this.links.push(a),this}addLinks(a){return this.links.push(...a),this}setStatus(a){return this._isSpanEnded()||(this.status={...a},null!=this.status.message&&"string"!=typeof a.message&&(fv.warn(`Dropping invalid status.message of type '${typeof a.message}', expected 'string'`),delete this.status.message)),this}updateName(a){return this._isSpanEnded()||(this.name=a),this}end(a){var b,c;let d,e;if(this._isSpanEnded())return void fv.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);this._ended=!0,this.endTime=this._getTime(a),this._duration=(b=this.startTime,d=(c=this.endTime)[0]-b[0],(e=c[1]-b[1])<0&&(d-=1,e+=1e9),[d,e]),this._duration[0]<0&&(fv.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&fv.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(a){if("number"==typeof a&&a<=fO.now()){var b=a+this._performanceOffset;return f_(fX(fY()),fX("number"==typeof b?b:fO.now()))}if("number"==typeof a)return fX(a);if(a instanceof Date)return fX(a.getTime());if(fZ(a))return a;if(this._startTimeProvided)return fX(Date.now());let c=fO.now()-this._performanceStartTime;return f_(this.startTime,fX(c))}isRecording(){return!1===this._ended}recordException(a,b){let c={};"string"==typeof a?c[fS]=a:a&&(a.code?c[fT]=a.code.toString():a.name&&(c[fT]=a.name),a.message&&(c[fS]=a.message),a.stack&&(c["exception.stacktrace"]=a.stack)),c[fT]||c[fS]?this.addEvent("exception",c,b):fv.warn(`Failed to record an exception ${a}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){let a=Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);fv.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,a)}return this._ended}_truncateToLimitUtil(a,b){return a.length<=b?a:a.substring(0,b)}_truncateToSize(a){let b=this._attributeValueLengthLimit;return b<=0?(fv.warn(`Attribute value limit must be positive, got ${b}`),a):"string"==typeof a?this._truncateToLimitUtil(a,b):Array.isArray(a)?a.map(a=>"string"==typeof a?this._truncateToLimitUtil(a,b):a):a}}!function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(j||(j={}));class gm{shouldSample(){return{decision:j.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class gn{shouldSample(){return{decision:j.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class go{constructor(a){this._root=a.root,this._root||(fM(Error("ParentBasedSampler must have a root sampler configured")),this._root=new gn),this._remoteParentSampled=a.remoteParentSampled??new gn,this._remoteParentNotSampled=a.remoteParentNotSampled??new gm,this._localParentSampled=a.localParentSampled??new gn,this._localParentNotSampled=a.localParentNotSampled??new gm}shouldSample(a,b,c,d,e,g){let h=aT.getSpanContext(a);return h&&aK(h)?h.isRemote?h.traceFlags&f.SAMPLED?this._remoteParentSampled.shouldSample(a,b,c,d,e,g):this._remoteParentNotSampled.shouldSample(a,b,c,d,e,g):h.traceFlags&f.SAMPLED?this._localParentSampled.shouldSample(a,b,c,d,e,g):this._localParentNotSampled.shouldSample(a,b,c,d,e,g):this._root.shouldSample(a,b,c,d,e,g)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class gp{constructor(a=0){this._ratio=a,this._ratio=this._normalize(a),this._upperBound=Math.floor(0xffffffff*this._ratio)}shouldSample(a,b){return{decision:aJ(b)&&this._accumulate(b)<this._upperBound?j.RECORD_AND_SAMPLED:j.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(a){return"number"!=typeof a||isNaN(a)?0:a>=1?1:a<=0?0:a}_accumulate(a){let b=0;for(let c=0;c<a.length/8;c++){let d=8*c;b=(b^parseInt(a.slice(d,d+8),16))>>>0}return b}}function gq(){return{sampler:gr(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:fN("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:fN("OTEL_ATTRIBUTE_COUNT_LIMIT")??128},spanLimits:{attributeValueLengthLimit:fN("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:fN("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??128,linkCountLimit:fN("OTEL_SPAN_LINK_COUNT_LIMIT")??128,eventCountLimit:fN("OTEL_SPAN_EVENT_COUNT_LIMIT")??128,attributePerEventCountLimit:fN("OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT")??128,attributePerLinkCountLimit:fN("OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT")??128}}}function gr(){let a=function(a){let b=process.env[a];if(null!=b&&""!==b.trim())return b}("OTEL_TRACES_SAMPLER")??k.ParentBasedAlwaysOn;switch(a){case k.AlwaysOn:return new gn;case k.AlwaysOff:return new gm;case k.ParentBasedAlwaysOn:return new go({root:new gn});case k.ParentBasedAlwaysOff:return new go({root:new gm});case k.TraceIdRatio:return new gp(gs());case k.ParentBasedTraceIdRatio:return new go({root:new gp(gs())});default:return fv.error(`OTEL_TRACES_SAMPLER value "${a}" invalid, defaulting to "${k.ParentBasedAlwaysOn}".`),new go({root:new gn})}}function gs(){let a=fN("OTEL_TRACES_SAMPLER_ARG");return null==a?(fv.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1):a<0||a>1?(fv.error(`OTEL_TRACES_SAMPLER_ARG=${a} was given, but it is out of range ([0..1]), defaulting to 1.`),1):a}!function(a){a.AlwaysOff="always_off",a.AlwaysOn="always_on",a.ParentBasedAlwaysOff="parentbased_always_off",a.ParentBasedAlwaysOn="parentbased_always_on",a.ParentBasedTraceIdRatio="parentbased_traceidratio",a.TraceIdRatio="traceidratio"}(k||(k={}));let gt=1/0;class gu{constructor(){gu.prototype.__init.call(this),gu.prototype.__init2.call(this)}__init(){this.generateTraceId=gw(16)}__init2(){this.generateSpanId=gw(8)}}let gv=fC.allocUnsafe(16);function gw(a){return function(){for(let b=0;b<a/4;b++)gv.writeUInt32BE(0x100000000*Math.random()>>>0,4*b);for(let b=0;b<a;b++)if(gv[b]>0)break;else b===a-1&&(gv[a-1]=1);return gv.toString("hex",0,a)}}class gx{constructor(a,b,c,d){let e=function(a){let b={sampler:gr()},c=gq(),d=Object.assign({},c,b,a);return d.generalLimits=Object.assign({},c.generalLimits,a.generalLimits||{}),d.spanLimits=Object.assign({},c.spanLimits,a.spanLimits||{}),d}(b);this._sampler=e.sampler,this._generalLimits=e.generalLimits,this._spanLimits=e.spanLimits,this._idGenerator=b.idGenerator||new gu,this._resource=c,this._spanProcessor=d,this.instrumentationScope=a}startSpan(a,b={},c=M.active()){let d,e,i;b.root&&(c=aT.deleteSpan(c));let j=aT.getSpan(c);if(fG(c))return fv.debug("Instrumentation suppressed, returning Noop Span"),aT.wrapSpanContext(ay);let k=j?.spanContext(),l=this._idGenerator.generateSpanId();k&&aT.isSpanContextValid(k)?(e=k.traceId,i=k.traceState,d=k):e=this._idGenerator.generateTraceId();let m=b.kind??g.INTERNAL,n=(b.links??[]).map(a=>({context:a.context,attributes:fJ(a.attributes)})),o=fJ(b.attributes),p=this._sampler.shouldSample(c,e,a,m,o,n);i=p.traceState??i;let q={traceId:e,spanId:l,traceFlags:p.decision===h.RECORD_AND_SAMPLED?f.SAMPLED:f.NONE,traceState:i};if(p.decision===h.NOT_RECORD)return fv.debug("Recording is off, propagating context in a non-recording span"),aT.wrapSpanContext(q);let r=fJ(Object.assign(o,p.attributes));return new gl({resource:this._resource,scope:this.instrumentationScope,context:c,spanContext:q,name:a,kind:m,links:n,parentSpanContext:d,attributes:r,startTime:b.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(a,b,c,d){let e,f,g;if(arguments.length<2)return;2==arguments.length?g=b:3==arguments.length?(e=b,g=c):(e=b,f=c,g=d);let h=f??M.active(),i=this.startSpan(a,e,h),j=aT.setSpan(h,i);return M.with(j,g,void 0,i)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class gy{constructor(a){this._spanProcessors=a}forceFlush(){let a=[];for(let b of this._spanProcessors)a.push(b.forceFlush());return new Promise(b=>{Promise.all(a).then(()=>{b()}).catch(a=>{fM(a||Error("MultiSpanProcessor: forceFlush failed")),b()})})}onStart(a,b){for(let c of this._spanProcessors)c.onStart(a,b)}onEnd(a){for(let b of this._spanProcessors)b.onEnd(a)}shutdown(){let a=[];for(let b of this._spanProcessors)a.push(b.shutdown());return new Promise((b,c)=>{Promise.all(a).then(()=>{b()},c)})}}!function(a){a[a.resolved=0]="resolved",a[a.timeout=1]="timeout",a[a.error=2]="error",a[a.unresolved=3]="unresolved"}(l||(l={}));class gz{__init(){this._tracers=new Map}constructor(a={}){gz.prototype.__init.call(this);let b=function(...a){let b=a.shift(),c=new WeakMap;for(;a.length>0;)b=function a(b,c,d=0,e){let f;if(!(d>20)){if(d++,gk(b)||gk(c)||gi(c))f=gf(c);else if(gh(b)){if(f=b.slice(),gh(c))for(let a=0,b=c.length;a<b;a++)f.push(gf(c[a]));else if(gj(c)){let a=Object.keys(c);for(let b=0,d=a.length;b<d;b++){let d=a[b];f[d]=gf(c[d])}}}else if(gj(b))if(gj(c)){var g,h;if(g=b,h=c,!(ge(g)&&ge(h)))return c;f=Object.assign({},b);let i=Object.keys(c);for(let g=0,h=i.length;g<h;g++){let h=i[g],j=c[h];if(gk(j))void 0===j?delete f[h]:f[h]=j;else{let g=f[h];if(gg(b,h,e)||gg(c,h,e))delete f[h];else{if(gj(g)&&gj(j)){let a=e.get(g)||[],d=e.get(j)||[];a.push({obj:b,key:h}),d.push({obj:c,key:h}),e.set(g,a),e.set(j,d)}f[h]=a(f[h],j,d,e)}}}}else f=c;return f}}(b,a.shift(),0,c);return b}({},gq(),function(a){let b=Object.assign({},a.spanLimits);return b.attributeCountLimit=a.spanLimits?.attributeCountLimit??a.generalLimits?.attributeCountLimit??fN("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??fN("OTEL_ATTRIBUTE_COUNT_LIMIT")??128,b.attributeValueLengthLimit=a.spanLimits?.attributeValueLengthLimit??a.generalLimits?.attributeValueLengthLimit??fN("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??fN("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??gt,Object.assign({},a,{spanLimits:b})}(a));this._resource=b.resource??fA(),this._config=Object.assign({},b,{resource:this._resource});let c=[];a.spanProcessors?.length&&c.push(...a.spanProcessors),this._activeSpanProcessor=new gy(c)}getTracer(a,b,c){let d=`${a}@${b||""}:${c?.schemaUrl||""}`;return this._tracers.has(d)||this._tracers.set(d,new gx({name:a,version:b,schemaUrl:c?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(d)}forceFlush(){let a=this._config.forceFlushTimeoutMillis,b=this._activeSpanProcessor._spanProcessors.map(b=>new Promise(c=>{let d,e=setTimeout(()=>{c(Error(`Span processor did not completed within timeout period of ${a} ms`)),d=l.timeout},a);b.forceFlush().then(()=>{clearTimeout(e),d!==l.timeout&&c(d=l.resolved)}).catch(a=>{clearTimeout(e),d=l.error,c(a)})}));return new Promise((a,c)=>{Promise.all(b).then(b=>{let d=b.filter(a=>a!==l.resolved);d.length>0?c(d):a()}).catch(a=>c([a]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}let gA="sentry.parentIsRemote";function gB(a){return"parentSpanId"in a?a.parentSpanId:"parentSpanContext"in a?a.parentSpanContext?.spanId:void 0}function gC(a){return!!a.attributes&&"object"==typeof a.attributes}let gD="sentry-trace",gE="baggage",gF="sentry.dsc",gG="sentry.sampled_not_recording",gH="sentry.url",gI=n("sentry_scopes"),gJ=n("sentry_fork_isolation_scope"),gK=n("sentry_fork_set_scope"),gL=n("sentry_fork_set_isolation_scope"),gM="_scopeContext";function gN(a){return a.getValue(gI)}function gO(a,b){return a.setValue(gI,b)}function gP(a){let{traceFlags:b,traceState:c}=a,d=!!c&&"1"===c.get(gG);if(b===f.SAMPLED)return!0;if(d)return!1;let e=c?c.get(gF):void 0,g=e?(0,ar.yD)(e):void 0;return g?.sampled==="true"||g?.sampled!=="false"&&void 0}function gQ(a,b,c){let d=b[fU]||b[fP];if(d)return function({name:a,kind:b,attributes:c},d){let e=["http"];switch(b){case g.CLIENT:e.push("client");break;case g.SERVER:e.push("server")}c["sentry.http.prefetch"]&&e.push("prefetch");let{urlPath:f,url:h,query:i,fragment:j,hasRoute:k}=function(a,b){let c=a["http.target"],d=a[fQ]||a[fW],e=a["http.route"],f="string"==typeof d?ak(d):void 0,h=f?am(f):void 0,i=f?.search||void 0,j=f?.hash||void 0;return"string"==typeof e?{urlPath:e,url:h,query:i,fragment:j,hasRoute:!0}:b===g.SERVER&&"string"==typeof c?{urlPath:al(c),url:h,query:i,fragment:j,hasRoute:!1}:f?{urlPath:h,url:h,query:i,fragment:j,hasRoute:!1}:"string"==typeof c?{urlPath:al(c),url:h,query:i,fragment:j,hasRoute:!1}:{urlPath:void 0,url:h,query:i,fragment:j,hasRoute:!1}}(c,b);if(!f)return{...gS(a,c),op:e.join(".")};let l=c["sentry.graphql.operation"],m=`${d} ${f}`,n=l?`${m} (${function(a){if(Array.isArray(a)){let b=a.slice().sort();return b.length<=5?b.join(", "):`${b.slice(0,5).join(", ")}, +${b.length-5}`}return`${a}`}(l)})`:m,o={};h&&(o.url=h),i&&(o["http.query"]=i),j&&(o["http.fragment"]=j);let p=b===g.CLIENT||b===g.SERVER,q=c[ae.JD]||"manual",r=!`${q}`.startsWith("auto"),s="custom"===c[ae.i_],t=c[ae.Le],{description:u,source:v}=s||null!=t||!p&&r?gS(a,c):{description:n,source:k||"/"===f?"route":"url"};return{op:e.join("."),description:u,source:v,data:o}}({attributes:b,name:a,kind:c},d);let e=b["db.system"],f="string"==typeof b[ae.uT]&&b[ae.uT].startsWith("cache.");if(e&&!f)return function({attributes:a,name:b}){let c=a[ae.Le];if("string"==typeof c)return{op:"db",description:c,source:a[ae.i_]||"custom"};if("custom"===a[ae.i_])return{op:"db",description:b,source:"custom"};let d=a["db.statement"];return{op:"db",description:d?d.toString():b,source:"task"}}({attributes:b,name:a});let h="custom"===b[ae.i_]?"custom":"route";if(b["rpc.service"])return{...gS(a,b,"route"),op:"rpc"};if(b["messaging.system"])return{...gS(a,b,h),op:"message"};let i=b["faas.trigger"];return i?{...gS(a,b,h),op:i.toString()}:{op:void 0,description:a,source:"custom"}}function gR(a){let b=gC(a)?a.attributes:{};return gQ(a.name?a.name:"<unknown>",b,"number"==typeof a.kind?a.kind:g.INTERNAL)}function gS(a,b,c="custom"){let d=b[ae.i_]||c,e=b[ae.Le];return e&&"string"==typeof e?{description:e,source:d}:{description:a,source:d}}function gT(){return aT.getActiveSpan()}function gU({dsc:a,sampled:b}){let c=a?(0,ar.De)(a):void 0,d=new f6,e=c?d.set(gF,c):d;return!1===b?e.set(gG,"1"):e}let gV=new Set;function gW(a){gV.add(a)}class gX extends fI{constructor(){super(),gW("SentryPropagator"),this._urlMatchesTargetsMap=new as(100)}inject(a,b,c){if(fG(a))return;let d=aT.getSpan(a);if(!function(a,b,c){if("string"!=typeof a||!b)return!0;let d=c?.get(a);if(void 0!==d)return d;let e=(0,au.Xr)(a,b);return c?.set(a,e),e}(d&&function(a){let b=(0,$.et)(a).data,c=b[fQ]||b[fW];if("string"==typeof c)return c;let d=a.spanContext().traceState?.get(gH);if(d)return d}(d),(0,ag.KU)()?.getOptions()?.tracePropagationTargets,this._urlMatchesTargetsMap))return;let e=function(a){try{let b=a[gE];return Array.isArray(b)?b.join(","):b}catch{return}}(b),f=a8.getBaggage(a)||a8.createBaggage({}),{dynamicSamplingContext:g,traceId:h,spanId:i,sampled:j}=gY(a);if(e){let a=(0,ar.D0)(e);a&&Object.entries(a).forEach(([a,b])=>{f=f.setEntry(a,{value:b})})}g&&(f=Object.entries(g).reduce((a,[b,c])=>c?a.setEntry(`${ar.sv}${b}`,{value:c}):a,f)),h&&h!==ax&&c.set(b,gD,(0,at.TC)(h,i,j)),super.inject(a8.setBaggage(a,f),b,c)}extract(a,b,c){let d=c.get(b,gD),e=c.get(b,gE);return g$(gZ(a,{sentryTrace:d?Array.isArray(d)?d[0]:d:void 0,baggage:e}))}fields(){return[gD,gE]}}function gY(a,b={}){let c=aT.getSpan(a);if(c?.spanContext().isRemote){let a=c.spanContext();return{dynamicSamplingContext:(0,av.k1)(c),traceId:a.traceId,spanId:void 0,sampled:gP(a)}}if(c){let a=c.spanContext();return{dynamicSamplingContext:(0,av.k1)(c),traceId:a.traceId,spanId:a.spanId,sampled:gP(a)}}let d=b.scope||gN(a)?.scope||(0,ag.o5)(),e=b.client||(0,ag.KU)(),f=d.getPropagationContext();return{dynamicSamplingContext:e?(0,av.ao)(e,d):void 0,traceId:f.traceId,spanId:f.propagationSpanId,sampled:f.sampled}}function gZ(a,{sentryTrace:b,baggage:c}){let{traceId:d,parentSpanId:e,sampled:g,dsc:h}=(0,at.kM)(b,c),i=(0,ag.KU)(),j=(0,ar.yD)(c);if(!e||i&&!(0,at.A9)(i,j?.org_id))return a;let k=function({spanId:a,traceId:b,sampled:c,dsc:d}){let e=gU({dsc:d,sampled:c});return{traceId:b,spanId:a,isRemote:!0,traceFlags:c?f.SAMPLED:f.NONE,traceState:e}}({traceId:d,spanId:e,sampled:g,dsc:h});return aT.setSpanContext(a,k)}function g$(a){let b=gN(a);return gO(a,{scope:b?b.scope:(0,ag.o5)().clone(),isolationScope:b?b.isolationScope:(0,ag.rm)()})}function g_(a,b){let c=g3(),{name:d,parentSpan:e}=a;return g7(e)(()=>{let e=g5(a.scope,a.forceTransaction),f=a.onlyIfParent&&!aT.getSpan(e)?fF(e):e,g=g4(a);return c.startActiveSpan(d,g,f,a=>ca(()=>b(a),()=>{void 0===(0,$.et)(a).status&&a.setStatus({code:i.ERROR})},()=>a.end()))})}function g0(a,b){let c=g3(),{name:d,parentSpan:e}=a;return g7(e)(()=>{let e=g5(a.scope,a.forceTransaction),f=a.onlyIfParent&&!aT.getSpan(e)?fF(e):e,g=g4(a);return c.startActiveSpan(d,g,f,a=>ca(()=>b(a,()=>a.end()),()=>{void 0===(0,$.et)(a).status&&a.setStatus({code:i.ERROR})}))})}function g1(a){let b=g3(),{name:c,parentSpan:d}=a;return g7(d)(()=>{let d=g5(a.scope,a.forceTransaction),e=a.onlyIfParent&&!aT.getSpan(d)?fF(d):d,f=g4(a);return b.startSpan(c,f,e)})}function g2(a,b){let c=a?aT.setSpan(M.active(),a):aT.deleteSpan(M.active());return M.with(c,()=>b((0,ag.o5)()))}function g3(){let a=(0,ag.KU)();return a?.tracer||aT.getTracer("@sentry/opentelemetry",ac.M)}function g4(a){var b;let{startTime:c,attributes:d,kind:e,op:f,links:g}=a,h="number"==typeof c?(b=c)<0x2540be3ff?1e3*b:b:c;return{attributes:f?{[ae.uT]:f,...d}:d,kind:e,links:g,startTime:h}}function g5(a,b){let c=function(a){if(a){let b=a[gM];if(b)return b}return M.active()}(a),d=aT.getSpan(c);if(!d||!b)return c;let e=aT.deleteSpan(c),{spanId:g,traceId:h}=d.spanContext(),i=gP(d.spanContext()),j=(0,$.zU)(d),k=gU({dsc:(0,av.k1)(j),sampled:i}),l={traceId:h,spanId:g,isRemote:!0,traceFlags:i?f.SAMPLED:f.NONE,traceState:k};return aT.setSpanContext(e,l)}function g6(a,b){let c=g$(gZ(M.active(),a));return M.with(c,b)}function g7(a){return void 0!==a?b=>g2(a,b):a=>a()}function g8(a){let b=fF(M.active());return M.with(b,a)}function g9({span:a,scope:b,client:c}={}){let d=(b&&b[gM])??M.active();if(a){let{scope:b}=(0,af.L)(a);d=b&&b[gM]||aT.setSpan(M.active(),a)}let{traceId:e,spanId:f,sampled:g,dynamicSamplingContext:h}=gY(d,{scope:b,client:c});return{"sentry-trace":(0,at.TC)(e,f,g),baggage:(0,ar.De)(h)}}function ha(a){return!0===a.attributes[gA]?void 0:gB(a)}function hb(a,b){let c=a.get(b.id);return c?.span?c:c&&!c.span?(c.span=b.span,c.parentNode=b.parentNode,c):(a.set(b.id,b),b)}let hc={1:"cancelled",2:"unknown_error",3:"invalid_argument",4:"deadline_exceeded",5:"not_found",6:"already_exists",7:"permission_denied",8:"resource_exhausted",9:"failed_precondition",10:"aborted",11:"out_of_range",12:"unimplemented",13:"internal_error",14:"unavailable",15:"data_loss",16:"unauthenticated"};function hd(a){let b=gC(a)?a.attributes:{},c=a.status?a.status:void 0;if(c){if(c.code===i.OK)return{code:_.F3};else if(c.code===i.ERROR){let a;if(void 0===c.message){let a=he(b);if(a)return a}return c.message&&(a=c.message,Object.values(hc).includes(a))?{code:_.TJ,message:c.message}:{code:_.TJ,message:"unknown_error"}}}let d=he(b);return d||(c?.code===i.UNSET?{code:_.F3}:{code:_.TJ,message:"unknown_error"})}function he(a){let b=a[fV]||a[fR],c=a["rpc.grpc.status_code"],d="number"==typeof b?b:"string"==typeof b?parseInt(b):void 0;return"number"==typeof d?(0,_.AJ)(d):"string"==typeof c?{code:_.TJ,message:hc[c]||"unknown_error"}:void 0}class hf{constructor(a){this._finishedSpanBucketSize=a?.timeout||300,this._finishedSpanBuckets=Array(this._finishedSpanBucketSize).fill(void 0),this._lastCleanupTimestampInS=Math.floor(Date.now()/1e3),this._spansToBucketEntry=new WeakMap,this._sentSpans=new Map,this._debouncedFlush=function(a,b,c){let d,e,f,g=c?.maxWait?Math.max(c.maxWait,1):0,h=c?.setTimeoutImpl||setTimeout;function i(){return j(),d=a()}function j(){void 0!==e&&clearTimeout(e),void 0!==f&&clearTimeout(f),e=f=void 0}function k(){return e&&clearTimeout(e),e=h(i,1),g&&void 0===f&&(f=h(i,g)),d}return k.cancel=j,k.flush=function(){return void 0!==e||void 0!==f?i():d},k}(this.flush.bind(this),1,{maxWait:100})}export(a){let b=Math.floor(Date.now()/1e3);if(this._lastCleanupTimestampInS!==b){let a=0;this._finishedSpanBuckets.forEach((c,d)=>{c&&c.timestampInS<=b-this._finishedSpanBucketSize&&(a+=c.spans.size,this._finishedSpanBuckets[d]=void 0)}),this._lastCleanupTimestampInS=b}let c=b%this._finishedSpanBucketSize,d=this._finishedSpanBuckets[c]||{timestampInS:b,spans:new Set};this._finishedSpanBuckets[c]=d,d.spans.add(a),this._spansToBucketEntry.set(a,d);let e=ha(a);(!e||this._sentSpans.has(e))&&this._debouncedFlush()}flush(){let a=this._finishedSpanBuckets.flatMap(a=>a?Array.from(a.spans):[]);this._flushSentSpanCache();let b=this._maybeSend(a),c=b.size;a.length;let d=Date.now()+3e5;for(let a of b){this._sentSpans.set(a.spanContext().spanId,d);let b=this._spansToBucketEntry.get(a);b&&b.spans.delete(a)}this._debouncedFlush.cancel()}clear(){this._finishedSpanBuckets=this._finishedSpanBuckets.fill(void 0),this._sentSpans.clear(),this._debouncedFlush.cancel()}_maybeSend(a){let b=function(a){let b=new Map;for(let c of a)!function(a,b){let c=b.spanContext().spanId,d=ha(b);if(!d)return hb(a,{id:c,span:b,children:[]});let e=function(a,b){let c=a.get(b);return c||hb(a,{id:b,children:[]})}(a,d),f=hb(a,{id:c,span:b,parentNode:e,children:[]});e.children.push(f)}(b,c);return Array.from(b,function([a,b]){return b})}(a),c=new Set;for(let a of this._getCompletedRootNodes(b)){let b=a.span;c.add(b);let d=function(a){let{op:b,description:c,data:d,origin:e="manual",source:f}=hg(a),g=(0,af.L)(a),h=a.attributes[ae.sy],i={[ae.i_]:f,[ae.sy]:h,[ae.uT]:b,[ae.JD]:e,...d,...hh(a.attributes)},{links:j}=a,{traceId:k,spanId:l}=a.spanContext(),m=gB(a),n=hd(a),o={parent_span_id:m,span_id:l,trace_id:k,data:i,origin:e,op:b,status:(0,$.yW)(n),links:(0,$.uU)(j)},p=i[fV];return{contexts:{trace:o,otel:{resource:a.resource.attributes},..."number"==typeof p?{response:{status_code:p}}:void 0},spans:[],start_timestamp:(0,$.cI)(a.startTime),timestamp:(0,$.cI)(a.endTime),transaction:c,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:g.scope,capturedSpanIsolationScope:g.isolationScope,sampleRate:h,dynamicSamplingContext:(0,av.k1)(a)},...f&&{transaction_info:{source:f}}}}(b);if(a.parentNode&&this._sentSpans.has(a.parentNode.id)){let a=d.contexts?.trace?.data;a&&(a["sentry.parent_span_already_sent"]=!0)}let e=d.spans||[];for(let b of a.children)!function a(b,c,d){let e=b.span;if(e&&d.add(e),!e)return void b.children.forEach(b=>{a(b,c,d)});let f=e.spanContext().spanId,g=e.spanContext().traceId,h=gB(e),{attributes:i,startTime:j,endTime:k,links:l}=e,{op:m,description:n,data:o,origin:p="manual"}=hg(e),q={[ae.JD]:p,[ae.uT]:m,...hh(i),...o},r=hd(e),s={span_id:f,trace_id:g,data:q,description:n,parent_span_id:h,start_timestamp:(0,$.cI)(j),timestamp:(0,$.cI)(k)||void 0,status:(0,$.yW)(r),op:m,origin:p,measurements:ce(e.events),links:(0,$.uU)(l)};c.push(s),b.children.forEach(b=>{a(b,c,d)})}(b,e,c);d.spans=e.length>1e3?e.sort((a,b)=>a.start_timestamp-b.start_timestamp).slice(0,1e3):e;let f=ce(b.events);f&&(d.measurements=f),(0,cf.r)(d)}return c}_flushSentSpanCache(){let a=Date.now();for(let[b,c]of this._sentSpans.entries())c<=a&&this._sentSpans.delete(b)}_nodeIsCompletedRootNodeOrHasSentParent(a){return!!a.span&&(!a.parentNode||this._sentSpans.has(a.parentNode.id))}_getCompletedRootNodes(a){return a.filter(a=>this._nodeIsCompletedRootNodeOrHasSentParent(a))}}function hg(a){let{op:b,source:c,origin:d}=function(a){let b=a.attributes,c=b[ae.JD];return{origin:c,op:b[ae.uT],source:b[ae.i_]}}(a),{op:e,description:f,source:h,data:i}=gR(a);return{op:b||e,description:f,source:c||h,origin:d,data:{...i,...function(a){let b=a.attributes,c={};a.kind!==g.INTERNAL&&(c["otel.kind"]=g[a.kind]);let d=b[fR];d&&(c[fV]=d);let e=function(a){if(!gC(a))return{};let b=a.attributes[fW]||a.attributes[fQ],c={url:b,"http.method":a.attributes[fU]||a.attributes[fP]};!c["http.method"]&&c.url&&(c["http.method"]="GET");try{if("string"==typeof b){let a=ak(b);c.url=am(a),a.search&&(c["http.query"]=a.search),a.hash&&(c["http.fragment"]=a.hash)}}catch{}return c}(a);return e.url&&(c.url=e.url),e["http.query"]&&(c["http.query"]=e["http.query"].slice(1)),e["http.fragment"]&&(c["http.fragment"]=e["http.fragment"].slice(1)),c}(a)}}}function hh(a){let b={...a};return delete b[ae.sy],delete b[gA],delete b[ae.Le],b}class hi{constructor(a){gW("SentrySpanProcessor"),this._exporter=new hf(a)}async forceFlush(){this._exporter.flush()}async shutdown(){this._exporter.clear()}onStart(a,b){let c=aT.getSpan(b),d=gN(b);c&&!c.spanContext().isRemote&&(0,$.Hu)(c,a),c?.spanContext().isRemote&&a.setAttribute(gA,!0),b===o&&(d={scope:(0,cb.r)(),isolationScope:(0,cb.q)()}),d&&(0,af.d)(a,d.scope,d.isolationScope),cg(a);let e=(0,ag.KU)();e?.emit("spanStart",a)}onEnd(a){ch(a);let b=(0,ag.KU)();b?.emit("spanEnd",a),this._exporter.export(a)}}class hj{constructor(a){this._client=a,gW("SentrySampler")}shouldSample(a,b,c,d,e,f){let h=this._client.getOptions(),i=function(a){let b=aT.getSpan(a);return b&&aK(b.spanContext())?b:void 0}(a),k=i?.spanContext();if(!(0,b9.f)(h))return hk({decision:void 0,context:a,spanAttributes:e});let l=e[fP]||e[fU];if(d===g.CLIENT&&l&&(!i||k?.isRemote))return hk({decision:void 0,context:a,spanAttributes:e});let m=i?function(a,b,c){let d=a.spanContext();if(aK(d)&&d.traceId===b)return d.isRemote?gP(a.spanContext()):gP(d)}(i,b,0):void 0;if(!(!i||k?.isRemote))return hk({decision:m?j.RECORD_AND_SAMPLED:j.NOT_RECORD,context:a,spanAttributes:e});let{description:n,data:o,op:p}=gQ(c,e,d),q={...o,...e};p&&(q[ae.uT]=p);let r={decision:!0};if(this._client.emit("beforeSampling",{spanAttributes:q,spanName:n,parentSampled:m,parentContext:k},r),!r.decision)return hk({decision:void 0,context:a,spanAttributes:e});let{isolationScope:s}=gN(a)??{},t=k?.traceState?k.traceState.get(gF):void 0,u=t?(0,ar.yD)(t):void 0,v=(0,bN.i)(u?.sample_rand)??Math.random(),[w,x,y]=ci(h,{name:n,attributes:q,normalizedRequest:s?.getScopeData().sdkProcessingMetadata.normalizedRequest,parentSampled:m,parentSampleRate:(0,bN.i)(u?.sample_rate)},v),z=`${l}`.toUpperCase();return"OPTIONS"===z||"HEAD"===z?hk({decision:j.NOT_RECORD,context:a,spanAttributes:e,sampleRand:v,downstreamTraceSampleRate:0}):(w||void 0!==m||this._client.recordDroppedEvent("sample_rate","transaction"),{...hk({decision:w?j.RECORD_AND_SAMPLED:j.NOT_RECORD,context:a,spanAttributes:e,sampleRand:v,downstreamTraceSampleRate:y?x:void 0}),attributes:{[ae.sy]:y?x:void 0}})}toString(){return"SentrySampler"}}function hk({decision:a,context:b,spanAttributes:c,sampleRand:d,downstreamTraceSampleRate:e}){let f=function(a,b){let c=aT.getSpan(a),d=c?.spanContext(),e=d?.traceState||new f6,f=b[fQ]||b[fW];return f&&"string"==typeof f&&(e=e.set(gH,f)),e}(b,c);return(void 0!==e&&(f=f.set("sentry.sample_rate",`${e}`)),void 0!==d&&(f=f.set("sentry.sample_rand",`${d}`)),void 0==a)?{decision:j.NOT_RECORD,traceState:f}:a===j.NOT_RECORD?{decision:a,traceState:f.set(gG,"1")}:{decision:a,traceState:f}}let hl=new WeakMap,hm=(a={})=>{let b=void 0===a.breadcrumbs||a.breadcrumbs,c=a.shouldCreateSpanForRequest,d=new as(100),e=new as(100),f={};function g(a){let b=(0,ag.KU)();if(!b)return!1;let c=b.getOptions();if(void 0===c.tracePropagationTargets)return!0;let d=e.get(a);if(void 0!==d)return d;let f=(0,au.Xr)(a,c.tracePropagationTargets);return e.set(a,f),f}function h(a){if(void 0===c)return!0;let b=d.get(a);if(void 0!==b)return b;let e=c(a);return d.set(a,e),e}return{name:"WinterCGFetch",setupOnce(){!function(a,b){let c="fetch";T(c,a),U(c,()=>(function(a,b=!1){(0,b4.GS)(O.O,"fetch",function(b){return function(...c){let d=Error(),{method:e,url:f}=function(a){if(0===a.length)return{method:"GET",url:""};if(2===a.length){let[b,c]=a;return{url:ck(b),method:cj(c,"method")?String(c.method).toUpperCase():"GET"}}let b=a[0];return{url:ck(b),method:cj(b,"method")?String(b.method).toUpperCase():"GET"}}(c),g={args:c,fetchData:{method:e,url:f},startTimestamp:1e3*(0,bz.zf)(),virtualError:d,headers:function(a){let[b,c]=a;try{if("object"==typeof c&&null!==c&&"headers"in c&&c.headers)return new Headers(c.headers);if((0,bx.ks)(b))return new Headers(b.headers)}catch{}}(c)};return a||V("fetch",{...g}),b.apply(O.O,c).then(async b=>(a?a(b):V("fetch",{...g,endTimestamp:1e3*(0,bz.zf)(),response:b}),b),a=>{if(V("fetch",{...g,endTimestamp:1e3*(0,bz.zf)(),error:a}),(0,bx.bJ)(a)&&void 0===a.stack&&(a.stack=d.stack,(0,b4.my)(a,"framesToPop",1)),a instanceof TypeError&&("Failed to fetch"===a.message||"Load failed"===a.message||"NetworkError when attempting to fetch resource."===a.message))try{let b=new URL(g.fetchData.url);a.message=`${a.message} (${b.host})`}catch{}throw a})}})})(void 0,void 0))}(a=>{let c=(0,ag.KU)();c&&hl.get(c)&&!function(a,b){var c,d;let e=b?.getDsn(),f=b?.getOptions().tunnel;return function(a,b){let c=ai(a);return!(!c||ah(c))&&!!b&&c.host.includes(b.host)&&/(^|&|\?)sentry_key=/.test(c.search)}(a,e)||(c=a,!!(d=f)&&cl(c)===cl(d))}(a.fetchData.url,c)&&(!function(a,b,c,d,e){if(!a.fetchData)return;let{method:f,url:g}=a.fetchData,h=(0,b9.f)()&&b(g);if(a.endTimestamp&&h){let b=a.fetchData.__span;if(!b)return;let c=d[b];c&&(function(a,b){if(b.response){(0,_.N8)(a,b.response.status);let c=b.response?.headers?.get("content-length");if(c){let b=parseInt(c);b>0&&a.setAttribute("http.response_content_length",b)}}else b.error&&a.setStatus({code:_.TJ,message:"internal_error"});a.end()}(c,a),function(a,b,c){let d="object"==typeof c&&null!==c?c.onRequestSpanEnd:void 0;d?.(a,{headers:b.response?.headers,error:b.error})}(c,a,e),delete d[b]);return}let{spanOrigin:i="auto.http.browser",propagateTraceparent:j=!1}="object"==typeof e?e:{spanOrigin:e},k=!!(0,$.Bk)(),l=h&&k?cu(function(a,b,c){let d=ai(a);return{name:d?`${b} ${aj(d)}`:b,attributes:function(a,b,c,d){let e={url:a,type:"fetch","http.method":c,[ae.JD]:d,[ae.uT]:"http.client"};return b&&(ah(b)||(e["http.url"]=b.href,e["server.address"]=b.host),b.search&&(e["http.query"]=b.search),b.hash&&(e["http.fragment"]=b.hash)),e}(a,d,b,c)}}(g,f,i)):new cn;if(a.fetchData.__span=l.spanContext().spanId,d[l.spanContext().spanId]=l,c(a.fetchData.url)){let b=a.args[0],c=a.args[1]||{},d=function(a,b,c,d){var e;let f=cF({span:c,propagateTraceparent:d}),g=f["sentry-trace"],h=f.baggage,i=f.traceparent;if(!g)return;let j=b.headers||((0,bx.ks)(a)?a.headers:void 0);if(!j)return{...f};if(e=j,"undefined"!=typeof Headers&&(0,bx.tH)(e,Headers)){let a=new Headers(j);if(a.get("sentry-trace")||a.set("sentry-trace",g),d&&i&&!a.get("traceparent")&&a.set("traceparent",i),h){let b=a.get("baggage");b?cG(b)||a.set("baggage",`${b},${h}`):a.set("baggage",h)}return a}if(Array.isArray(j)){let a=[...j];j.find(a=>"sentry-trace"===a[0])||a.push(["sentry-trace",g]),d&&i&&!j.find(a=>"traceparent"===a[0])&&a.push(["traceparent",i]);let b=j.find(a=>"baggage"===a[0]&&cG(a[1]));return h&&!b&&a.push(["baggage",h]),a}{let a="sentry-trace"in j?j["sentry-trace"]:void 0,b="traceparent"in j?j.traceparent:void 0,c="baggage"in j?j.baggage:void 0,e=c?Array.isArray(c)?[...c]:[c]:[],f=c&&(Array.isArray(c)?c.find(a=>cG(a)):cG(c));h&&!f&&e.push(h);let k={...j,"sentry-trace":a??g,baggage:e.length>0?e.join(","):void 0};return d&&i&&!b&&(k.traceparent=i),k}}(b,c,(0,b9.f)()&&k?l:void 0,j);d&&(a.args[1]=c,c.headers=d)}let m=(0,ag.KU)();if(m){let b={input:a.args,response:a.response,startTimestamp:a.startTimestamp,endTimestamp:a.endTimestamp};m.emit("beforeOutgoingRequestSpan",l,b)}}(a,h,g,f,{spanOrigin:"auto.http.wintercg_fetch"}),b&&function(a){let{startTimestamp:b,endTimestamp:c}=a;if(!c)return;let d={method:a.fetchData.method,url:a.fetchData.url};if(a.error)cH({category:"fetch",data:d,level:"error",type:"http"},{data:a.error,input:a.args,startTimestamp:b,endTimestamp:c});else{let e=a.response;d.request_body_size=a.fetchData.request_body_size,d.response_body_size=a.fetchData.response_body_size,d.status_code=e?.status;let f={input:a.args,response:e,startTimestamp:b,endTimestamp:c},g=function(a){if(void 0!==a)return a>=400&&a<500?"warning":a>=500?"error":void 0}(d.status_code);cH({category:"fetch",data:d,type:"http",level:g},f)}}(a))})},setup(a){hl.set(a,!0)}}};class hn{constructor(a=30){this.$=[],this._taskProducers=[],this._bufferSize=a}add(a){return this._taskProducers.length>=this._bufferSize?Promise.reject(cI):(this._taskProducers.push(a),Promise.resolve({}))}drain(a){let b=[...this._taskProducers];return this._taskProducers=[],new Promise(c=>{let d=setTimeout(()=>{a&&a>0&&c(!1)},a);Promise.all(b.map(a=>a().then(null,()=>{}))).then(()=>{clearTimeout(d),c(!0)})})}}function ho(a){return cJ(a,function(b){let c={body:b.body,method:"POST",headers:a.headers,...a.fetchOptions};return cx(()=>fetch(a.url,c).then(a=>({statusCode:a.status,headers:{"x-sentry-rate-limits":a.headers.get("X-Sentry-Rate-Limits"),"retry-after":a.headers.get("Retry-After")}})))},new hn(a.bufferSize))}let hp=["addListener","on","once","prependListener","prependOnceListener"];class hq{constructor(){hq.prototype.__init.call(this),hq.prototype.__init2.call(this)}bind(a,b){return"object"==typeof b&&null!==b&&"on"in b?this._bindEventEmitter(a,b):"function"==typeof b?this._bindFunction(a,b):b}_bindFunction(a,b){let c=this,d=function(...d){return c.with(a,()=>b.apply(this,d))};return Object.defineProperty(d,"length",{enumerable:!1,configurable:!0,writable:!1,value:b.length}),d}_bindEventEmitter(a,b){return void 0!==this._getPatchMap(b)||(this._createPatchMap(b),hp.forEach(c=>{void 0!==b[c]&&(b[c]=this._patchAddListener(b,b[c],a))}),"function"==typeof b.removeListener&&(b.removeListener=this._patchRemoveListener(b,b.removeListener)),"function"==typeof b.off&&(b.off=this._patchRemoveListener(b,b.off)),"function"==typeof b.removeAllListeners&&(b.removeAllListeners=this._patchRemoveAllListeners(b,b.removeAllListeners))),b}_patchRemoveListener(a,b){let c=this;return function(d,e){let f=c._getPatchMap(a)?.[d];if(void 0===f)return b.call(this,d,e);let g=f.get(e);return b.call(this,d,g||e)}}_patchRemoveAllListeners(a,b){let c=this;return function(d){let e=c._getPatchMap(a);return void 0!==e&&(0==arguments.length?c._createPatchMap(a):void 0!==e[d]&&delete e[d]),b.apply(this,arguments)}}_patchAddListener(a,b,c){let d=this;return function(e,f){if(d._wrapped)return b.call(this,e,f);let g=d._getPatchMap(a);void 0===g&&(g=d._createPatchMap(a));let h=g[e];void 0===h&&(h=new WeakMap,g[e]=h);let i=d.bind(c,f);h.set(f,i),d._wrapped=!0;try{return b.call(this,e,i)}finally{d._wrapped=!1}}}_createPatchMap(a){let b=Object.create(null);return a[this._kOtListeners]=b,b}_getPatchMap(a){return a[this._kOtListeners]}__init(){this._kOtListeners=Symbol("OtListeners")}__init2(){this._wrapped=!1}}class hr extends hq{constructor(){super();let a=O.O.AsyncLocalStorage;a?this._asyncLocalStorage=new a:this._asyncLocalStorage={getStore(){},run(a,b,...c){return b.apply(this,c)},disable(){}}}active(){return this._asyncLocalStorage.getStore()??o}with(a,b,c,...d){let e=null==c?b:b.bind(c);return this._asyncLocalStorage.run(a,e,...d)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}}let hs=(0,Q.gd)([90,function(a){let b=/^\s*[-]{4,}$/,c=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/,d=/at (?:async )?(.+?) \(data:(.*?),/;return e=>{let f=e.match(d);if(f)return{filename:`<data:${f[2]}>`,function:f[1]};let g=e.match(c);if(g){let b,c,d,e,f;if(g[1]){let a=(d=g[1]).lastIndexOf(".");if("."===d[a-1]&&a--,a>0){b=d.slice(0,a),c=d.slice(a+1);let e=b.indexOf(".Module");e>0&&(d=d.slice(e+1),b=b.slice(0,e))}e=void 0}c&&(e=b,f=c),"<anonymous>"===c&&(f=void 0,d=void 0),void 0===d&&(f=f||Q.yF,d=e?`${e}.${f}`:f);let h=g[2]?.startsWith("file://")?g[2].slice(7):g[2],i="native"===g[5];return h?.match(/\/[A-Z]:/)&&(h=h.slice(1)),h||!g[5]||i||(h=g[5]),{filename:h?decodeURI(h):void 0,module:a?a(h):void 0,function:d,lineno:cK(g[3]),colno:cK(g[4]),in_app:function(a,b=!1){return!(b||a&&!a.startsWith("/")&&!a.match(/^[A-Z]:/)&&!a.startsWith(".")&&!a.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&void 0!==a&&!a.includes("node_modules/")}(h||"",i)}}if(e.match(b))return{filename:e}}}(void 0)]);function ht(a){return[cL(),cR(),cV(),cY(),hm(),c0(),...a.sendDefaultPii?[c4()]:[]]}let hu=()=>({name:"VercelAI",setup(a){a.on("spanStart",dO),a.addEventProcessor(Object.assign(dP,{id:"VercelAiEventProcessor"}))}});var hv=c(7174);function hw(a,b){if(!a)return{};let c=(0,ag.KU)(),d=c?.getOptions().sendDefaultPii??!1,e=a instanceof Headers||"object"==typeof a&&"get"in a?(0,hv.NI)(a):a,f=(0,hv.xY)(e,d);return b&&b.setAttributes(f),f}c(4480);let hx={client:"client",server:"server",edgeServer:"edge-server"};function hy(){return"phase-production-build"===process.env.NEXT_PHASE}hx.client,hx.server,hx.edgeServer,Symbol("polyfills");var hz=c(2172);let hA="sentry.sentry_trace_backfill";function hB(a){return async function(...b){try{return await a.apply(this,b)}catch(b){throw(0,cf.Cp)(b,{mechanism:{handled:!1,type:"auto.function.nextjs.wrapped",data:{function:a.name}}}),b}}}function hC(a,b,c,d){return async function(...c){let e=(0,hv.Iv)(b);(0,ag.o5)().setTransactionName(`${d.dataFetchingMethodName} (${d.dataFetcherRouteName})`),(0,ag.rm)().setSDKProcessingMetadata({normalizedRequest:e});let f=(0,$.Bk)();f&&"/_error"!==d.requestedRouteName&&(0,$.zU)(f).setAttribute("sentry.route_backfill",d.requestedRouteName);let{"sentry-trace":g,baggage:h}=cF();return{sentryTrace:g,baggage:h,data:await a.apply(this,c)}}}async function hD(a,b){try{return await a(...b)}catch(a){throw(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.data_fetcher"}}),a}}function hE(a){let b=a&&"object"==typeof a&&"params"in a?a.params:void 0;(0,bx.Qg)(b)&&(b=void 0);let c=a&&"object"==typeof a&&"searchParams"in a?a.searchParams:void 0;return(0,bx.Qg)(c)&&(c=void 0),{params:b,searchParams:c}}function hF(a,b){return new Proxy(a,{apply:async(a,b,c)=>hy()?a.apply(b,c):hD(hB(a),c)})}function hG(a){return new Proxy(a,{apply:async(a,b,c)=>{if(hy())return a.apply(b,c);let[d]=c,{req:e,res:f}=d,g=hB(a);if(!e||!f)return g.apply(b,c);{let a=hC(g,e,f,{dataFetcherRouteName:d.pathname,requestedRouteName:d.pathname,dataFetchingMethodName:"getInitialProps"}),{data:h,baggage:i,sentryTrace:j}=await a.apply(b,c)??{};return"object"==typeof h&&null!==h&&(j&&(h._sentryTraceData=j),i&&(h._sentryBaggage=i)),h}}})}function hH(a){return new Proxy(a,{apply:async(a,b,c)=>{if(hy())return a.apply(b,c);let[d]=c,{req:e,res:f}=d.ctx,g=hB(a);if(!e||!f)return g.apply(b,c);{let a=hC(g,e,f,{dataFetcherRouteName:"/_app",requestedRouteName:d.ctx.pathname,dataFetchingMethodName:"getInitialProps"}),{data:h,sentryTrace:i,baggage:j}=await a.apply(b,c);return"object"==typeof h&&null!==h&&(h.pageProps||(h.pageProps={}),i&&(h.pageProps._sentryTraceData=i),j&&(h.pageProps._sentryBaggage=j)),h}}})}function hI(a){return new Proxy(a,{apply:async(a,b,c)=>{if(hy())return a.apply(b,c);let[d]=c,{req:e,res:f}=d,g=hB(a);if(!e||!f)return g.apply(b,c);{let a=hC(g,e,f,{dataFetcherRouteName:"/_document",requestedRouteName:d.pathname,dataFetchingMethodName:"getInitialProps"}),{data:h}=await a.apply(b,c);return h}}})}function hJ(a){return new Proxy(a,{apply:async(a,b,c)=>{if(hy())return a.apply(b,c);let[d]=c,{req:e,res:f}=d,g=hB(a);if(!e||!f)return g.apply(b,c);{let a=hC(g,e,f,{dataFetcherRouteName:"/_error",requestedRouteName:d.pathname,dataFetchingMethodName:"getInitialProps"}),{data:h,baggage:i,sentryTrace:j}=await a.apply(b,c);return"object"==typeof h&&null!==h&&(j&&(h._sentryTraceData=j),i&&(h._sentryBaggage=i)),h}}})}function hK(a,b){return new Proxy(a,{apply:async(a,c,d)=>{if(hy())return a.apply(c,d);let[e]=d,{req:f,res:g}=e,h=hC(hB(a),f,g,{dataFetcherRouteName:b,requestedRouteName:b,dataFetchingMethodName:"getServerSideProps"}),{data:i,baggage:j,sentryTrace:k}=await h.apply(c,d);return"object"==typeof i&&null!==i&&"props"in i&&(k&&(i.props._sentryTraceData=k),j&&(i.props._sentryBaggage=j)),i}})}function hL(a){return(0,bx.bJ)(a)&&["NEXT_NOT_FOUND","NEXT_HTTP_ERROR_FALLBACK;404"].includes(a.digest)}function hM(a){return(0,bx.bJ)(a)&&"string"==typeof a.digest&&a.digest.startsWith("NEXT_REDIRECT;")}let hN=new WeakMap;function hO(a,b){if("object"!=typeof a||!a)return b;{let c=hN.get(a);return c||(hN.set(a,b),b)}}let hP=new WeakMap;function hQ(a){if("object"!=typeof a||!a)return new dS.H;{let b=hP.get(a);if(b)return b;{let b=new dS.H;return hP.set(a,b),b}}}let hR={FORWARDED_PROTO:"x-forwarded-proto",FORWARDED_HOST:"x-forwarded-host",HOST:"host",REFERER:"referer"};function hS(a,b,c,d){let e=function(a){let b=a?.[hR.REFERER];if(b)try{let a=new URL(b);return aj(a)}catch{return}}(c);return e||function(a,b,c,d){let e=function(a,b){if(!b||"object"!=typeof b)return a;let c=a;for(let[a,d]of Object.entries(b))c=c.split(`[${a}]`).join(encodeURIComponent(d));return c}(a,b),f=d??function(a){let b=a.split("/").filter(a=>a&&!(a.startsWith("(")&&a.endsWith(")")));return b.length>0?`/${b.join("/")}`:"/"}(e),g=c?.[hR.FORWARDED_PROTO],h=c?.[hR.FORWARDED_HOST]||c?.[hR.HOST];if(!g||!h)return f;let i=ai(`${g}://${h}${f}`);return i?aj(i):f}(a,b,c,d)}function hT(a,b){let{componentRoute:c,componentType:d}=b;return new Proxy(a,{apply:(a,e,f)=>{let g,h,i=(0,$.Bk)()?.spanContext().traceId,j=hQ(b.headers),k=(0,$.Bk)();if(k){let a=(0,$.zU)(k),{scope:b}=(0,af.L)(a);(0,af.d)(a,b??new dS.H,j);let c=(0,$.et)(a);c.data&&"http.target"in c.data&&(g=c.data["http.target"]?.toString())}let l=b.headers?(0,hv.NI)(b.headers):void 0;if((0,ag.KU)()?.getOptions().sendDefaultPii){let{params:a}=hE(f[0]);h=a}return j.setSDKProcessingMetadata({normalizedRequest:{headers:l,url:hS(c,h,l,g)}}),(0,ag.rB)(j,()=>(0,ag.v4)(g=>{g.setTransactionName(`${d} Server Component (${c})`);{let a=hO(b.headers,(0,at.kM)(l?.["sentry-trace"],l?.baggage));i&&(a.traceId=i),g.setPropagationContext(a)}let h=(0,$.Bk)();if(h){let a=(0,$.zU)(h),b=l?.["sentry-trace"];b&&a.setAttribute(hA,b)}return ct({op:"function.nextjs",name:`${d} Server Component (${c})`,attributes:{[ae.i_]:"component",[ae.JD]:"auto.function.nextjs.server_component","sentry.nextjs.ssr.function.type":d,"sentry.nextjs.ssr.function.route":c}},b=>ca(()=>a.apply(e,f),a=>{hL(a)?b.setStatus({code:_.TJ,message:"not_found"}):hM(a)?b.setStatus({code:_.F3}):(b.setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.server_component"}}))},()=>{b.end(),(0,an.l)((0,hz.a)())}))}))}})}function hU(a,b){let{method:c,parameterizedRoute:d,headers:e}=b;return new Proxy(a,{apply:async(a,b,f)=>{let g,h=(0,$.Bk)(),i=h?(0,$.zU)(h):void 0;if(i&&1){let a=hQ(e),{scope:b}=(0,af.L)(i);(0,af.d)(i,b??new dS.H,a),g=a,i.updateName(`${c} ${d}`),i.setAttribute(ae.i_,"route"),i.setAttribute(ae.uT,"http.server")}return(0,ag.rB)(g,()=>(0,ag.v4)(async g=>{g.setTransactionName(`${c} ${d}`);{let a=e?(0,hv.NI)(e):{},b=(0,at.kM)(a["sentry-trace"],a.baggage);g.setPropagationContext(b),g.setSDKProcessingMetadata({normalizedRequest:{method:c,headers:a}})}let j=await ca(()=>a.apply(b,f),a=>{hM(a)||(hL(a)?(h&&(0,_.N8)(h,404),i&&(0,_.N8)(i,404)):(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.route_handler"}}))},()=>{(0,an.l)((0,hz.a)())});try{j.status&&(h&&(0,_.N8)(h,j.status),i&&(0,_.N8)(i,j.status))}catch{}return j}))}})}function hV(a,b){return new Proxy(a,{apply:(a,c,d)=>{let e;if(!d?.[0])return a.apply(c,d);let[f]=d,g="nextUrl"in f?f.nextUrl.pathname:f.url,h="nextUrl"in f?f.headers.get("user-agent"):f.headers["user-agent"];if(!b||!h?.includes("vercel-cron"))return a.apply(c,d);let i=b.find(a=>a.path===g);if(!i?.path||!i.schedule)return a.apply(c,d);let j=i.path,k=(0,cf.SE)({monitorSlug:j,status:"in_progress"},{maxRuntime:720,schedule:{type:"crontab",value:i.schedule}}),l=Date.now()/1e3,m=()=>{(0,cf.SE)({checkInId:k,monitorSlug:j,status:"error",duration:Date.now()/1e3-l})};try{e=a.apply(c,d)}catch(a){throw m(),a}return"object"==typeof e&&null!==e&&"then"in e?Promise.resolve(e).then(()=>{(0,cf.SE)({checkInId:k,monitorSlug:j,status:"ok",duration:Date.now()/1e3-l})},()=>{m()}):(0,cf.SE)({checkInId:k,monitorSlug:j,status:"ok",duration:Date.now()/1e3-l}),e}})}function hW(a){return new Proxy(a,{apply:async(a,b,c)=>{let d="_sentryRewritesTunnelPath"in globalThis?globalThis._sentryRewritesTunnelPath:void 0;if(d&&"string"==typeof d){let a=c[0];if(a instanceof Request&&new URL(a.url).pathname.startsWith(d))return new Response(null,{status:200,headers:{"x-middleware-next":"1"}})}return(0,ag.rB)(d=>{let e,f,g=c[0],h=(0,ag.o5)();g instanceof Request?(d.setSDKProcessingMetadata({normalizedRequest:(0,hv.xF)(g)}),e=`middleware ${g.method}`,f="url"):(e="middleware",f="component"),h.setTransactionName(e);let i=(0,$.Bk)();if(i){e="middleware",f="component";let a=(0,$.zU)(i);a&&(0,af.d)(a,h,d)}return cs({name:e,op:"http.server.middleware",attributes:{[ae.i_]:f,[ae.JD]:"auto.function.nextjs.wrap_middleware"}},()=>ca(()=>a.apply(b,c),a=>{(0,cf.Cp)(a,{mechanism:{type:"auto.function.nextjs.wrap_middleware",handled:!1}})},()=>{(0,an.l)((0,hz.a)())}))})}})}function hX(a){return"function"==typeof a&&a?.prototype?.isReactComponent?class extends a{render(...a){return(0,ag.rB)(()=>{let b=(0,ag.o5)(),c="object"==typeof this.props&&null!==this.props&&"_sentryTraceData"in this.props&&"string"==typeof this.props._sentryTraceData?this.props._sentryTraceData:void 0;if(c){let a=(0,at.nc)(c);b.setContext("trace",{span_id:a?.parentSpanId,trace_id:a?.traceId})}try{return super.render(...a)}catch(a){throw(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.page_class"}}),a}})}}:"function"==typeof a?new Proxy(a,{apply:(a,b,c)=>(0,ag.rB)(()=>{let d=(0,ag.o5)(),e=c?.[0]?._sentryTraceData;if(e){let a=(0,at.nc)(e);d.setContext("trace",{span_id:a?.parentSpanId,trace_id:a?.traceId})}try{return a.apply(b,c)}catch(a){throw(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.page_function"}}),a}})}):a}function hY(a,b){let{requestAsyncStorage:c,componentRoute:d,componentType:e,generationFunctionIdentifier:f}=b;return new Proxy(a,{apply:(a,b,g)=>{let h,i,j,k=(0,$.Bk)()?.spanContext().traceId;try{h=c?.getStore()?.headers}catch{}let l=hQ(h),m=(0,$.Bk)();if(m){let a=(0,$.zU)(m),{scope:b}=(0,af.L)(a);(0,af.d)(a,b??new dS.H,l);let c=(0,$.et)(a);c.data&&"http.target"in c.data&&(i=c.data["http.target"])}let n=h?(0,hv.NI)(h):void 0;if((0,ag.KU)()?.getOptions().sendDefaultPii){let{params:a,searchParams:b}=hE(g[0]);j={params:a,searchParams:b}}return(0,ag.rB)(l,()=>(0,ag.v4)(c=>{c.setTransactionName(`${e}.${f} (${d})`),l.setSDKProcessingMetadata({normalizedRequest:{headers:n,url:hS(d,j?.params,n,i)}});let m=(0,$.Bk)();if(m){let a=(0,$.zU)(m),b=n?.["sentry-trace"];b&&a.setAttribute(hA,b)}let o=hO(h,(0,at.kM)(n?.["sentry-trace"],n?.baggage));return k&&(o.traceId=k),c.setPropagationContext(o),c.setExtra("route_data",j),ct({op:"function.nextjs",name:`${e}.${f} (${d})`,attributes:{[ae.i_]:"route",[ae.JD]:"auto.function.nextjs","sentry.nextjs.ssr.function.type":f,"sentry.nextjs.ssr.function.route":d}},c=>ca(()=>a.apply(b,g),a=>{hL(a)?(c.setStatus({code:_.TJ,message:"not_found"}),(0,$.zU)(c).setStatus({code:_.TJ,message:"not_found"})):hM(a)?c.setStatus({code:_.F3}):(c.setStatus({code:_.TJ,message:"internal_error"}),(0,$.zU)(c).setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(a,{mechanism:{handled:!1,type:"auto.function.nextjs.generation_function",data:{function:f}}}))},()=>{c.end()}))}))}})}var hZ=c(4612);function h$(...a){if("function"==typeof a[1]){let[b,c]=a;return h_(b,{},c)}{let[b,c,d]=a;return h_(b,c,d)}}async function h_(a,b,c){return(0,ag.rB)(async d=>{let e,f,g=(0,ag.KU)()?.getOptions().sendDefaultPii,h={};try{let a=await b.headers;e=a?.get("sentry-trace")??void 0,f=a?.get("baggage"),a?.forEach((a,b)=>{h[b]=a})}catch{hZ.T&&P.Yz.warn("Sentry wasn't able to extract the tracing headers for a server action. Will not trace this request.")}return d.setTransactionName(`serverAction/${a}`),d.setSDKProcessingMetadata({normalizedRequest:{headers:h}}),((0,$.Bk)()?(a,b)=>b():cv)({sentryTrace:e,baggage:f},async()=>{try{return await cs({op:"function.server_action",name:`serverAction/${a}`,forceTransaction:!0,attributes:{[ae.i_]:"route",[ae.JD]:"auto.function.nextjs.server_action"}},async a=>{let d=await ca(c,b=>{hL(b)?a.setStatus({code:_.TJ,message:"not_found"}):hM(b)||(a.setStatus({code:_.TJ,message:"internal_error"}),(0,cf.Cp)(b,{mechanism:{handled:!1,type:"auto.function.nextjs.server_action"}}))});return(void 0!==b.recordResponse?b.recordResponse:g)&&(0,ag.rm)().setExtra("server_action_result",d),b.formData&&b.formData.forEach((a,b)=>{(0,ag.rm)().setExtra(`server_action_form_data.${b}`,"string"==typeof a?a:"[non-string value]")}),d})}finally{(0,an.l)((0,hz.a)())}})})}var h0=c(4687);async function h1(a){let{req:b,res:c,err:d}=a,e=c?.statusCode||a.statusCode;if(e&&e<500||!a.pathname)return Promise.resolve();(0,ag.v4)(a=>{if(b){let c=(0,hv.Iv)(b);a.setSDKProcessingMetadata({normalizedRequest:c})}(0,cf.Cp)(d||`_error.js called with falsy error (${d})`,{mechanism:{type:"auto.function.nextjs.underscore_error",handled:!1,data:{function:"_error.getInitialProps"}}})}),(0,an.l)((0,hz.a)())}function h2(a,b){return new Proxy(a,{apply:async(a,c,d)=>(0,ag.rB)(e=>{let f,g=d[0],h=(0,ag.o5)(),i={};g instanceof Request?(e.setSDKProcessingMetadata({normalizedRequest:(0,hv.xF)(g)}),h.setTransactionName(`${g.method} ${b}`),i=hw(g.headers)):h.setTransactionName(`handler (${b})`);let j="http.server",k=(0,$.Bk)();if(k){f=`handler (${b})`,j=void 0;let a=(0,$.zU)(k);a&&(a.updateName(g instanceof Request?`${g.method} ${b}`:`handler ${b}`),a.setAttributes({[ae.uT]:"http.server",[ae.i_]:"route",...i}),(0,af.d)(a,h,e))}else f=g instanceof Request?`${g.method} ${b}`:`handler ${b}`;return cs({name:f,op:j,attributes:{[ae.i_]:"route",[ae.JD]:"auto.function.nextjs.wrap_api_handler",...i}},()=>ca(()=>a.apply(c,d),a=>{(0,cf.Cp)(a,{mechanism:{type:"auto.function.nextjs.wrap_api_handler",handled:!1}})},()=>{(0,an.l)((0,hz.a)())}))})})}function h3(a={}){if(ab(),hy())return;let b=ht(a),c=".next";c&&b.push((({distDirName:a})=>{let b=a.replace(/(\/|\\)$/,""),c=RegExp(`.*${b.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}`);return{...eX({iteratee:a=>(a.filename=a.filename?.replace(c,"app:///_next"),a)}),name:"DistDirRewriteFrames"}})({distDirName:c}));let d={defaultIntegrations:b,release:"5902242700f8420296346f568cc81d963ab727a6",...a};ad(d,"nextjs",["nextjs","vercel-edge"]);let f=function(a={}){function b(){let a=gN(M.active());return a||{scope:(0,cb.r)(),isolationScope:(0,cb.q)()}}function c(){return b().scope}function d(){return b().isolationScope}if((0,cc.n)({withScope:function(a){let b=M.active();return M.with(b,()=>a(c()))},withSetScope:function(a,b){let c=a[gM]||M.active();return M.with(c.setValue(gK,a),()=>b(a))},withSetIsolationScope:function(a,b){let c=M.active();return M.with(c.setValue(gL,a),()=>b(d()))},withIsolationScope:function(a){let b=M.active();return M.with(b.setValue(gJ,!0),()=>a(d()))},getCurrentScope:c,getIsolationScope:d,startSpan:g_,startSpanManual:g0,startInactiveSpan:g1,getActiveSpan:gT,suppressTracing:g8,getTraceData:g9,continueTrace:g6,withActiveSpan:g2}),(0,ag.o5)().update(a.initialScope),void 0===a.defaultIntegrations&&(a.defaultIntegrations=ht(a)),void 0===a.dsn&&process.env.SENTRY_DSN&&(a.dsn=process.env.SENTRY_DSN),void 0===a.tracesSampleRate&&process.env.SENTRY_TRACES_SAMPLE_RATE){let b=parseFloat(process.env.SENTRY_TRACES_SAMPLE_RATE);isFinite(b)&&(a.tracesSampleRate=b)}if(void 0===a.release){let b=function(a){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(O.O.SENTRY_RELEASE?.id)return O.O.SENTRY_RELEASE.id;let b=process.env.GITHUB_SHA||process.env.CI_MERGE_REQUEST_SOURCE_BRANCH_SHA||process.env.CI_BUILD_REF||process.env.CI_COMMIT_SHA||process.env.BITBUCKET_COMMIT,c=process.env.APPVEYOR_PULL_REQUEST_HEAD_COMMIT||process.env.APPVEYOR_REPO_COMMIT||process.env.CODEBUILD_RESOLVED_SOURCE_VERSION||process.env.AWS_COMMIT_ID||process.env.BUILD_SOURCEVERSION||process.env.GIT_CLONE_COMMIT_HASH||process.env.BUDDY_EXECUTION_REVISION||process.env.BUILDKITE_COMMIT||process.env.CIRCLE_SHA1||process.env.CIRRUS_CHANGE_IN_REPO||process.env.CF_REVISION||process.env.CM_COMMIT||process.env.CF_PAGES_COMMIT_SHA||process.env.DRONE_COMMIT_SHA||process.env.FC_GIT_COMMIT_SHA||process.env.HEROKU_TEST_RUN_COMMIT_VERSION||process.env.HEROKU_SLUG_COMMIT||process.env.RAILWAY_GIT_COMMIT_SHA||process.env.RENDER_GIT_COMMIT||process.env.SEMAPHORE_GIT_SHA||process.env.TRAVIS_PULL_REQUEST_SHA||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA,d=process.env.CI_COMMIT_ID||process.env.SOURCE_COMMIT||process.env.SOURCE_VERSION||process.env.GIT_COMMIT||process.env.COMMIT_REF||process.env.BUILD_VCS_NUMBER||process.env.CI_COMMIT_SHA;return b||c||d||void 0}();void 0!==b&&(a.release=b)}a.environment=a.environment||process.env.SENTRY_ENVIRONMENT||function(a){let b=process.env.VERCEL_ENV;return b?`vercel-${b}`:void 0}()||"production";let f=new fD({...a,stackParser:(0,Q.vk)(a.stackParser||hs),integrations:function(a){let b,c=a.defaultIntegrations||[],d=a.integrations;if(c.forEach(a=>{a.isDefaultInstance=!0}),Array.isArray(d))b=[...c,...d];else if("function"==typeof d){let a=d(c);b=Array.isArray(a)?a:[a]}else b=c;let e={};return b.forEach(a=>{let{name:b}=a,c=e[b];c&&!c.isDefaultInstance&&a.isDefaultInstance||(e[b]=a)}),Object.values(e)}(a),transport:a.transport||ho});return(0,ag.o5)().setClient(f),f.init(),a.skipOpenTelemetrySetup||function(a){a.getOptions().debug&&(fv.disable(),fv.setLogger({error:P.Yz.error,warn:P.Yz.warn,info:P.Yz.log,debug:P.Yz.log,verbose:P.Yz.log},e.DEBUG));let b=new gz({sampler:new hj(a),resource:fA().merge(fz({"service.name":"edge","service.namespace":"sentry","service.version":ac.M})),forceFlushTimeoutMillis:500,spanProcessors:[new hi({timeout:a.getOptions().maxSpanWaitDuration})]}),c=function(a){class b extends a{constructor(...a){super(...a),gW("SentryContextManager")}with(a,b,c,...d){let e=gN(a),f=e?.scope||(0,ag.o5)(),g=e?.isolationScope||(0,ag.rm)(),h=!0===a.getValue(gJ),i=a.getValue(gK),j=a.getValue(gL),k=i||f.clone(),l=gO(a,{scope:k,isolationScope:j||(h?g.clone():g)}).deleteValue(gJ).deleteValue(gK).deleteValue(gL);return(0,b4.my)(k,gM,l),super.with(l,b,c,...d)}}return b}(hr);aT.setGlobalTracerProvider(b),a8.setGlobalPropagator(new gX),M.setGlobalContextManager(new c),a.traceProvider=b}(f),f.on("createDsc",(a,b)=>{if(!b)return;let c=(0,$.et)(b).data[ae.i_],{description:d}=b.name?gR(b):{description:void 0};if("url"!==c&&d&&(a.transaction=d),(0,b9.f)()){let c=gP(b.spanContext());a.sampled=void 0==c?void 0:String(c)}}),f.on("preprocessEvent",a=>{let b=gT();if(!b||"transaction"===a.type)return;a.contexts={trace:(0,$.kX)(b),...a.contexts};let c=(0,$.zU)(b);return a.sdkProcessingMetadata={dynamicSamplingContext:(0,av.k1)(c),...a.sdkProcessingMetadata},a}),f}(d);f?.on("spanStart",a=>{let b=(0,$.et)(a).data,c=(0,$.zU)(a),d=a===c;if(b?.["next.span_type"]!==void 0&&a.setAttribute(ae.JD,"auto"),b?.["next.span_type"]==="Middleware.execute"&&(a.setAttribute(ae.uT,"http.server.middleware"),a.setAttribute(ae.i_,"url"),d)){let b=(0,af.L)(a),c=(b.isolationScope||(0,ag.rm)()).clone(),d=b.scope||(0,ag.o5)(),e=M.active().getValue(bg);e&&(e.isolationScope=c),(0,af.d)(a,d,c)}d&&hw((0,ag.rm)().getScopeData().sdkProcessingMetadata?.normalizedRequest?.headers,c)}),f?.on("preprocessEvent",a=>{if("transaction"===a.type&&a.contexts?.trace?.data?.["next.span_type"]==="Middleware.execute"&&a.contexts?.trace?.data?.["next.span_name"]&&a.transaction){let b=a.contexts.trace.data["next.span_name"];if("string"==typeof b){let c=b.match(/^middleware (GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS)/);c?a.transaction=`middleware ${c[1]}`:a.transaction=al(a.contexts.trace.data["next.span_name"])}}}),f?.on("spanEnd",a=>{a===(0,$.zU)(a)&&(0,an.l)((0,hz.a)())})}function h4(a){return a}},7789:(a,b,c)=>{"use strict";c.d(b,{h:()=>function a(b,c,d=2){if(!c||"object"!=typeof c||d<=0)return c;if(b&&0===Object.keys(c).length)return b;let e={...b};for(let b in c)Object.prototype.hasOwnProperty.call(c,b)&&(e[b]=a(e[b],c[b],d-1));return e}})},7791:(a,b,c)=>{"use strict";c.d(b,{H:()=>n});var d=c(7217),e=c(8339),f=c(7657),g=c(8595),h=c(7789),i=c(8347),j=c(1744),k=c(480),l=c(4120),m=c(9452);class n{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:(0,j.e)(),sampleRand:Math.random()}}clone(){let a=new n;return a._breadcrumbs=[...this._breadcrumbs],a._tags={...this._tags},a._extra={...this._extra},a._contexts={...this._contexts},this._contexts.flags&&(a._contexts.flags={values:[...this._contexts.flags.values]}),a._user=this._user,a._level=this._level,a._session=this._session,a._transactionName=this._transactionName,a._fingerprint=this._fingerprint,a._eventProcessors=[...this._eventProcessors],a._attachments=[...this._attachments],a._sdkProcessingMetadata={...this._sdkProcessingMetadata},a._propagationContext={...this._propagationContext},a._client=this._client,a._lastEventId=this._lastEventId,(0,k.r)(a,(0,k.f)(this)),a}setClient(a){this._client=a}setLastEventId(a){this._lastEventId=a}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(a){this._scopeListeners.push(a)}addEventProcessor(a){return this._eventProcessors.push(a),this}setUser(a){return this._user=a||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&(0,e.qO)(this._session,{user:a}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(a){return this._tags={...this._tags,...a},this._notifyScopeListeners(),this}setTag(a,b){return this._tags={...this._tags,[a]:b},this._notifyScopeListeners(),this}setExtras(a){return this._extra={...this._extra,...a},this._notifyScopeListeners(),this}setExtra(a,b){return this._extra={...this._extra,[a]:b},this._notifyScopeListeners(),this}setFingerprint(a){return this._fingerprint=a,this._notifyScopeListeners(),this}setLevel(a){return this._level=a,this._notifyScopeListeners(),this}setTransactionName(a){return this._transactionName=a,this._notifyScopeListeners(),this}setContext(a,b){return null===b?delete this._contexts[a]:this._contexts[a]=b,this._notifyScopeListeners(),this}setSession(a){return a?this._session=a:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(a){if(!a)return this;let b="function"==typeof a?a(this):a,{tags:c,extra:d,user:e,contexts:f,level:h,fingerprint:i=[],propagationContext:j}=(b instanceof n?b.getScopeData():(0,g.Qd)(b)?a:void 0)||{};return this._tags={...this._tags,...c},this._extra={...this._extra,...d},this._contexts={...this._contexts,...f},e&&Object.keys(e).length&&(this._user=e),h&&(this._level=h),i.length&&(this._fingerprint=i),j&&(this._propagationContext=j),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,(0,k.r)(this,void 0),this._attachments=[],this.setPropagationContext({traceId:(0,j.e)(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(a,b){let c="number"==typeof b?b:100;if(c<=0)return this;let d={timestamp:(0,m.lu)(),...a,message:a.message?(0,l.xv)(a.message,2048):a.message};return this._breadcrumbs.push(d),this._breadcrumbs.length>c&&(this._breadcrumbs=this._breadcrumbs.slice(-c),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(a){return this._attachments.push(a),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:(0,k.f)(this)}}setSDKProcessingMetadata(a){return this._sdkProcessingMetadata=(0,h.h)(this._sdkProcessingMetadata,a,2),this}setPropagationContext(a){return this._propagationContext=a,this}getPropagationContext(){return this._propagationContext}captureException(a,b){let c=b?.event_id||(0,i.eJ)();if(!this._client)return d.T&&f.Yz.warn("No client configured on scope - will not capture exception!"),c;let e=Error("Sentry syntheticException");return this._client.captureException(a,{originalException:a,syntheticException:e,...b,event_id:c},this),c}captureMessage(a,b,c){let e=c?.event_id||(0,i.eJ)();if(!this._client)return d.T&&f.Yz.warn("No client configured on scope - will not capture message!"),e;let g=Error(a);return this._client.captureMessage(a,b,{originalException:a,syntheticException:g,...c,event_id:e},this),e}captureEvent(a,b){let c=b?.event_id||(0,i.eJ)();return this._client?this._client.captureEvent(a,{...b,event_id:c},this):d.T&&f.Yz.warn("No client configured on scope - will not capture event!"),c}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(a=>{a(this)}),this._notifyingListeners=!1)}}},7957:(a,b,c)=>{"use strict";c.d(b,{HW:()=>r,LZ:()=>n,ao:()=>p,k1:()=>q});var d=c(172),e=c(3211),f=c(2674),g=c(9619),h=c(5358),i=c(9355),j=c(9379),k=c(5146),l=c(5851);let m="_frozenDsc";function n(a,b){(0,j.my)(a,m,b)}function o(a,b){let c=b.getOptions(),{publicKey:e}=b.getDsn()||{},f={environment:c.environment||d.U,release:c.release,public_key:e,trace_id:a,org_id:(0,h.ul)(b)};return b.emit("createDsc",f),f}function p(a,b){let c=b.getPropagationContext();return c.dsc||o(c.traceId,a)}function q(a){let b=(0,e.KU)();if(!b)return{};let c=(0,k.zU)(a),d=(0,k.et)(c),h=d.data,j=c.spanContext().traceState,n=j?.get("sentry.sample_rate")??h[f.sy]??h[f.Ef];function p(a){return("number"==typeof n||"string"==typeof n)&&(a.sample_rate=`${n}`),a}let q=c[m];if(q)return p(q);let r=j?.get("sentry.dsc"),s=r&&(0,g.yD)(r);if(s)return p(s);let t=o(a.spanContext().traceId,b),u=h[f.i_],v=d.description;return"url"!==u&&v&&(t.transaction=v),(0,i.f)()&&(t.sampled=String((0,k.pK)(c)),t.sample_rand=j?.get("sentry.sample_rand")??(0,l.L)(c).scope?.getPropagationContext().sampleRand.toString()),p(t),b.emit("createDsc",t,c),t}function r(a){let b=q(a);return(0,g.De)(b)}},8168:(a,b,c)=>{"use strict";c.d(b,{S8:()=>g,cd:()=>function a(b,c=3,d=102400){let e=g(b,c);return~-encodeURI(JSON.stringify(e)).split(/%..|./).length>d?a(b,c-1,d):e}});var d=c(8595),e=c(9379),f=c(9232);function g(a,b=100,c=Infinity){try{return function a(b,c,g=Infinity,h=Infinity,i=function(){let a=new WeakSet;return[function(b){return!!a.has(b)||(a.add(b),!1)},function(b){a.delete(b)}]}()){let[j,k]=i;if(null==c||["boolean","string"].includes(typeof c)||"number"==typeof c&&Number.isFinite(c))return c;let l=function(a,b){try{if("domain"===a&&b&&"object"==typeof b&&b._events)return"[Domain]";if("domainEmitter"===a)return"[DomainEmitter]";if("undefined"!=typeof global&&b===global)return"[Global]";if("undefined"!=typeof window&&b===window)return"[Window]";if("undefined"!=typeof document&&b===document)return"[Document]";if((0,d.L2)(b))return"[VueViewModel]";if((0,d.mE)(b))return"[SyntheticEvent]";if("number"==typeof b&&!Number.isFinite(b))return`[${b}]`;if("function"==typeof b)return`[Function: ${(0,f.qQ)(b)}]`;if("symbol"==typeof b)return`[${String(b)}]`;if("bigint"==typeof b)return`[BigInt: ${String(b)}]`;let c=function(a){let b=Object.getPrototypeOf(a);return b?.constructor?b.constructor.name:"null prototype"}(b);if(/^HTML(\w*)Element$/.test(c))return`[HTMLElement: ${c}]`;return`[object ${c}]`}catch(a){return`**non-serializable** (${a})`}}(b,c);if(!l.startsWith("[object "))return l;if(c.__sentry_skip_normalization__)return c;let m="number"==typeof c.__sentry_override_normalization_depth__?c.__sentry_override_normalization_depth__:g;if(0===m)return l.replace("object ","");if(j(c))return"[Circular ~]";if(c&&"function"==typeof c.toJSON)try{let b=c.toJSON();return a("",b,m-1,h,i)}catch{}let n=Array.isArray(c)?[]:{},o=0,p=(0,e.W4)(c);for(let b in p){if(!Object.prototype.hasOwnProperty.call(p,b))continue;if(o>=h){n[b]="[MaxProperties ~]";break}let c=p[b];n[b]=a(b,c,m-1,h,i),o++}return k(c),n}("",a,b,c)}catch(a){return{ERROR:`**non-serializable** (${a})`}}}},8339:(a,b,c)=>{"use strict";c.d(b,{qO:()=>f});var d=c(8347),e=c(9452);function f(a,b={}){if(b.user&&(!a.ipAddress&&b.user.ip_address&&(a.ipAddress=b.user.ip_address),a.did||b.did||(a.did=b.user.id||b.user.email||b.user.username)),a.timestamp=b.timestamp||(0,e.zf)(),b.abnormal_mechanism&&(a.abnormal_mechanism=b.abnormal_mechanism),b.ignoreDuration&&(a.ignoreDuration=b.ignoreDuration),b.sid&&(a.sid=32===b.sid.length?b.sid:(0,d.eJ)()),void 0!==b.init&&(a.init=b.init),!a.did&&b.did&&(a.did=`${b.did}`),"number"==typeof b.started&&(a.started=b.started),a.ignoreDuration)a.duration=void 0;else if("number"==typeof b.duration)a.duration=b.duration;else{let b=a.timestamp-a.started;a.duration=b>=0?b:0}b.release&&(a.release=b.release),b.environment&&(a.environment=b.environment),!a.ipAddress&&b.ipAddress&&(a.ipAddress=b.ipAddress),!a.userAgent&&b.userAgent&&(a.userAgent=b.userAgent),"number"==typeof b.errors&&(a.errors=b.errors),b.status&&(a.status=b.status)}},8347:(a,b,c)=>{"use strict";let d;c.d(b,{$X:()=>i,GR:()=>l,M6:()=>k,eJ:()=>g,gO:()=>j});var e=c(9379),f=c(6144);function g(a=function(){let a=f.O;return a.crypto||a.msCrypto}()){try{if(a?.randomUUID)return a.randomUUID().replace(/-/g,"")}catch{}return d||(d="10000000100040008000100000000000"),d.replace(/[018]/g,a=>(a^(15&16*Math.random())>>a/4).toString(16))}function h(a){return a.exception?.values?.[0]}function i(a){let{message:b,event_id:c}=a;if(b)return b;let d=h(a);return d?d.type&&d.value?`${d.type}: ${d.value}`:d.type||d.value||c||"<unknown>":c||"<unknown>"}function j(a,b,c){let d=a.exception=a.exception||{},e=d.values=d.values||[],f=e[0]=e[0]||{};f.value||(f.value=b||""),f.type||(f.type=c||"Error")}function k(a,b){let c=h(a);if(!c)return;let d=c.mechanism;if(c.mechanism={type:"generic",handled:!0,...d,...b},b&&"data"in b){let a={...d?.data,...b.data};c.mechanism.data=a}}function l(a){if(function(a){try{return a.__sentry_captured__}catch{}}(a))return!0;try{(0,e.my)(a,"__sentry_captured__",!0)}catch{}return!1}},8595:(a,b,c)=>{"use strict";c.d(b,{Kg:()=>h,L2:()=>r,NF:()=>i,Qd:()=>k,Qg:()=>o,T2:()=>g,bJ:()=>e,gd:()=>n,ks:()=>s,mE:()=>p,sO:()=>j,tH:()=>q,vq:()=>m,xH:()=>l});let d=Object.prototype.toString;function e(a){switch(d.call(a)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return q(a,Error)}}function f(a,b){return d.call(a)===`[object ${b}]`}function g(a){return f(a,"ErrorEvent")}function h(a){return f(a,"String")}function i(a){return"object"==typeof a&&null!==a&&"__sentry_template_string__"in a&&"__sentry_template_values__"in a}function j(a){return null===a||i(a)||"object"!=typeof a&&"function"!=typeof a}function k(a){return f(a,"Object")}function l(a){return"undefined"!=typeof Event&&q(a,Event)}function m(a){return"undefined"!=typeof Element&&q(a,Element)}function n(a){return f(a,"RegExp")}function o(a){return!!(a?.then&&"function"==typeof a.then)}function p(a){return k(a)&&"nativeEvent"in a&&"preventDefault"in a&&"stopPropagation"in a}function q(a,b){try{return a instanceof b}catch{return!1}}function r(a){return!!("object"==typeof a&&null!==a&&(a.__isVue||a._isVue))}function s(a){return"undefined"!=typeof Request&&q(a,Request)}},8943:(a,b,c)=>{"use strict";let d,e,f,g;c.d(b,{li:()=>v,mG:()=>u});var h=c(172),i=c(3211),j=c(7217),k=c(7657),l=c(8595),m=c(1033),n=c(7791),o=c(572),p=c(6144),q=c(8347),r=c(8168),s=c(4120),t=c(9452);function u(a,b,c,u,v,w){var x,y;let{normalizeDepth:z=3,normalizeMaxBreadth:A=1e3}=a,B={...b,event_id:b.event_id||c.event_id||(0,q.eJ)(),timestamp:b.timestamp||(0,t.lu)()},C=c.integrations||a.integrations.map(a=>a.name);(function(a,b){let{environment:c,release:d,dist:e,maxValueLength:f=250}=b;a.environment=a.environment||c||h.U,!a.release&&d&&(a.release=d),!a.dist&&e&&(a.dist=e);let g=a.request;g?.url&&(g.url=(0,s.xv)(g.url,f))})(B,a),x=B,(y=C).length>0&&(x.sdk=x.sdk||{},x.sdk.integrations=[...x.sdk.integrations||[],...y]),v&&v.emit("applyFrameMetadata",b),void 0===b.type&&function(a,b){let c=function(a){let b=p.O._sentryDebugIds,c=p.O._debugIds;if(!b&&!c)return{};let h=b?Object.keys(b):[],i=c?Object.keys(c):[];if(g&&h.length===e&&i.length===f)return g;e=h.length,f=i.length,g={},d||(d={});let j=(b,c)=>{for(let e of b){let b=c[e],f=d?.[e];if(f&&g&&b)g[f[0]]=b,d&&(d[e]=[f[0],b]);else if(b){let c=a(e);for(let a=c.length-1;a>=0;a--){let f=c[a],h=f?.filename;if(h&&g&&d){g[h]=b,d[e]=[h,b];break}}}}};return b&&j(h,b),c&&j(i,c),g}(b);a.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{a.filename&&(a.debug_id=c[a.filename])})})}(B,a.stackParser);let D=function(a,b){if(!b)return a;let c=a?a.clone():new n.H;return c.update(b),c}(u,c.captureContext);c.mechanism&&(0,q.M6)(B,c.mechanism);let E=v?v.getEventProcessors():[],F=(0,i.m6)().getScopeData();if(w){let a=w.getScopeData();(0,o.Rg)(F,a)}if(D){let a=D.getScopeData();(0,o.Rg)(F,a)}let G=[...c.attachments||[],...F.attachments];return G.length&&(c.attachments=G),(0,o.e2)(B,F),(function(a,b,c,d=0){try{let e=function a(b,c,d,e){let f=d[e];if(!b||!f)return b;let g=f({...b},c);return(j.T&&null===g&&k.Yz.log(`Event processor "${f.id||"?"}" dropped event`),(0,l.Qg)(g))?g.then(b=>a(b,c,d,e+1)):a(g,c,d,e+1)}(b,c,a,d);return(0,l.Qg)(e)?e:(0,m.XW)(e)}catch(a){return(0,m.xg)(a)}})([...E,...F.eventProcessors],B,c).then(a=>(a&&function(a){let b={};if(a.exception?.values?.forEach(a=>{a.stacktrace?.frames?.forEach(a=>{a.debug_id&&(a.abs_path?b[a.abs_path]=a.debug_id:a.filename&&(b[a.filename]=a.debug_id),delete a.debug_id)})}),0===Object.keys(b).length)return;a.debug_meta=a.debug_meta||{},a.debug_meta.images=a.debug_meta.images||[];let c=a.debug_meta.images;Object.entries(b).forEach(([a,b])=>{c.push({type:"sourcemap",code_file:a,debug_id:b})})}(a),"number"==typeof z&&z>0)?function(a,b,c){if(!a)return null;let d={...a,...a.breadcrumbs&&{breadcrumbs:a.breadcrumbs.map(a=>({...a,...a.data&&{data:(0,r.S8)(a.data,b,c)}}))},...a.user&&{user:(0,r.S8)(a.user,b,c)},...a.contexts&&{contexts:(0,r.S8)(a.contexts,b,c)},...a.extra&&{extra:(0,r.S8)(a.extra,b,c)}};return a.contexts?.trace&&d.contexts&&(d.contexts.trace=a.contexts.trace,a.contexts.trace.data&&(d.contexts.trace.data=(0,r.S8)(a.contexts.trace.data,b,c))),a.spans&&(d.spans=a.spans.map(a=>({...a,...a.data&&{data:(0,r.S8)(a.data,b,c)}}))),a.contexts?.flags&&d.contexts&&(d.contexts.flags=(0,r.S8)(a.contexts.flags,3,c)),d}(a,z,A):a)}function v(a){if(a){var b;return(b=a)instanceof n.H||"function"==typeof b||Object.keys(a).some(a=>w.includes(a))?{captureContext:a}:a}}let w=["user","level","extra","contexts","tags","fingerprint","propagationContext"]},9191:(a,b,c)=>{"use strict";c.d(b,{h:()=>n,n:()=>m});var d=c(1491),e=c(3711),f=c(7791),g=c(8595);class h{constructor(a,b){let c,d;c=a||new f.H,d=b||new f.H,this._stack=[{scope:c}],this._isolationScope=d}withScope(a){let b,c=this._pushScope();try{b=a(c)}catch(a){throw this._popScope(),a}return(0,g.Qg)(b)?b.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),b)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let a=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:a}),a}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function i(){let a=(0,d.EU)(),b=(0,d.Se)(a);return b.stack=b.stack||new h((0,e.r)(),(0,e.q)())}function j(a){return i().withScope(a)}function k(a,b){let c=i();return c.withScope(()=>(c.getStackTop().scope=a,b(a)))}function l(a){return i().withScope(()=>a(i().getIsolationScope()))}function m(a){let b=(0,d.EU)();(0,d.Se)(b).acs=a}function n(a){let b=(0,d.Se)(a);return b.acs?b.acs:{withIsolationScope:l,withScope:j,withSetScope:k,withSetIsolationScope:(a,b)=>l(b),getCurrentScope:()=>i().getScope(),getIsolationScope:()=>i().getIsolationScope()}}},9232:(a,b,c)=>{"use strict";c.d(b,{RV:()=>l,gd:()=>g,qQ:()=>k,vk:()=>h,yF:()=>d});let d="?",e=/\(error: (.*)\)/,f=/captureMessage|captureException/;function g(...a){let b=a.sort((a,b)=>a[0]-b[0]).map(a=>a[1]);return(a,c=0,g=0)=>{let h=[],j=a.split("\n");for(let a=c;a<j.length;a++){let c=j[a];c.length>1024&&(c=c.slice(0,1024));let d=e.test(c)?c.replace(e,"$1"):c;if(!d.match(/\S*Error: /)){for(let a of b){let b=a(d);if(b){h.push(b);break}}if(h.length>=50+g)break}}var k=h.slice(g);if(!k.length)return[];let l=Array.from(k);return/sentryWrapped/.test(i(l).function||"")&&l.pop(),l.reverse(),f.test(i(l).function||"")&&(l.pop(),f.test(i(l).function||"")&&l.pop()),l.slice(0,50).map(a=>({...a,filename:a.filename||i(l).filename,function:a.function||d}))}}function h(a){return Array.isArray(a)?g(...a):a}function i(a){return a[a.length-1]||{}}let j="<anonymous>";function k(a){try{if(!a||"function"!=typeof a)return j;return a.name||j}catch{return j}}function l(a){let b=a.exception;if(b){let a=[];try{return b.values.forEach(b=>{b.stacktrace.frames&&a.push(...b.stacktrace.frames)}),a}catch{}}}},9355:(a,b,c)=>{"use strict";c.d(b,{f:()=>e});var d=c(3211);function e(a){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let b=a||(0,d.KU)()?.getOptions();return!!b&&(null!=b.tracesSampleRate||!!b.tracesSampler)}},9379:(a,b,c)=>{"use strict";c.d(b,{my:()=>j,W4:()=>l,HF:()=>o,GS:()=>i,sp:()=>k});var d=c(7217),e=c(8595);let f=c(6144).O;var g=c(7657),h=c(4120);function i(a,b,c){if(!(b in a))return;let e=a[b];if("function"!=typeof e)return;let f=c(e);"function"==typeof f&&function(a,b){try{let c=b.prototype||{};a.prototype=b.prototype=c,j(a,"__sentry_original__",b)}catch{}}(f,e);try{a[b]=f}catch{d.T&&g.Yz.log(`Failed to replace method "${b}" in object`,a)}}function j(a,b,c){try{Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0})}catch{d.T&&g.Yz.log(`Failed to add non-enumerable property "${b}" to object`,a)}}function k(a){return a.__sentry_original__}function l(a){if((0,e.bJ)(a))return{message:a.message,name:a.name,stack:a.stack,...n(a)};if(!(0,e.xH)(a))return a;{let b={type:a.type,target:m(a.target),currentTarget:m(a.currentTarget),...n(a)};return"undefined"!=typeof CustomEvent&&(0,e.tH)(a,CustomEvent)&&(b.detail=a.detail),b}}function m(a){try{return(0,e.vq)(a)?function(a,b={}){if(!a)return"<unknown>";try{let c,d=a,g=[],h=0,i=0,j=Array.isArray(b)?b:b.keyAttrs,k=!Array.isArray(b)&&b.maxStringLength||80;for(;d&&h++<5&&(c=function(a,b){let c=[];if(!a?.tagName)return"";if(f.HTMLElement&&a instanceof HTMLElement&&a.dataset){if(a.dataset.sentryComponent)return a.dataset.sentryComponent;if(a.dataset.sentryElement)return a.dataset.sentryElement}c.push(a.tagName.toLowerCase());let d=b?.length?b.filter(b=>a.getAttribute(b)).map(b=>[b,a.getAttribute(b)]):null;if(d?.length)d.forEach(a=>{c.push(`[${a[0]}="${a[1]}"]`)});else{a.id&&c.push(`#${a.id}`);let b=a.className;if(b&&(0,e.Kg)(b))for(let a of b.split(/\s+/))c.push(`.${a}`)}for(let b of["aria-label","type","name","title","alt"]){let d=a.getAttribute(b);d&&c.push(`[${b}="${d}"]`)}return c.join("")}(d,j),"html"!==c&&(!(h>1)||!(i+3*g.length+c.length>=k)));)g.push(c),i+=c.length,d=d.parentNode;return g.reverse().join(" > ")}catch{return"<unknown>"}}(a):Object.prototype.toString.call(a)}catch{return"<unknown>"}}function n(a){if("object"!=typeof a||null===a)return{};{let b={};for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b}}function o(a,b=40){let c=Object.keys(l(a));c.sort();let d=c[0];if(!d)return"[object has no keys]";if(d.length>=b)return(0,h.xv)(d,b);for(let a=c.length;a>0;a--){let d=c.slice(0,a).join(", ");if(!(d.length>b)){if(a===c.length)return d;return(0,h.xv)(d,b)}}return""}},9452:(a,b,c)=>{"use strict";let d;c.d(b,{lu:()=>f,zf:()=>g});var e=c(6144);function f(){return Date.now()/1e3}function g(){return(d??(d=function(){let{performance:a}=e.O;if(!a?.now||!a.timeOrigin)return f;let b=a.timeOrigin;return()=>(b+a.now())/1e3}()))()}},9619:(a,b,c)=>{"use strict";c.d(b,{D0:()=>k,De:()=>j,sv:()=>g,yD:()=>i});var d=c(7217),e=c(7657),f=c(8595);let g="sentry-",h=/^sentry-/;function i(a){let b=k(a);if(!b)return;let c=Object.entries(b).reduce((a,[b,c])=>(b.match(h)&&(a[b.slice(g.length)]=c),a),{});return Object.keys(c).length>0?c:void 0}function j(a){if(a){var b=Object.entries(a).reduce((a,[b,c])=>(c&&(a[`${g}${b}`]=c),a),{});return 0!==Object.keys(b).length?Object.entries(b).reduce((a,[b,c],f)=>{let g=`${encodeURIComponent(b)}=${encodeURIComponent(c)}`,h=0===f?g:`${a},${g}`;return h.length>8192?(d.T&&e.Yz.warn(`Not adding key: ${b} with val: ${c} to baggage header due to exceeding baggage size limits.`),a):h},""):void 0}}function k(a){if(a&&((0,f.Kg)(a)||Array.isArray(a)))return Array.isArray(a)?a.reduce((a,b)=>(Object.entries(l(b)).forEach(([b,c])=>{a[b]=c}),a),{}):l(a)}function l(a){return a.split(",").map(a=>{let b=a.indexOf("=");return -1===b?[]:[a.slice(0,b),a.slice(b+1)].map(a=>{try{return decodeURIComponent(a.trim())}catch{return}})}).reduce((a,[b,c])=>(b&&c&&(a[b]=c),a),{})}}},a=>{var b=a(a.s=5382);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES).middleware_instrumentation=b}]);
//# sourceMappingURL=edge-instrumentation.js.map
/**/;try{!function(){var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="5ec42333-77c7-4db0-9621-820f8bbfa967",a._sentryDebugIdIdentifier="sentry-dbid-5ec42333-77c7-4db0-9621-820f8bbfa967")}()}catch(a){}(()=>{"use strict";var a={},b={};function c(d){var e=b[d];if(void 0!==e)return e.exports;var f=b[d]={exports:{}},g=!0;try{a[d](f,f.exports,c),g=!1}finally{g&&delete b[d]}return f.exports}c.m=a,c.amdO={},(()=>{var a=[];c.O=(b,d,e,f)=>{if(d){f=f||0;for(var g=a.length;g>0&&a[g-1][2]>f;g--)a[g]=a[g-1];a[g]=[d,e,f];return}for(var h=1/0,g=0;g<a.length;g++){for(var[d,e,f]=a[g],i=!0,j=0;j<d.length;j++)(!1&f||h>=f)&&Object.keys(c.O).every(a=>c.O[a](d[j]))?d.splice(j--,1):(i=!1,f<h&&(h=f));if(i){a.splice(g--,1);var k=e();void 0!==k&&(b=k)}}return b}})(),c.n=a=>{var b=a&&a.__esModule?()=>a.default:()=>a;return c.d(b,{a:b}),b},c.d=(a,b)=>{for(var d in b)c.o(b,d)&&!c.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:b[d]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(a){if("object"==typeof window)return window}}(),c.o=(a,b)=>Object.prototype.hasOwnProperty.call(a,b),c.r=a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},(()=>{var a={149:0};c.O.j=b=>0===a[b];var b=(b,d)=>{var e,f,[g,h,i]=d,j=0;if(g.some(b=>0!==a[b])){for(e in h)c.o(h,e)&&(c.m[e]=h[e]);if(i)var k=i(c)}for(b&&b(d);j<g.length;j++)f=g[j],c.o(a,f)&&a[f]&&a[f][0](),a[f]=0;return c.O(k)},d=self.webpackChunk_N_E=self.webpackChunk_N_E||[];d.forEach(b.bind(null,0)),d.push=b.bind(null,d.push.bind(d))})()})();
//# sourceMappingURL=edge-runtime-webpack.js.map
/**/;try{!function(){var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="c162c32d-a5e5-4713-a883-810f565826ee",a._sentryDebugIdIdentifier="sentry-dbid-c162c32d-a5e5-4713-a883-810f565826ee")}()}catch(a){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[751],{983:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getTestReqInfo:function(){return g},withRequest:function(){return f}});let d=new(c(5521)).AsyncLocalStorage;function e(a,b){let c=b.header(a,"next-test-proxy-port");if(!c)return;let d=b.url(a);return{url:d,proxyPort:Number(c),testData:b.header(a,"next-test-data")||""}}function f(a,b,c){let f=e(a,b);return f?d.run(f,c):c()}function g(a,b){let c=d.getStore();return c||(a&&b?e(a,b):void 0)}},2591:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{interceptTestApis:function(){return f},wrapRequestHandler:function(){return g}});let d=c(983),e=c(4186);function f(){return(0,e.interceptFetch)(c.g.fetch)}function g(a){return(b,c)=>(0,d.withRequest)(b,e.reader,()=>a(b,c))}},2851:a=>{a.exports=function(a){return a&&a.__esModule?a:{default:a}},a.exports.__esModule=!0,a.exports.default=a.exports},2900:(a,b,c)=>{"use strict";let d,e,f,g,h;c.r(b),c.d(b,{default:()=>e7});var i,j,k={};async function l(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}c.r(k),c.d(k,{config:()=>e_,default:()=>e3,middleware:()=>e1,proxy:()=>e2});let m=null;async function n(){if("phase-production-build"===process.env.NEXT_PHASE)return;m||(m=l());let a=await m;if(null==a?void 0:a.register)try{await a.register()}catch(a){throw a.message=`An error occurred while loading instrumentation hook: ${a.message}`,a}}async function o(...a){let b=await l();try{var c;await (null==b||null==(c=b.onRequestError)?void 0:c.call(b,...a))}catch(a){console.error("Error in instrumentation.onRequestError:",a)}}let p=null;function q(){return p||(p=n()),p}function r(a){return`The edge runtime does not support Node.js '${a}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==c.g.process&&(process.env=c.g.process.env,c.g.process=process);try{Object.defineProperty(globalThis,"__import_unsupported",{value:function(a){let b=new Proxy(function(){},{get(b,c){if("then"===c)return{};throw Object.defineProperty(Error(r(a)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},construct(){throw Object.defineProperty(Error(r(a)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},apply(c,d,e){if("function"==typeof e[0])return e[0](b);throw Object.defineProperty(Error(r(a)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}});return new Proxy({},{get:()=>b})},enumerable:!1,configurable:!1})}catch{}q();class s extends Error{constructor({page:a}){super(`The middleware "${a}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class t extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class u extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}let v="_N_T_",w={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function x(a){var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}function y(a){let b={},c=[];if(a)for(let[d,e]of a.entries())"set-cookie"===d.toLowerCase()?(c.push(...x(e)),b[d]=1===c.length?c[0]:c):b[d]=e;return b}function z(a){try{return String(new URL(String(a)))}catch(b){throw Object.defineProperty(Error(`URL is malformed "${String(a)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:b}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}({...w,GROUP:{builtinReact:[w.reactServerComponents,w.actionBrowser],serverOnly:[w.reactServerComponents,w.actionBrowser,w.instrument,w.middleware],neutralTarget:[w.apiNode,w.apiEdge],clientOnly:[w.serverSideRendering,w.appPagesBrowser],bundled:[w.reactServerComponents,w.actionBrowser,w.serverSideRendering,w.appPagesBrowser,w.shared,w.instrument,w.middleware],appPages:[w.reactServerComponents,w.serverSideRendering,w.appPagesBrowser,w.actionBrowser]}});let A=Symbol("response"),B=Symbol("passThrough"),C=Symbol("waitUntil");class D{constructor(a,b){this[B]=!1,this[C]=b?{kind:"external",function:b}:{kind:"internal",promises:[]}}respondWith(a){this[A]||(this[A]=Promise.resolve(a))}passThroughOnException(){this[B]=!0}waitUntil(a){if("external"===this[C].kind)return(0,this[C].function)(a);this[C].promises.push(a)}}class E extends D{constructor(a){var b;super(a.request,null==(b=a.context)?void 0:b.waitUntil),this.sourcePage=a.page}get request(){throw Object.defineProperty(new s({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new s({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}function F(a){return a.replace(/\/$/,"")||"/"}function G(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}function H(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:d,hash:e}=G(a);return""+b+c+d+e}function I(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:d,hash:e}=G(a);return""+c+b+d+e}function J(a,b){if("string"!=typeof a)return!1;let{pathname:c}=G(a);return c===b||c.startsWith(b+"/")}let K=new WeakMap;function L(a,b){let c;if(!b)return{pathname:a};let d=K.get(b);d||(d=b.map(a=>a.toLowerCase()),K.set(b,d));let e=a.split("/",2);if(!e[1])return{pathname:a};let f=e[1].toLowerCase(),g=d.indexOf(f);return g<0?{pathname:a}:(c=b[g],{pathname:a=a.slice(c.length+1)||"/",detectedLocale:c})}let M=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function N(a,b){return new URL(String(a).replace(M,"localhost"),b&&String(b).replace(M,"localhost"))}let O=Symbol("NextURLInternal");class P{constructor(a,b,c){let d,e;"object"==typeof b&&"pathname"in b||"string"==typeof b?(d=b,e=c||{}):e=c||b||{},this[O]={url:N(a,d??e.base),options:e,basePath:""},this.analyze()}analyze(){var a,b,c,d,e;let f=function(a,b){var c,d;let{basePath:e,i18n:f,trailingSlash:g}=null!=(c=b.nextConfig)?c:{},h={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):g};e&&J(h.pathname,e)&&(h.pathname=function(a,b){if(!J(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:"/"+c}(h.pathname,e),h.basePath=e);let i=h.pathname;if(h.pathname.startsWith("/_next/data/")&&h.pathname.endsWith(".json")){let a=h.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");h.buildId=a[0],i="index"!==a[1]?"/"+a.slice(1).join("/"):"/",!0===b.parseData&&(h.pathname=i)}if(f){let a=b.i18nProvider?b.i18nProvider.analyze(h.pathname):L(h.pathname,f.locales);h.locale=a.detectedLocale,h.pathname=null!=(d=a.pathname)?d:h.pathname,!a.detectedLocale&&h.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(i):L(i,f.locales)).detectedLocale&&(h.locale=a.detectedLocale)}return h}(this[O].url.pathname,{nextConfig:this[O].options.nextConfig,parseData:!0,i18nProvider:this[O].options.i18nProvider}),g=function(a,b){let c;if((null==b?void 0:b.host)&&!Array.isArray(b.host))c=b.host.toString().split(":",1)[0];else{if(!a.hostname)return;c=a.hostname}return c.toLowerCase()}(this[O].url,this[O].options.headers);this[O].domainLocale=this[O].options.i18nProvider?this[O].options.i18nProvider.detectDomainLocale(g):function(a,b,c){if(a)for(let f of(c&&(c=c.toLowerCase()),a)){var d,e;if(b===(null==(d=f.domain)?void 0:d.split(":",1)[0].toLowerCase())||c===f.defaultLocale.toLowerCase()||(null==(e=f.locales)?void 0:e.some(a=>a.toLowerCase()===c)))return f}}(null==(b=this[O].options.nextConfig)||null==(a=b.i18n)?void 0:a.domains,g);let h=(null==(c=this[O].domainLocale)?void 0:c.defaultLocale)||(null==(e=this[O].options.nextConfig)||null==(d=e.i18n)?void 0:d.defaultLocale);this[O].url.pathname=f.pathname,this[O].defaultLocale=h,this[O].basePath=f.basePath??"",this[O].buildId=f.buildId,this[O].locale=f.locale??h,this[O].trailingSlash=f.trailingSlash}formatPathname(){var a;let b;return b=function(a,b,c,d){if(!b||b===c)return a;let e=a.toLowerCase();return!d&&(J(e,"/api")||J(e,"/"+b.toLowerCase()))?a:H(a,"/"+b)}((a={basePath:this[O].basePath,buildId:this[O].buildId,defaultLocale:this[O].options.forceLocale?void 0:this[O].defaultLocale,locale:this[O].locale,pathname:this[O].url.pathname,trailingSlash:this[O].trailingSlash}).pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix),(a.buildId||!a.trailingSlash)&&(b=F(b)),a.buildId&&(b=I(H(b,"/_next/data/"+a.buildId),"/"===a.pathname?"index.json":".json")),b=H(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:I(b,"/"):F(b)}formatSearch(){return this[O].url.search}get buildId(){return this[O].buildId}set buildId(a){this[O].buildId=a}get locale(){return this[O].locale??""}set locale(a){var b,c;if(!this[O].locale||!(null==(c=this[O].options.nextConfig)||null==(b=c.i18n)?void 0:b.locales.includes(a)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${a}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[O].locale=a}get defaultLocale(){return this[O].defaultLocale}get domainLocale(){return this[O].domainLocale}get searchParams(){return this[O].url.searchParams}get host(){return this[O].url.host}set host(a){this[O].url.host=a}get hostname(){return this[O].url.hostname}set hostname(a){this[O].url.hostname=a}get port(){return this[O].url.port}set port(a){this[O].url.port=a}get protocol(){return this[O].url.protocol}set protocol(a){this[O].url.protocol=a}get href(){let a=this.formatPathname(),b=this.formatSearch();return`${this.protocol}//${this.host}${a}${b}${this.hash}`}set href(a){this[O].url=N(a),this.analyze()}get origin(){return this[O].url.origin}get pathname(){return this[O].url.pathname}set pathname(a){this[O].url.pathname=a}get hash(){return this[O].url.hash}set hash(a){this[O].url.hash=a}get search(){return this[O].url.search}set search(a){this[O].url.search=a}get password(){return this[O].url.password}set password(a){this[O].url.password=a}get username(){return this[O].url.username}set username(a){this[O].url.username=a}get basePath(){return this[O].basePath}set basePath(a){this[O].basePath=a.startsWith("/")?a:`/${a}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new P(String(this),this[O].options)}}var Q=c(9186);let R=Symbol("internal request");class S extends Request{constructor(a,b={}){let c="string"!=typeof a&&"url"in a?a.url:String(a);z(c),a instanceof Request?super(a,b):super(c,b);let d=new P(c,{headers:y(this.headers),nextConfig:b.nextConfig});this[R]={cookies:new Q.RequestCookies(this.headers),nextUrl:d,url:d.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[R].cookies}get nextUrl(){return this[R].nextUrl}get page(){throw new t}get ua(){throw new u}get url(){return this[R].url}}class T{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}let U=Symbol("internal response"),V=new Set([301,302,303,307,308]);function W(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class X extends Response{constructor(a,b={}){super(a,b);let c=this.headers,d=new Proxy(new Q.ResponseCookies(c),{get(a,d,e){switch(d){case"delete":case"set":return(...e)=>{let f=Reflect.apply(a[d],a,e),g=new Headers(c);return f instanceof Q.ResponseCookies&&c.set("x-middleware-set-cookie",f.getAll().map(a=>(0,Q.stringifyCookie)(a)).join(",")),W(b,g),f};default:return T.get(a,d,e)}}});this[U]={cookies:d,url:b.url?new P(b.url,{headers:y(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[U].cookies}static json(a,b){let c=Response.json(a,b);return new X(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!V.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",z(a)),new X(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",z(a)),W(b,c),new X(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),W(a,b),new X(null,{...a,headers:b})}}function Y(a,b){let c="string"==typeof b?new URL(b):b,d=new URL(a,b),e=d.origin===c.origin;return{url:e?d.toString().slice(c.origin.length):d.toString(),isRelative:e}}let Z="next-router-prefetch",$=["rsc","next-router-state-tree",Z,"next-hmr-refresh","next-router-segment-prefetch"],_="_rsc";class aa extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new aa}}class ab extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return T.get(b,c,d);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==f)return T.get(b,f,d)},set(b,c,d,e){if("symbol"==typeof c)return T.set(b,c,d,e);let f=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===f);return T.set(b,g??c,d,e)},has(b,c){if("symbol"==typeof c)return T.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&T.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return T.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||T.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return aa.callable;default:return T.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new ab(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}let ac=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class ad{disable(){throw ac}getStore(){}run(){throw ac}exit(){throw ac}enterWith(){throw ac}static bind(a){return a}}let ae="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function af(){return ae?new ae:new ad}let ag=af();class ah extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new ah}}class ai{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return ah.callable;default:return T.get(a,b,c)}}})}}let aj=Symbol.for("next.mutated.cookies");class ak{static wrap(a,b){let c=new Q.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,f=()=>{let a=ag.getStore();if(a&&(a.pathWasRevalidated=!0),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new Q.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},g=new Proxy(c,{get(a,b,c){switch(b){case aj:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),g}finally{f()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),g}finally{f()}};default:return T.get(a,b,c)}}});return g}}function al(a,b){if("action"!==a.phase)throw new ah}var am=function(a){return a.handleRequest="BaseServer.handleRequest",a.run="BaseServer.run",a.pipe="BaseServer.pipe",a.getStaticHTML="BaseServer.getStaticHTML",a.render="BaseServer.render",a.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",a.renderToResponse="BaseServer.renderToResponse",a.renderToHTML="BaseServer.renderToHTML",a.renderError="BaseServer.renderError",a.renderErrorToResponse="BaseServer.renderErrorToResponse",a.renderErrorToHTML="BaseServer.renderErrorToHTML",a.render404="BaseServer.render404",a}(am||{}),an=function(a){return a.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",a.loadComponents="LoadComponents.loadComponents",a}(an||{}),ao=function(a){return a.getRequestHandler="NextServer.getRequestHandler",a.getServer="NextServer.getServer",a.getServerRequestHandler="NextServer.getServerRequestHandler",a.createServer="createServer.createServer",a}(ao||{}),ap=function(a){return a.compression="NextNodeServer.compression",a.getBuildId="NextNodeServer.getBuildId",a.createComponentTree="NextNodeServer.createComponentTree",a.clientComponentLoading="NextNodeServer.clientComponentLoading",a.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",a.generateStaticRoutes="NextNodeServer.generateStaticRoutes",a.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",a.generatePublicRoutes="NextNodeServer.generatePublicRoutes",a.generateImageRoutes="NextNodeServer.generateImageRoutes.route",a.sendRenderResult="NextNodeServer.sendRenderResult",a.proxyRequest="NextNodeServer.proxyRequest",a.runApi="NextNodeServer.runApi",a.render="NextNodeServer.render",a.renderHTML="NextNodeServer.renderHTML",a.imageOptimizer="NextNodeServer.imageOptimizer",a.getPagePath="NextNodeServer.getPagePath",a.getRoutesManifest="NextNodeServer.getRoutesManifest",a.findPageComponents="NextNodeServer.findPageComponents",a.getFontManifest="NextNodeServer.getFontManifest",a.getServerComponentManifest="NextNodeServer.getServerComponentManifest",a.getRequestHandler="NextNodeServer.getRequestHandler",a.renderToHTML="NextNodeServer.renderToHTML",a.renderError="NextNodeServer.renderError",a.renderErrorToHTML="NextNodeServer.renderErrorToHTML",a.render404="NextNodeServer.render404",a.startResponse="NextNodeServer.startResponse",a.route="route",a.onProxyReq="onProxyReq",a.apiResolver="apiResolver",a.internalFetch="internalFetch",a}(ap||{}),aq=function(a){return a.startServer="startServer.startServer",a}(aq||{}),ar=function(a){return a.getServerSideProps="Render.getServerSideProps",a.getStaticProps="Render.getStaticProps",a.renderToString="Render.renderToString",a.renderDocument="Render.renderDocument",a.createBodyResult="Render.createBodyResult",a}(ar||{}),as=function(a){return a.renderToString="AppRender.renderToString",a.renderToReadableStream="AppRender.renderToReadableStream",a.getBodyResult="AppRender.getBodyResult",a.fetch="AppRender.fetch",a}(as||{}),at=function(a){return a.executeRoute="Router.executeRoute",a}(at||{}),au=function(a){return a.runHandler="Node.runHandler",a}(au||{}),av=function(a){return a.runHandler="AppRouteRouteHandlers.runHandler",a}(av||{}),aw=function(a){return a.generateMetadata="ResolveMetadata.generateMetadata",a.generateViewport="ResolveMetadata.generateViewport",a}(aw||{}),ax=function(a){return a.execute="Middleware.execute",a}(ax||{});let ay=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],az=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"];function aA(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}let{context:aB,propagation:aC,trace:aD,SpanStatusCode:aE,SpanKind:aF,ROOT_CONTEXT:aG}=d=c(3048);class aH extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}let aI=(a,b)=>{(function(a){return"object"==typeof a&&null!==a&&a instanceof aH})(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:aE.ERROR,message:null==b?void 0:b.message})),a.end()},aJ=new Map,aK=d.createContextKey("next.rootSpanId"),aL=0,aM={set(a,b,c){a.push({key:b,value:c})}};class aN{getTracerInstance(){return aD.getTracer("next.js","0.0.1")}getContext(){return aB}getTracePropagationData(){let a=aB.active(),b=[];return aC.inject(a,b,aM),b}getActiveScopeSpan(){return aD.getSpan(null==aB?void 0:aB.active())}withPropagatedContext(a,b,c){let d=aB.active();if(aD.getSpanContext(d))return b();let e=aC.extract(d,a,c);return aB.with(e,b)}trace(...a){var b;let[c,d,e]=a,{fn:f,options:g}="function"==typeof d?{fn:d,options:{}}:{fn:e,options:{...d}},h=g.spanName??c;if(!ay.includes(c)&&"1"!==process.env.NEXT_OTEL_VERBOSE||g.hideSpan)return f();let i=this.getSpanContext((null==g?void 0:g.parentSpan)??this.getActiveScopeSpan()),j=!1;i?(null==(b=aD.getSpanContext(i))?void 0:b.isRemote)&&(j=!0):(i=(null==aB?void 0:aB.active())??aG,j=!0);let k=aL++;return g.attributes={"next.span_name":h,"next.span_type":c,...g.attributes},aB.with(i.setValue(aK,k),()=>this.getTracerInstance().startActiveSpan(h,g,a=>{let b="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,d=()=>{aJ.delete(k),b&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&az.includes(c||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(c.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:b,end:performance.now()})};j&&aJ.set(k,new Map(Object.entries(g.attributes??{})));try{if(f.length>1)return f(a,b=>aI(a,b));let b=f(a);if(aA(b))return b.then(b=>(a.end(),b)).catch(b=>{throw aI(a,b),b}).finally(d);return a.end(),d(),b}catch(b){throw aI(a,b),d(),b}}))}wrap(...a){let b=this,[c,d,e]=3===a.length?a:[a[0],{},a[1]];return ay.includes(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof e&&(a=a.apply(this,arguments));let f=arguments.length-1,g=arguments[f];if("function"!=typeof g)return b.trace(c,a,()=>e.apply(this,arguments));{let d=b.getContext().bind(aB.active(),g);return b.trace(c,a,(a,b)=>(arguments[f]=function(a){return null==b||b(a),d.apply(this,arguments)},e.apply(this,arguments)))}}:e}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?aD.setSpan(aB.active(),a):void 0}getRootSpanAttributes(){let a=aB.active().getValue(aK);return aJ.get(a)}setRootSpanAttribute(a,b){let c=aB.active().getValue(aK),d=aJ.get(c);d&&d.set(a,b)}}let aO=(()=>{let a=new aN;return()=>a})(),aP="__prerender_bypass";Symbol("__next_preview_data"),Symbol(aP);class aQ{constructor(a,b,c,d){var e;let f=a&&function(a,b){let c=ab.from(a.headers);return{isOnDemandRevalidate:c.get("x-prerender-revalidate")===b.previewModeId,revalidateOnlyGenerated:c.has("x-prerender-revalidate-if-generated")}}(b,a).isOnDemandRevalidate,g=null==(e=c.get(aP))?void 0:e.value;this._isEnabled=!!(!f&&g&&a&&g===a.previewModeId),this._previewModeId=null==a?void 0:a.previewModeId,this._mutableCookies=d}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:aP,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:aP,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function aR(a,b){if("x-middleware-set-cookie"in a.headers&&"string"==typeof a.headers["x-middleware-set-cookie"]){let c=a.headers["x-middleware-set-cookie"],d=new Headers;for(let a of x(c))d.append("set-cookie",a);for(let a of new Q.ResponseCookies(d).getAll())b.set(a)}}let aS=af();var aT=c(3868),aU=c.n(aT);class aV extends Error{constructor(a,b){super("Invariant: "+(a.endsWith(".")?a:a+".")+" This is a bug in Next.js.",b),this.name="InvariantError"}}class aW{constructor(a,b,c){this.prev=null,this.next=null,this.key=a,this.data=b,this.size=c}}class aX{constructor(){this.prev=null,this.next=null}}class aY{constructor(a,b){this.cache=new Map,this.totalSize=0,this.maxSize=a,this.calculateSize=b,this.head=new aX,this.tail=new aX,this.head.next=this.tail,this.tail.prev=this.head}addToHead(a){a.prev=this.head,a.next=this.head.next,this.head.next.prev=a,this.head.next=a}removeNode(a){a.prev.next=a.next,a.next.prev=a.prev}moveToHead(a){this.removeNode(a),this.addToHead(a)}removeTail(){let a=this.tail.prev;return this.removeNode(a),a}set(a,b){let c=(null==this.calculateSize?void 0:this.calculateSize.call(this,b))??1;if(c>this.maxSize)return void console.warn("Single item size exceeds maxSize");let d=this.cache.get(a);if(d)d.data=b,this.totalSize=this.totalSize-d.size+c,d.size=c,this.moveToHead(d);else{let d=new aW(a,b,c);this.cache.set(a,d),this.addToHead(d),this.totalSize+=c}for(;this.totalSize>this.maxSize&&this.cache.size>0;){let a=this.removeTail();this.cache.delete(a.key),this.totalSize-=a.size}}has(a){return this.cache.has(a)}get(a){let b=this.cache.get(a);if(b)return this.moveToHead(b),b.data}*[Symbol.iterator](){let a=this.head.next;for(;a&&a!==this.tail;){let b=a;yield[b.key,b.data],a=a.next}}remove(a){let b=this.cache.get(a);b&&(this.removeNode(b),this.cache.delete(a),this.totalSize-=b.size)}get size(){return this.cache.size}get currentSize(){return this.totalSize}}c(5356).Buffer,new aY(0x3200000,a=>a.size),process.env.NEXT_PRIVATE_DEBUG_CACHE&&console.debug.bind(console,"DefaultCacheHandler:"),process.env.NEXT_PRIVATE_DEBUG_CACHE&&((a,...b)=>{console.log(`use-cache: ${a}`,...b)}),Symbol.for("@next/cache-handlers");let aZ=Symbol.for("@next/cache-handlers-map"),a$=Symbol.for("@next/cache-handlers-set"),a_=globalThis;function a0(){if(a_[aZ])return a_[aZ].entries()}async function a1(a,b){if(!a)return b();let c=a2(a);try{return await b()}finally{let b=function(a,b){let c=new Set(a.pendingRevalidatedTags),d=new Set(a.pendingRevalidateWrites);return{pendingRevalidatedTags:b.pendingRevalidatedTags.filter(a=>!c.has(a)),pendingRevalidates:Object.fromEntries(Object.entries(b.pendingRevalidates).filter(([b])=>!(b in a.pendingRevalidates))),pendingRevalidateWrites:b.pendingRevalidateWrites.filter(a=>!d.has(a))}}(c,a2(a));await a4(a,b)}}function a2(a){return{pendingRevalidatedTags:a.pendingRevalidatedTags?[...a.pendingRevalidatedTags]:[],pendingRevalidates:{...a.pendingRevalidates},pendingRevalidateWrites:a.pendingRevalidateWrites?[...a.pendingRevalidateWrites]:[]}}async function a3(a,b){if(0===a.length)return;let c=[];b&&c.push(b.revalidateTag(a));let d=function(){if(a_[a$])return a_[a$].values()}();if(d)for(let b of d)c.push(b.expireTags(...a));await Promise.all(c)}async function a4(a,b){let c=(null==b?void 0:b.pendingRevalidatedTags)??a.pendingRevalidatedTags??[],d=(null==b?void 0:b.pendingRevalidates)??a.pendingRevalidates??{},e=(null==b?void 0:b.pendingRevalidateWrites)??a.pendingRevalidateWrites??[];return Promise.all([a3(c,a.incrementalCache),...Object.values(d),...e])}let a5=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a6{disable(){throw a5}getStore(){}run(){throw a5}exit(){throw a5}enterWith(){throw a5}static bind(a){return a}}let a7="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage,a8=a7?new a7:new a6;class a9{constructor({waitUntil:a,onClose:b,onTaskError:c}){this.workUnitStores=new Set,this.waitUntil=a,this.onClose=b,this.onTaskError=c,this.callbackQueue=new(aU()),this.callbackQueue.pause()}after(a){if(aA(a))this.waitUntil||ba(),this.waitUntil(a.catch(a=>this.reportTaskError("promise",a)));else if("function"==typeof a)this.addCallback(a);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(a){var b;this.waitUntil||ba();let c=aS.getStore();c&&this.workUnitStores.add(c);let d=a8.getStore(),e=d?d.rootTaskSpawnPhase:null==c?void 0:c.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let f=(b=async()=>{try{await a8.run({rootTaskSpawnPhase:e},()=>a())}catch(a){this.reportTaskError("function",a)}},a7?a7.bind(b):a6.bind(b));this.callbackQueue.add(f)}async runCallbacksOnClose(){return await new Promise(a=>this.onClose(a)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let a of this.workUnitStores)a.phase="after";let a=ag.getStore();if(!a)throw Object.defineProperty(new aV("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return a1(a,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(a,b){if(console.error("promise"===a?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",b),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,b)}catch(a){console.error(Object.defineProperty(new aV("`onTaskError` threw while handling an error thrown from an `after` task",{cause:a}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function ba(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function bb(a){let b,c={then:(d,e)=>(b||(b=a()),b.then(a=>{c.value=a}).catch(()=>{}),b.then(d,e))};return c}class bc{onClose(a){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",a),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function bd(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}let be=Symbol.for("@next/request-context");async function bf(a,b,c){let d=[],e=c&&c.size>0;for(let b of(a=>{let b=["/layout"];if(a.startsWith("/")){let c=a.split("/");for(let a=1;a<c.length+1;a++){let d=c.slice(0,a).join("/");d&&(d.endsWith("/page")||d.endsWith("/route")||(d=`${d}${!d.endsWith("/")?"/":""}layout`),b.push(d))}}return b})(a))b=`${v}${b}`,d.push(b);if(b.pathname&&!e){let a=`${v}${b.pathname}`;d.push(a)}return{tags:d,expirationsByCacheKind:function(a){let b=new Map,c=a0();if(c)for(let[d,e]of c)"getExpiration"in e&&b.set(d,bb(async()=>e.getExpiration(...a)));return b}(d)}}class bg extends S{constructor(a){super(a.input,a.init),this.sourcePage=a.page}get request(){throw Object.defineProperty(new s({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new s({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new s({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let bh={keys:a=>Array.from(a.keys()),get:(a,b)=>a.get(b)??void 0},bi=(a,b)=>aO().withPropagatedContext(a.headers,b,bh),bj=!1;async function bk(a){var b;let d,e;if(!bj&&(bj=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:a,wrapRequestHandler:b}=c(2591);a(),bi=b(bi)}await q();let f=void 0!==globalThis.__BUILD_MANIFEST;a.request.url=a.request.url.replace(/\.rsc($|\?)/,"$1");let g=a.bypassNextUrl?new URL(a.request.url):new P(a.request.url,{headers:a.request.headers,nextConfig:a.request.nextConfig});for(let a of[...g.searchParams.keys()]){let b=g.searchParams.getAll(a),c=function(a){for(let b of["nxtP","nxtI"])if(a!==b&&a.startsWith(b))return a.substring(b.length);return null}(a);if(c){for(let a of(g.searchParams.delete(c),b))g.searchParams.append(c,a);g.searchParams.delete(a)}}let h=process.env.__NEXT_BUILD_ID||"";"buildId"in g&&(h=g.buildId||"",g.buildId="");let i=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))for(let a of Array.isArray(d)?d:[d])void 0!==a&&("number"==typeof a&&(a=a.toString()),b.append(c,a));return b}(a.request.headers),j=i.has("x-nextjs-data"),k="1"===i.get("rsc");j&&"/index"===g.pathname&&(g.pathname="/");let l=new Map;if(!f)for(let a of $){let b=i.get(a);null!==b&&(l.set(a,b),i.delete(a))}let m=g.searchParams.get(_),n=new bg({page:a.page,input:(function(a){let b="string"==typeof a,c=b?new URL(a):a;return c.searchParams.delete(_),b?c.toString():c})(g).toString(),init:{body:a.request.body,headers:i,method:a.request.method,nextConfig:a.request.nextConfig,signal:a.request.signal}});j&&Object.defineProperty(n,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&a.IncrementalCache&&(globalThis.__incrementalCache=new a.IncrementalCache({CurCacheHandler:a.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:a.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:bd()})}));let o=a.request.waitUntil??(null==(b=function(){let a=globalThis[be];return null==a?void 0:a.get()}())?void 0:b.waitUntil),p=new E({request:n,page:a.page,context:o?{waitUntil:o}:void 0});if((d=await bi(n,()=>{if("/middleware"===a.page||"/src/middleware"===a.page){let b=p.waitUntil.bind(p),c=new bc;return aO().trace(ax.execute,{spanName:`middleware ${n.method} ${n.nextUrl.pathname}`,attributes:{"http.target":n.nextUrl.pathname,"http.method":n.method}},async()=>{try{var d,f,g,i,j,k;let l=bd(),m=await bf("/",n.nextUrl,null),o=(j=n.nextUrl,k=a=>{e=a},function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){c&&c.setHeader("Set-Cookie",a)}let n={};return{type:"request",phase:a,implicitTags:f,url:{pathname:d.pathname,search:d.search??""},rootParams:e,get headers(){return n.headers||(n.headers=function(a){let b=ab.from(a);for(let a of $)b.delete(a);return ab.seal(b)}(b.headers)),n.headers},get cookies(){if(!n.cookies){let a=new Q.RequestCookies(ab.from(b.headers));aR(b,a),n.cookies=ai.seal(a)}return n.cookies},set cookies(value){n.cookies=value},get mutableCookies(){if(!n.mutableCookies){let a=function(a,b){let c=new Q.RequestCookies(ab.from(a));return ak.wrap(c,b)}(b.headers,g||(c?m:void 0));aR(b,a),n.mutableCookies=a}return n.mutableCookies},get userspaceMutableCookies(){return n.userspaceMutableCookies||(n.userspaceMutableCookies=function(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return al(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return al(a,"cookies().set"),c.set(...d),b};default:return T.get(c,d,e)}}});return b}(this)),n.userspaceMutableCookies},get draftMode(){return n.draftMode||(n.draftMode=new aQ(i,b,this.cookies,this.mutableCookies)),n.draftMode},renderResumeDataCache:h??null,isHmrRefresh:j,serverComponentsHmrCache:k||globalThis.__serverComponentsHmrCache,devFallbackParams:null}}("action",n,void 0,j,{},m,k,void 0,l,!1,void 0,null)),q=function({page:a,renderOpts:b,isPrefetchRequest:c,buildId:d,previouslyRevalidatedTags:e}){var f;let g=!b.shouldWaitOnAllReady&&!b.supportsDynamicResponse&&!b.isDraftMode&&!b.isPossibleServerAction,h=b.dev??!1,i=h||g&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),j={isStaticGeneration:g,page:a,route:(f=a.split("/").reduce((a,b,c,d)=>b?"("===b[0]&&b.endsWith(")")||"@"===b[0]||("page"===b||"route"===b)&&c===d.length-1?a:a+"/"+b:a,"")).startsWith("/")?f:"/"+f,incrementalCache:b.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:b.cacheLifeProfiles,isRevalidate:b.isRevalidate,isBuildTimePrerendering:b.nextExport,hasReadableErrorStacks:b.hasReadableErrorStacks,fetchCache:b.fetchCache,isOnDemandRevalidate:b.isOnDemandRevalidate,isDraftMode:b.isDraftMode,isPrefetchRequest:c,buildId:d,reactLoadableManifest:(null==b?void 0:b.reactLoadableManifest)||{},assetPrefix:(null==b?void 0:b.assetPrefix)||"",afterContext:function(a){let{waitUntil:b,onClose:c,onAfterTaskError:d}=a;return new a9({waitUntil:b,onClose:c,onTaskError:d})}(b),cacheComponentsEnabled:b.experimental.cacheComponents,dev:h,previouslyRevalidatedTags:e,refreshTagsByCacheKind:function(){let a=new Map,b=a0();if(b)for(let[c,d]of b)"refreshTags"in d&&a.set(c,bb(async()=>d.refreshTags()));return a}(),runInCleanSnapshot:a7?a7.snapshot():function(a,...b){return a(...b)},shouldTrackFetchMetrics:i};return b.store=j,j}({page:"/",renderOpts:{cacheLifeProfiles:null==(f=a.request.nextConfig)||null==(d=f.experimental)?void 0:d.cacheLife,experimental:{isRoutePPREnabled:!1,cacheComponents:!1,authInterrupts:!!(null==(i=a.request.nextConfig)||null==(g=i.experimental)?void 0:g.authInterrupts)},supportsDynamicResponse:!0,waitUntil:b,onClose:c.onClose.bind(c),onAfterTaskError:void 0},isPrefetchRequest:"1"===n.headers.get(Z),buildId:h??"",previouslyRevalidatedTags:[]});return await ag.run(q,()=>aS.run(o,a.handler,n,p))}finally{setTimeout(()=>{c.dispatchClose()},0)}})}return a.handler(n,p)}))&&!(d instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});d&&e&&d.headers.set("set-cookie",e);let r=null==d?void 0:d.headers.get("x-middleware-rewrite");if(d&&r&&(k||!f)){let b=new P(r,{forceLocale:!0,headers:a.request.headers,nextConfig:a.request.nextConfig});f||b.host!==n.nextUrl.host||(b.buildId=h||b.buildId,d.headers.set("x-middleware-rewrite",String(b)));let{url:c,isRelative:e}=Y(b.toString(),g.toString());!f&&j&&d.headers.set("x-nextjs-rewrite",c),k&&e&&(g.pathname!==b.pathname&&d.headers.set("x-nextjs-rewritten-path",b.pathname),g.search!==b.search&&d.headers.set("x-nextjs-rewritten-query",b.search.slice(1)))}if(d&&r&&k&&m){let a=new URL(r);a.searchParams.has(_)||(a.searchParams.set(_,m),d.headers.set("x-middleware-rewrite",a.toString()))}let s=null==d?void 0:d.headers.get("Location");if(d&&s&&!f){let b=new P(s,{forceLocale:!1,headers:a.request.headers,nextConfig:a.request.nextConfig});d=new Response(d.body,d),b.host===g.host&&(b.buildId=h||b.buildId,d.headers.set("Location",b.toString())),j&&(d.headers.delete("Location"),d.headers.set("x-nextjs-redirect",Y(b.toString(),g.toString()).url))}let t=d||X.next(),u=t.headers.get("x-middleware-override-headers"),v=[];if(u){for(let[a,b]of l)t.headers.set(`x-middleware-request-${a}`,b),v.push(a);v.length>0&&t.headers.set("x-middleware-override-headers",u+","+v.join(","))}return{response:t,waitUntil:("internal"===p[C].kind?Promise.all(p[C].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:n.fetchMetrics}}c(9082),"undefined"==typeof URLPattern||URLPattern;var bl=c(4949);if(new WeakMap,bl.unstable_postpone,!1===function(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}("Route %%% needs to bail out of prerendering at this point because it used ^^^. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error"))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at __next_root_layout_boundary__ \\([^\\n]*\\)`),RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`),af();let{env:bm,stdout:bn}=(null==(bx=globalThis)?void 0:bx.process)??{},bo=bm&&!bm.NO_COLOR&&(bm.FORCE_COLOR||(null==bn?void 0:bn.isTTY)&&!bm.CI&&"dumb"!==bm.TERM),bp=(a,b,c,d)=>{let e=a.substring(0,d)+c,f=a.substring(d+b.length),g=f.indexOf(b);return~g?e+bp(f,b,c,g):e+f},bq=(a,b,c=a)=>bo?d=>{let e=""+d,f=e.indexOf(b,a.length);return~f?a+bp(e,b,c,f)+b:a+e+b}:String,br=bq("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m");bq("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),bq("\x1b[3m","\x1b[23m"),bq("\x1b[4m","\x1b[24m"),bq("\x1b[7m","\x1b[27m"),bq("\x1b[8m","\x1b[28m"),bq("\x1b[9m","\x1b[29m"),bq("\x1b[30m","\x1b[39m");let bs=bq("\x1b[31m","\x1b[39m"),bt=bq("\x1b[32m","\x1b[39m"),bu=bq("\x1b[33m","\x1b[39m");bq("\x1b[34m","\x1b[39m");let bv=bq("\x1b[35m","\x1b[39m");bq("\x1b[38;2;173;127;168m","\x1b[39m"),bq("\x1b[36m","\x1b[39m");let bw=bq("\x1b[37m","\x1b[39m");bq("\x1b[90m","\x1b[39m"),bq("\x1b[40m","\x1b[49m"),bq("\x1b[41m","\x1b[49m"),bq("\x1b[42m","\x1b[49m"),bq("\x1b[43m","\x1b[49m"),bq("\x1b[44m","\x1b[49m"),bq("\x1b[45m","\x1b[49m"),bq("\x1b[46m","\x1b[49m"),bq("\x1b[47m","\x1b[49m"),bw(br("")),bs(br("")),bu(br("")),bw(br(" ")),bt(br("")),bv(br("\xbb")),new aY(1e4,a=>a.length),new WeakMap;var bx,by,bz,bA,bB,bC=c(6809),bD=Object.create,bE=Object.defineProperty,bF=Object.getOwnPropertyDescriptor,bG=Object.getOwnPropertyNames,bH=Object.getPrototypeOf,bI=Object.prototype.hasOwnProperty,bJ=(a,b)=>bE(a,"name",{value:b,configurable:!0}),bK=(a,b)=>()=>(a&&(b=a(a=0)),b),bL=(a,b)=>()=>(b||a((b={exports:{}}).exports,b),b.exports),bM=(a,b)=>{for(var c in b)bE(a,c,{get:b[c],enumerable:!0})},bN=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of bG(b))bI.call(a,e)||e===c||bE(a,e,{get:()=>b[e],enumerable:!(d=bF(b,e))||d.enumerable});return a},bO=(a,b,c)=>(c=null!=a?bD(bH(a)):{},bN(!b&&a&&a.__esModule?c:bE(c,"default",{value:a,enumerable:!0}),a)),bP=a=>bN(bE({},"__esModule",{value:!0}),a),bQ=(a,b,c)=>((a,b,c)=>b in a?bE(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c)(a,"symbol"!=typeof b?b+"":b,c),bR=bL(a=>{bU(),a.byteLength=i,a.toByteArray=k,a.fromByteArray=n;var b,c,d=[],e=[],f="u">typeof Uint8Array?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(b=0,c=g.length;b<c;++b)d[b]=g[b],e[g.charCodeAt(b)]=b;function h(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}function i(a){var b=h(a),c=b[0],d=b[1];return(c+d)*3/4-d}function j(a,b,c){return(b+c)*3/4-c}function k(a){var b,c,d=h(a),g=d[0],i=d[1],k=new f(j(a,g,i)),l=0,m=i>0?g-4:g;for(c=0;c<m;c+=4)b=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],k[l++]=b>>16&255,k[l++]=b>>8&255,k[l++]=255&b;return 2===i&&(b=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,k[l++]=255&b),1===i&&(b=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,k[l++]=b>>8&255,k[l++]=255&b),k}function l(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}function m(a,b,c){for(var d=[],e=b;e<c;e+=3)d.push(l((a[e]<<16&0xff0000)+(a[e+1]<<8&65280)+(255&a[e+2])));return d.join("")}function n(a){for(var b,c=a.length,e=c%3,f=[],g=0,h=c-e;g<h;g+=16383)f.push(m(a,g,g+16383>h?h:g+16383));return 1===e?f.push(d[(b=a[c-1])>>2]+d[b<<4&63]+"=="):2===e&&f.push(d[(b=(a[c-2]<<8)+a[c-1])>>10]+d[b>>4&63]+d[b<<2&63]+"="),f.join("")}e[45]=62,e[95]=63,bJ(h,"getLens"),bJ(i,"byteLength"),bJ(j,"_byteLength"),bJ(k,"toByteArray"),bJ(l,"tripletToBase64"),bJ(m,"encodeChunk"),bJ(n,"fromByteArray")}),bS=bL(a=>{bU(),a.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},a.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}}),bT=bL(a=>{bU();var b=bR(),c=bS(),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function e(){try{let a=new Uint8Array(1),b={foo:bJ(function(){return 42},"foo")};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch{return!1}}function f(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,g.prototype),b}function g(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return h(a,b,c)}function h(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return n(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(ac(a,ArrayBuffer)||a&&ac(a.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(ac(a,SharedArrayBuffer)||a&&ac(a.buffer,SharedArrayBuffer)))return o(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return g.from(d,b,c);let e=p(a);if(e)return e;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return g.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function i(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function j(a,b,c){return i(a),a<=0?f(a):void 0!==b?"string"==typeof c?f(a).fill(b,c):f(a).fill(b):f(a)}function k(a){return i(a),f(a<0?0:0|q(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!g.isEncoding(b))throw TypeError("Unknown encoding: "+b);let c=0|s(a,b),d=f(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){let b=a.length<0?0:0|q(a.length),c=f(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a){if(ac(a,Uint8Array)){let b=new Uint8Array(a);return o(b.buffer,b.byteOffset,b.byteLength)}return m(a)}function o(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),g.prototype),d}function p(a){if(g.isBuffer(a)){let b=0|q(a.length),c=f(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||ad(a.length)?f(0):m(a):"Buffer"===a.type&&Array.isArray(a.data)?m(a.data):void 0}function q(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function r(a){return+a!=a&&(a=0),g.alloc(+a)}function s(a,b){if(g.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||ac(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return Z(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return aa(a).length;default:if(e)return d?-1:Z(a).length;b=(""+b).toLowerCase(),e=!0}}function t(a,b,c){let d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function v(a,b,c,d,e){if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),ad(c*=1)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0)if(!e)return -1;else c=0;if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:w(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):w(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function w(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(bJ(j,"read"),e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function x(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){let d=parseInt(b.substr(2*e,2),16);if(ad(d))break;a[c+e]=d}return e}function y(a,b,c,d){return ab(Z(b,a.length-c),a,c,d)}function z(a,b,c,d){return ab($(b),a,c,d)}function A(a,b,c,d){return ab(aa(b),a,c,d)}function B(a,b,c,d){return ab(_(b,a.length-c),a,c,d)}function C(a,c,d){return 0===c&&d===a.length?b.fromByteArray(a):b.fromByteArray(a.slice(c,d))}function D(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:(192&(c=a[e+1]))==128&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],(192&c)==128&&(192&d)==128&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],(192&c)==128&&(192&d)==128&&(192&h)==128&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}return E(d)}function E(a){let b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function F(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=ae[a[d]];return e}function I(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}function J(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function L(a,b,c,d,e){U(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function M(a,b,c,d,e){U(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function N(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function O(a,b,d,e,f){return b*=1,d>>>=0,f||N(a,b,d,4,34028234663852886e22,-34028234663852886e22),c.write(a,b,d,e,23,4),d+4}function P(a,b,d,e,f){return b*=1,d>>>=0,f||N(a,b,d,8,17976931348623157e292,-17976931348623157e292),c.write(a,b,d,e,52,8),d+8}a.Buffer=g,a.SlowBuffer=r,a.INSPECT_MAX_BYTES=50,a.kMaxLength=0x7fffffff,g.TYPED_ARRAY_SUPPORT=e(),!g.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),bJ(e,"typedArraySupport"),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:bJ(function(){if(g.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:bJ(function(){if(g.isBuffer(this))return this.byteOffset},"get")}),bJ(f,"createBuffer"),bJ(g,"Buffer"),g.poolSize=8192,bJ(h,"from"),g.from=function(a,b,c){return h(a,b,c)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),bJ(i,"assertSize"),bJ(j,"alloc"),g.alloc=function(a,b,c){return j(a,b,c)},bJ(k,"allocUnsafe"),g.allocUnsafe=function(a){return k(a)},g.allocUnsafeSlow=function(a){return k(a)},bJ(l,"fromString"),bJ(m,"fromArrayLike"),bJ(n,"fromArrayView"),bJ(o,"fromArrayBuffer"),bJ(p,"fromObject"),bJ(q,"checked"),bJ(r,"SlowBuffer"),g.isBuffer=bJ(function(a){return null!=a&&!0===a._isBuffer&&a!==g.prototype},"isBuffer"),g.compare=bJ(function(a,b){if(ac(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength)),ac(b,Uint8Array)&&(b=g.from(b,b.offset,b.byteLength)),!g.isBuffer(a)||!g.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},"compare"),g.isEncoding=bJ(function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),g.concat=bJ(function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;let d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(ac(b,Uint8Array))e+b.length>d.length?(g.isBuffer(b)||(b=g.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(g.isBuffer(b))b.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=b.length}return d},"concat"),bJ(s,"byteLength"),g.byteLength=s,bJ(t,"slowToString"),g.prototype._isBuffer=!0,bJ(u,"swap"),g.prototype.swap16=bJ(function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)u(this,b,b+1);return this},"swap16"),g.prototype.swap32=bJ(function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)u(this,b,b+3),u(this,b+1,b+2);return this},"swap32"),g.prototype.swap64=bJ(function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)u(this,b,b+7),u(this,b+1,b+6),u(this,b+2,b+5),u(this,b+3,b+4);return this},"swap64"),g.prototype.toString=bJ(function(){let a=this.length;return 0===a?"":0==arguments.length?D(this,0,a):t.apply(this,arguments)},"toString"),g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=bJ(function(a){if(!g.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},"equals"),g.prototype.inspect=bJ(function(){let b="",c=a.INSPECT_MAX_BYTES;return b=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(b+=" ... "),"<Buffer "+b+">"},"inspect"),d&&(g.prototype[d]=g.prototype.inspect),g.prototype.compare=bJ(function(a,b,c,d,e){if(ac(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength)),!g.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],h=k[a];break}return f<h?-1:+(h<f)},"compare"),bJ(v,"bidirectionalIndexOf"),bJ(w,"arrayIndexOf"),g.prototype.includes=bJ(function(a,b,c){return -1!==this.indexOf(a,b,c)},"includes"),g.prototype.indexOf=bJ(function(a,b,c){return v(this,a,b,c,!0)},"indexOf"),g.prototype.lastIndexOf=bJ(function(a,b,c){return v(this,a,b,c,!1)},"lastIndexOf"),bJ(x,"hexWrite"),bJ(y,"utf8Write"),bJ(z,"asciiWrite"),bJ(A,"base64Write"),bJ(B,"ucs2Write"),g.prototype.write=bJ(function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let f=!1;for(;;)switch(d){case"hex":return x(this,a,b,c);case"utf8":case"utf-8":return y(this,a,b,c);case"ascii":case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},"write"),g.prototype.toJSON=bJ(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),bJ(C,"base64Slice"),bJ(D,"utf8Slice"),bJ(E,"decodeCodePointsArray"),bJ(F,"asciiSlice"),bJ(G,"latin1Slice"),bJ(H,"hexSlice"),bJ(I,"utf16leSlice"),g.prototype.slice=bJ(function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,g.prototype),d},"slice"),bJ(J,"checkOffset"),g.prototype.readUintLE=g.prototype.readUIntLE=bJ(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},"readUIntLE"),g.prototype.readUintBE=g.prototype.readUIntBE=bJ(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},"readUIntBE"),g.prototype.readUint8=g.prototype.readUInt8=bJ(function(a,b){return a>>>=0,b||J(a,1,this.length),this[a]},"readUInt8"),g.prototype.readUint16LE=g.prototype.readUInt16LE=bJ(function(a,b){return a>>>=0,b||J(a,2,this.length),this[a]|this[a+1]<<8},"readUInt16LE"),g.prototype.readUint16BE=g.prototype.readUInt16BE=bJ(function(a,b){return a>>>=0,b||J(a,2,this.length),this[a]<<8|this[a+1]},"readUInt16BE"),g.prototype.readUint32LE=g.prototype.readUInt32LE=bJ(function(a,b){return a>>>=0,b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},"readUInt32LE"),g.prototype.readUint32BE=g.prototype.readUInt32BE=bJ(function(a,b){return a>>>=0,b||J(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},"readUInt32BE"),g.prototype.readBigUInt64LE=af(bJ(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&W(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))},"readBigUInt64LE")),g.prototype.readBigUInt64BE=af(bJ(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&W(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)},"readBigUInt64BE")),g.prototype.readIntLE=bJ(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},"readIntLE"),g.prototype.readIntBE=bJ(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},"readIntBE"),g.prototype.readInt8=bJ(function(a,b){return a>>>=0,b||J(a,1,this.length),128&this[a]?-((255-this[a]+1)*1):this[a]},"readInt8"),g.prototype.readInt16LE=bJ(function(a,b){a>>>=0,b||J(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},"readInt16LE"),g.prototype.readInt16BE=bJ(function(a,b){a>>>=0,b||J(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},"readInt16BE"),g.prototype.readInt32LE=bJ(function(a,b){return a>>>=0,b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},"readInt32LE"),g.prototype.readInt32BE=bJ(function(a,b){return a>>>=0,b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},"readInt32BE"),g.prototype.readBigInt64LE=af(bJ(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&W(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])},"readBigInt64LE")),g.prototype.readBigInt64BE=af(bJ(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&W(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)},"readBigInt64BE")),g.prototype.readFloatLE=bJ(function(a,b){return a>>>=0,b||J(a,4,this.length),c.read(this,a,!0,23,4)},"readFloatLE"),g.prototype.readFloatBE=bJ(function(a,b){return a>>>=0,b||J(a,4,this.length),c.read(this,a,!1,23,4)},"readFloatBE"),g.prototype.readDoubleLE=bJ(function(a,b){return a>>>=0,b||J(a,8,this.length),c.read(this,a,!0,52,8)},"readDoubleLE"),g.prototype.readDoubleBE=bJ(function(a,b){return a>>>=0,b||J(a,8,this.length),c.read(this,a,!1,52,8)},"readDoubleBE"),bJ(K,"checkInt"),g.prototype.writeUintLE=g.prototype.writeUIntLE=bJ(function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;K(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},"writeUIntLE"),g.prototype.writeUintBE=g.prototype.writeUIntBE=bJ(function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;K(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},"writeUIntBE"),g.prototype.writeUint8=g.prototype.writeUInt8=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,1,255,0),this[b]=255&a,b+1},"writeUInt8"),g.prototype.writeUint16LE=g.prototype.writeUInt16LE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},"writeUInt16LE"),g.prototype.writeUint16BE=g.prototype.writeUInt16BE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},"writeUInt16BE"),g.prototype.writeUint32LE=g.prototype.writeUInt32LE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},"writeUInt32LE"),g.prototype.writeUint32BE=g.prototype.writeUInt32BE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},"writeUInt32BE"),bJ(L,"wrtBigUInt64LE"),bJ(M,"wrtBigUInt64BE"),g.prototype.writeBigUInt64LE=af(bJ(function(a,b=0){return L(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),g.prototype.writeBigUInt64BE=af(bJ(function(a,b=0){return M(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),g.prototype.writeIntLE=bJ(function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);K(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},"writeIntLE"),g.prototype.writeIntBE=bJ(function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);K(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},"writeIntBE"),g.prototype.writeInt8=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},"writeInt8"),g.prototype.writeInt16LE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},"writeInt16LE"),g.prototype.writeInt16BE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},"writeInt16BE"),g.prototype.writeInt32LE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},"writeInt32LE"),g.prototype.writeInt32BE=bJ(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},"writeInt32BE"),g.prototype.writeBigInt64LE=af(bJ(function(a,b=0){return L(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),g.prototype.writeBigInt64BE=af(bJ(function(a,b=0){return M(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),bJ(N,"checkIEEE754"),bJ(O,"writeFloat"),g.prototype.writeFloatLE=bJ(function(a,b,c){return O(this,a,b,!0,c)},"writeFloatLE"),g.prototype.writeFloatBE=bJ(function(a,b,c){return O(this,a,b,!1,c)},"writeFloatBE"),bJ(P,"writeDouble"),g.prototype.writeDoubleLE=bJ(function(a,b,c){return P(this,a,b,!0,c)},"writeDoubleLE"),g.prototype.writeDoubleBE=bJ(function(a,b,c){return P(this,a,b,!1,c)},"writeDoubleBE"),g.prototype.copy=bJ(function(a,b,c,d){if(!g.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},"copy"),g.prototype.fill=bJ(function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=g.isBuffer(a)?a:g.from(a,d),h=f.length;if(0===h)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%h]}return this},"fill");var Q={};function R(a,b,c){var d;Q[a]=(bJ(d=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}\
]: ${this.message}`}},"NodeError"),d)}function S(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`\
_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function T(a,b,c){V(b,"offset"),(void 0===a[b]||void 0===a[b+c])&&W(b,a.length-(c+1))}function U(a,b,c,d,e,f){if(a>c||a<b){let d="bigint"==typeof b?"n":"",e;throw e=f>3?0===b||b===BigInt(0)?`>= 0${d} and < 2${d}\
 ** ${(f+1)*8}${d}`:`>= -(2${d} ** ${(f+1)*8-1}${d}) and < 2 ** ${(f+1)*8-1}${d}`:`>= ${b}${d} a\
nd <= ${c}${d}`,new Q.ERR_OUT_OF_RANGE("value",e,a)}T(d,e,f)}function V(a,b){if("number"!=typeof a)throw new Q.ERR_INVALID_ARG_TYPE(b,"number",a)}function W(a,b,c){throw Math.floor(a)!==a?(V(a,c),new Q.ERR_OUT_OF_RANGE(c||"offset","an integer",a)):b<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}bJ(R,"E"),R("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),R("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received typ\
e ${typeof b}`},TypeError),R("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out o\
f range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=S(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=S(e)),e+="n"),d+=` It must be ${b}. Re\
ceived ${e}`},RangeError),bJ(S,"addNumericalSeparator"),bJ(T,"checkBounds"),bJ(U,"checkIntBI"),bJ(V,"validateNumber"),bJ(W,"boundsError");var X=/[^+/0-9A-Za-z-_]/g;function Y(a){if((a=(a=a.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}function Z(a,b){b=b||1/0;let c,d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function $(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function _(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}function aa(a){return b.toByteArray(Y(a))}function ab(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function ac(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function ad(a){return a!=a}bJ(Y,"base64clean"),bJ(Z,"utf8ToBytes"),bJ($,"asciiToBytes"),bJ(_,"utf16leToBytes"),bJ(aa,"base64ToBytes"),bJ(ab,"blitBuffer"),bJ(ac,"isInstance"),bJ(ad,"numberIsNaN");var ae=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function af(a){return typeof BigInt>"u"?ag:a}function ag(){throw Error("BigInt not supported")}bJ(af,"defineBigIntMethod"),bJ(ag,"BufferBigIntNotDefined")}),bU=bK(()=>{by=globalThis,bz=globalThis.setImmediate??(a=>setTimeout(a,0)),globalThis.clearImmediate??(a=>clearTimeout(a)),bA="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:bT().Buffer,(bB=globalThis.process??{}).env??(bB.env={});try{bB.nextTick(()=>{})}catch{let a=Promise.resolve();bB.nextTick=a.then.bind(a)}}),bV=bL((a,b)=>{bU();var c,d="object"==typeof Reflect?Reflect:null,e=d&&"function"==typeof d.apply?d.apply:bJ(function(a,b,c){return Function.prototype.apply.call(a,b,c)},"ReflectApply");function f(a){console&&console.warn&&console.warn(a)}c=d&&"function"==typeof d.ownKeys?d.ownKeys:Object.getOwnPropertySymbols?bJ(function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))},"ReflectOwnKeys"):bJ(function(a){return Object.getOwnPropertyNames(a)},"ReflectOwnKeys"),bJ(f,"ProcessEmitWarning");var g=Number.isNaN||bJ(function(a){return a!=a},"NumberIsNaN");function h(){h.init.call(this)}bJ(h,"EventEmitter"),b.exports=h,b.exports.once=t,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var i=10;function j(a){if("function"!=typeof a)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function k(a){return void 0===a._maxListeners?h.defaultMaxListeners:a._maxListeners}function l(a,b,c,d){var e,g,h;if(j(c),void 0===(g=a._events)?(g=a._events=Object.create(null),a._eventsCount=0):(void 0!==g.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),g=a._events),h=g[b]),void 0===h)h=g[b]=c,++a._eventsCount;else if("function"==typeof h?h=g[b]=d?[c,h]:[h,c]:d?h.unshift(c):h.push(c),(e=k(a))>0&&h.length>e&&!h.warned){h.warned=!0;var i=Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=a,i.type=b,i.count=h.length,f(i)}return a}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function n(a,b,c){var d={fired:!1,wrapFn:void 0,target:a,type:b,listener:c},e=m.bind(d);return e.listener=c,d.wrapFn=e,e}function o(a,b,c){var d=a._events;if(void 0===d)return[];var e=d[b];return void 0===e?[]:"function"==typeof e?c?[e.listener||e]:[e]:c?s(e):q(e,e.length)}function p(a){var b=this._events;if(void 0!==b){var c=b[a];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function q(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function r(a,b){for(;b+1<a.length;b++)a[b]=a[b+1];a.pop()}function s(a){for(var b=Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];return b}function t(a,b){return new Promise(function(c,d){function e(c){a.removeListener(b,f),d(c)}function f(){"function"==typeof a.removeListener&&a.removeListener("error",e),c([].slice.call(arguments))}bJ(e,"errorListener"),bJ(f,"resolver"),v(a,b,f,{once:!0}),"error"!==b&&u(a,e,{once:!0})})}function u(a,b,c){"function"==typeof a.on&&v(a,"error",b,c)}function v(a,b,c,d){if("function"==typeof a.on)d.once?a.once(b,c):a.on(b,c);else if("function"==typeof a.addEventListener)a.addEventListener(b,bJ(function e(f){d.once&&a.removeEventListener(b,e),c(f)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}bJ(j,"checkListener"),Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:bJ(function(){return i},"get"),set:bJ(function(a){if("number"!=typeof a||a<0||g(a))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");i=a},"set")}),h.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=bJ(function(a){if("number"!=typeof a||a<0||g(a))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},"setMaxListeners"),bJ(k,"_getMaxListeners"),h.prototype.getMaxListeners=bJ(function(){return k(this)},"getMaxListeners"),h.prototype.emit=bJ(function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);var d="error"===a,f=this._events;if(void 0!==f)d=d&&void 0===f.error;else if(!d)return!1;if(d){if(b.length>0&&(g=b[0]),g instanceof Error)throw g;var g,h=Error("Unhandled error."+(g?" ("+g.message+")":""));throw h.context=g,h}var i=f[a];if(void 0===i)return!1;if("function"==typeof i)e(i,this,b);else for(var j=i.length,k=q(i,j),c=0;c<j;++c)e(k[c],this,b);return!0},"emit"),bJ(l,"_addListener"),h.prototype.addListener=bJ(function(a,b){return l(this,a,b,!1)},"addListener"),h.prototype.on=h.prototype.addListener,h.prototype.prependListener=bJ(function(a,b){return l(this,a,b,!0)},"prependListener"),bJ(m,"onceWrapper"),bJ(n,"_onceWrap"),h.prototype.once=bJ(function(a,b){return j(b),this.on(a,n(this,a,b)),this},"once"),h.prototype.prependOnceListener=bJ(function(a,b){return j(b),this.prependListener(a,n(this,a,b)),this},"prependOnceListener"),h.prototype.removeListener=bJ(function(a,b){var c,d,e,f,g;if(j(b),void 0===(d=this._events)||void 0===(c=d[a]))return this;if(c===b||c.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!=typeof c){for(e=-1,f=c.length-1;f>=0;f--)if(c[f]===b||c[f].listener===b){g=c[f].listener,e=f;break}if(e<0)return this;0===e?c.shift():r(c,e),1===c.length&&(d[a]=c[0]),void 0!==d.removeListener&&this.emit("removeListener",a,g||b)}return this},"removeListener"),h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=bJ(function(a){var b,c,d;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0==arguments.length){var e,f=Object.keys(c);for(d=0;d<f.length;++d)"removeListener"!==(e=f[d])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=c[a]))this.removeListener(a,b);else if(void 0!==b)for(d=b.length-1;d>=0;d--)this.removeListener(a,b[d]);return this},"removeAllListeners"),bJ(o,"_listeners"),h.prototype.listeners=bJ(function(a){return o(this,a,!0)},"listeners"),h.prototype.rawListeners=bJ(function(a){return o(this,a,!1)},"rawListeners"),h.listenerCount=function(a,b){return"function"==typeof a.listenerCount?a.listenerCount(b):p.call(a,b)},h.prototype.listenerCount=p,bJ(p,"listenerCount"),h.prototype.eventNames=bJ(function(){return this._eventsCount>0?c(this._events):[]},"eventNames"),bJ(q,"arrayClone"),bJ(r,"spliceOne"),bJ(s,"unwrapListeners"),bJ(t,"once"),bJ(u,"addErrorHandlerIfEventEmitter"),bJ(v,"eventTargetAgnosticAddListener")}),bW={};function bX(a){return 0}bM(bW,{Socket:()=>b_,isIP:()=>bX});var bY,bZ,b$,b_,b0=bK(()=>{bU(),bY=bO(bV(),1),bJ(bX,"isIP"),bZ=/^[^.]+\./,b$=class a extends bY.EventEmitter{constructor(){super(...arguments),bQ(this,"opts",{}),bQ(this,"connecting",!1),bQ(this,"pending",!0),bQ(this,"writable",!0),bQ(this,"encrypted",!1),bQ(this,"authorized",!1),bQ(this,"destroyed",!1),bQ(this,"ws",null),bQ(this,"writeBuffer"),bQ(this,"tlsState",0),bQ(this,"tlsRead"),bQ(this,"tlsWrite")}static get poolQueryViaFetch(){return a.opts.poolQueryViaFetch??a.defaults.poolQueryViaFetch}static set poolQueryViaFetch(b){a.opts.poolQueryViaFetch=b}static get fetchEndpoint(){return a.opts.fetchEndpoint??a.defaults.fetchEndpoint}static set fetchEndpoint(b){a.opts.fetchEndpoint=b}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(a){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return a.opts.fetchFunction??a.defaults.fetchFunction}static set fetchFunction(b){a.opts.fetchFunction=b}static get webSocketConstructor(){return a.opts.webSocketConstructor??a.defaults.webSocketConstructor}static set webSocketConstructor(b){a.opts.webSocketConstructor=b}get webSocketConstructor(){return this.opts.webSocketConstructor??a.webSocketConstructor}set webSocketConstructor(a){this.opts.webSocketConstructor=a}static get wsProxy(){return a.opts.wsProxy??a.defaults.wsProxy}static set wsProxy(b){a.opts.wsProxy=b}get wsProxy(){return this.opts.wsProxy??a.wsProxy}set wsProxy(a){this.opts.wsProxy=a}static get coalesceWrites(){return a.opts.coalesceWrites??a.defaults.coalesceWrites}static set coalesceWrites(b){a.opts.coalesceWrites=b}get coalesceWrites(){return this.opts.coalesceWrites??a.coalesceWrites}set coalesceWrites(a){this.opts.coalesceWrites=a}static get useSecureWebSocket(){return a.opts.useSecureWebSocket??a.defaults.useSecureWebSocket}static set useSecureWebSocket(b){a.opts.useSecureWebSocket=b}get useSecureWebSocket(){return this.opts.useSecureWebSocket??a.useSecureWebSocket}set useSecureWebSocket(a){this.opts.useSecureWebSocket=a}static get forceDisablePgSSL(){return a.opts.forceDisablePgSSL??a.defaults.forceDisablePgSSL}static set forceDisablePgSSL(b){a.opts.forceDisablePgSSL=b}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??a.forceDisablePgSSL}set forceDisablePgSSL(a){this.opts.forceDisablePgSSL=a}static get disableSNI(){return a.opts.disableSNI??a.defaults.disableSNI}static set disableSNI(b){a.opts.disableSNI=b}get disableSNI(){return this.opts.disableSNI??a.disableSNI}set disableSNI(a){this.opts.disableSNI=a}static get disableWarningInBrowsers(){return a.opts.disableWarningInBrowsers??a.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(b){a.opts.disableWarningInBrowsers=b}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??a.disableWarningInBrowsers}set disableWarningInBrowsers(a){this.opts.disableWarningInBrowsers=a}static get pipelineConnect(){return a.opts.pipelineConnect??a.defaults.pipelineConnect}static set pipelineConnect(b){a.opts.pipelineConnect=b}get pipelineConnect(){return this.opts.pipelineConnect??a.pipelineConnect}set pipelineConnect(a){this.opts.pipelineConnect=a}static get subtls(){return a.opts.subtls??a.defaults.subtls}static set subtls(b){a.opts.subtls=b}get subtls(){return this.opts.subtls??a.subtls}set subtls(a){this.opts.subtls=a}static get pipelineTLS(){return a.opts.pipelineTLS??a.defaults.pipelineTLS}static set pipelineTLS(b){a.opts.pipelineTLS=b}get pipelineTLS(){return this.opts.pipelineTLS??a.pipelineTLS}set pipelineTLS(a){this.opts.pipelineTLS=a}static get rootCerts(){return a.opts.rootCerts??a.defaults.rootCerts}static set rootCerts(b){a.opts.rootCerts=b}get rootCerts(){return this.opts.rootCerts??a.rootCerts}set rootCerts(a){this.opts.rootCerts=a}wsProxyAddrForHost(a,b){let c=this.wsProxy;if(void 0===c)throw Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return"function"==typeof c?c(a,b):`${c}?address=${a}:${b}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(a,b,c){this.connecting=!0,c&&this.once("connect",c);let d=bJ(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),e=bJ((a,b=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",a=>{this.emit("error",a),this.emit("close")}),a.addEventListener("message",a=>{if(0===this.tlsState){let b=bA.from(a.data);this.emit("data",b)}}),a.addEventListener("close",()=>{this.emit("close")}),b?d():a.addEventListener("open",d)},"configureWebSocket"),f;try{f=this.wsProxyAddrForHost(b,"string"==typeof a?parseInt(a,10):a)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+f;if(void 0!==this.webSocketConstructor)this.ws=new this.webSocketConstructor(a),e(this.ws);else try{this.ws=new WebSocket(a),e(this.ws)}catch{this.ws=new __unstable_WebSocket(a),e(this.ws)}}catch(a){fetch((this.useSecureWebSocket?"https:":"http:")+"//"+f,{headers:{Upgrade:"websocket"}}).then(b=>{if(this.ws=b.webSocket,null==this.ws)throw a;this.ws.accept(),e(this.ws,!0)}).catch(a=>{this.emit("error",Error(`All attempts to open a WebSocket to connect to the database failed. Please refer \
to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websoc\
ket--undefined. Details: ${a}`)),this.emit("close")})}}async startTls(a){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let b=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),c=new this.subtls.WebSocketReadQueue(this.ws),d=c.read.bind(c),e=this.rawWrite.bind(this),{read:f,write:g}=await this.subtls.startTls(a,b,d,e,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=f,this.tlsWrite=g,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let a=await this.tlsRead();if(void 0===a)break;{let b=bA.from(a);this.emit("data",b)}}}rawWrite(a){if(!this.coalesceWrites){this.ws&&this.ws.send(a);return}if(void 0===this.writeBuffer)this.writeBuffer=a,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let b=new Uint8Array(this.writeBuffer.length+a.length);b.set(this.writeBuffer),b.set(a,this.writeBuffer.length),this.writeBuffer=b}}write(a,b="utf8",c=a=>{}){return 0===a.length?c():("string"==typeof a&&(a=bA.from(a,b)),0===this.tlsState?(this.rawWrite(a),c()):1===this.tlsState?this.once("secureConnection",()=>{this.write(a,b,c)}):(this.tlsWrite(a),c())),!0}end(a=bA.alloc(0),b="utf8",c=()=>{}){return this.write(a,b,()=>{this.ws.close(),c()}),this}destroy(){return this.destroyed=!0,this.end()}},bJ(b$,"Socket"),bQ(b$,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:bJ((a,b,c)=>"https://"+(c?.jwtAuth?a.replace(bZ,"apiauth."):a.replace(bZ,"api."))+"/sql","fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:bJ(a=>a+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),bQ(b$,"opts",{}),b_=b$}),b1={};function b2(a,b=!1){let{protocol:c}=new URL(a),{username:d,password:e,host:f,hostname:g,port:h,pathname:i,search:j,searchParams:k,hash:l}=new URL("http:"+a.substring(c.length));e=decodeURIComponent(e),d=decodeURIComponent(d),i=decodeURIComponent(i);let m=d+":"+e,n=b?Object.fromEntries(k.entries()):j;return{href:a,protocol:c,auth:m,username:d,password:e,host:f,hostname:g,port:h,pathname:i,search:j,query:n,hash:l}}bM(b1,{parse:()=>b2});var b3=bK(()=>{bU(),bJ(b2,"parse")}),b4=bL(a=>{bU(),a.parse=function(a,b){return new c(a,b).parse()};var b=class a{constructor(a,b){this.source=a,this.transform=b||d,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var a=this.source[this.position++];return"\\"===a?{value:this.source[this.position++],escaped:!0}:{value:a,escaped:!1}}record(a){this.recorded.push(a)}newEntry(a){var b;(this.recorded.length>0||a)&&("NULL"!==(b=this.recorded.join(""))||a||(b=null),null!==b&&(b=this.transform(b)),this.entries.push(b),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(b){var c,d,e;for(this.consumeDimensions();!this.isEof();)if("{"!==(c=this.nextCharacter()).value||e){if("}"!==c.value||e)'"'!==c.value||c.escaped?","!==c.value||e?this.record(c.value):this.newEntry():(e&&this.newEntry(!0),e=!e);else if(this.dimension--,!this.dimension&&(this.newEntry(),b))return this.entries}else this.dimension++,this.dimension>1&&(d=new a(this.source.substr(this.position-1),this.transform),this.entries.push(d.parse(!0)),this.position+=d.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};bJ(b,"ArrayParser");var c=b;function d(a){return a}bJ(d,"identity")}),b5=bL((a,b)=>{bU();var c=b4();b.exports={create:bJ(function(a,b){return{parse:bJ(function(){return c.parse(a,b)},"parse")}},"create")}}),b6=bL((a,b)=>{bU();var c=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,d=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,e=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,f=/^-?infinity$/;function g(a){var b=d.exec(a);if(b){var c=parseInt(b[1],10);b[4]&&(c=i(c));var e=new Date(c,parseInt(b[2],10)-1,b[3]);return j(c)&&e.setFullYear(c),e}}function h(a){if(a.endsWith("+00"))return 0;var b=e.exec(a.split(" ")[1]);if(b){var c=b[1];return"Z"===c?0:(3600*parseInt(b[2],10)+60*parseInt(b[3]||0,10)+parseInt(b[4]||0,10))*("-"===c?-1:1)*1e3}}function i(a){return-(a-1)}function j(a){return a>=0&&a<100}b.exports=bJ(function(a){if(f.test(a))return Number(a.replace("i","I"));var b=c.exec(a);if(!b)return g(a)||null;var d=!!b[8],e=parseInt(b[1],10);d&&(e=i(e));var k=parseInt(b[2],10)-1,l=b[3],m=parseInt(b[4],10),n=parseInt(b[5],10),o=parseInt(b[6],10),p=b[7];p=p?1e3*parseFloat(p):0;var q,r=h(a);return null!=r?(q=new Date(Date.UTC(e,k,l,m,n,o,p)),j(e)&&q.setUTCFullYear(e),0!==r&&q.setTime(q.getTime()-r)):(q=new Date(e,k,l,m,n,o,p),j(e)&&q.setFullYear(e)),q},"parseDate"),bJ(g,"getDate"),bJ(h,"timeZoneOffset"),bJ(i,"bcYearToNegativeYear"),bJ(j,"is0To99")}),b7=bL((a,b)=>{bU(),b.exports=d;var c=Object.prototype.hasOwnProperty;function d(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)c.call(d,e)&&(a[e]=d[e])}return a}bJ(d,"extend")}),b8=bL((a,b)=>{bU();var c=b7();function d(a){if(!(this instanceof d))return new d(a);c(this,n(a))}b.exports=d,bJ(d,"PostgresInterval");var e=["seconds","minutes","hours","days","months","years"];d.prototype.toPostgres=function(){var a=e.filter(this.hasOwnProperty,this);return this.milliseconds&&0>a.indexOf("seconds")&&a.push("seconds"),0===a.length?"0":a.map(function(a){var b=this[a]||0;return"seconds"===a&&this.milliseconds&&(b=(b+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),b+" "+a},this).join(" ")};var f={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},g=["years","months","days"],h=["hours","minutes","seconds"];d.prototype.toISOString=d.prototype.toISO=function(){return"P"+g.map(a,this).join("")+"T"+h.map(a,this).join("");function a(a){var b=this[a]||0;return"seconds"===a&&this.milliseconds&&(b=(b+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),b+f[a]}};var i="([+-]?\\d+)",j=new RegExp([i+"\\s+years?",i+"\\s+mons?",i+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(a){return"("+a+")?"}).join("\\s*")),k={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},l=["hours","minutes","seconds","milliseconds"];function m(a){return parseInt(a+"000000".slice(a.length),10)/1e3}function n(a){if(!a)return{};var b=j.exec(a),c="-"===b[8];return Object.keys(k).reduce(function(a,d){var e=b[k[d]];return e&&(e="milliseconds"===d?m(e):parseInt(e,10))&&(c&&~l.indexOf(d)&&(e*=-1),a[d]=e),a},{})}bJ(m,"parseMilliseconds"),bJ(n,"parse")}),b9=bL((a,b)=>{bU(),b.exports=bJ(function(a){if(/^\\x/.test(a))return new bA(a.substr(2),"hex");for(var b="",c=0;c<a.length;)if("\\"!==a[c])b+=a[c],++c;else if(/[0-7]{3}/.test(a.substr(c+1,3)))b+=String.fromCharCode(parseInt(a.substr(c+1,3),8)),c+=4;else{for(var d=1;c+d<a.length&&"\\"===a[c+d];)d++;for(var e=0;e<Math.floor(d/2);++e)b+="\\";c+=2*Math.floor(d/2)}return new bA(b,"binary")},"parseBytea")}),ca=bL((a,b)=>{bU();var c=b4(),d=b5(),e=b6(),f=b8(),g=b9();function h(a){return bJ(function(b){return null===b?b:a(b)},"nullAllowed")}function i(a){return null===a?a:"TRUE"===a||"t"===a||"true"===a||"y"===a||"yes"===a||"on"===a||"1"===a}function j(a){return a?c.parse(a,i):null}function k(a){return parseInt(a,10)}function l(a){return a?c.parse(a,h(k)):null}function m(a){return a?c.parse(a,h(function(a){return u(a).trim()})):null}bJ(h,"allowNull"),bJ(i,"parseBool"),bJ(j,"parseBoolArray"),bJ(k,"parseBaseTenInt"),bJ(l,"parseIntegerArray"),bJ(m,"parseBigIntegerArray");var n=bJ(function(a){return a?d.create(a,function(a){return null!==a&&(a=w(a)),a}).parse():null},"parsePointArray"),o=bJ(function(a){return a?d.create(a,function(a){return null!==a&&(a=parseFloat(a)),a}).parse():null},"parseFloatArray"),p=bJ(function(a){return a?d.create(a).parse():null},"parseStringArray"),q=bJ(function(a){return a?d.create(a,function(a){return null!==a&&(a=e(a)),a}).parse():null},"parseDateArray"),r=bJ(function(a){return a?d.create(a,function(a){return null!==a&&(a=f(a)),a}).parse():null},"parseIntervalArray"),s=bJ(function(a){return a?c.parse(a,h(g)):null},"parseByteAArray"),t=bJ(function(a){return parseInt(a,10)},"parseInteger"),u=bJ(function(a){var b=String(a);return/^\d+$/.test(b)?b:a},"parseBigInteger"),v=bJ(function(a){return a?c.parse(a,h(JSON.parse)):null},"parseJsonArray"),w=bJ(function(a){return"("!==a[0]?null:{x:parseFloat((a=a.substring(1,a.length-1).split(","))[0]),y:parseFloat(a[1])}},"parsePoint"),x=bJ(function(a){if("<"!==a[0]&&"("!==a[1])return null;for(var b="(",c="",d=!1,e=2;e<a.length-1;e++){if(d||(b+=a[e]),")"===a[e]){d=!0;continue}d&&","!==a[e]&&(c+=a[e])}var f=w(b);return f.radius=parseFloat(c),f},"parseCircle");b.exports={init:bJ(function(a){a(20,u),a(21,t),a(23,t),a(26,t),a(700,parseFloat),a(701,parseFloat),a(16,i),a(1082,e),a(1114,e),a(1184,e),a(600,w),a(651,p),a(718,x),a(1e3,j),a(1001,s),a(1005,l),a(1007,l),a(1028,l),a(1016,m),a(1017,n),a(1021,o),a(1022,o),a(1231,o),a(1014,p),a(1015,p),a(1008,p),a(1009,p),a(1040,p),a(1041,p),a(1115,q),a(1182,q),a(1185,q),a(1186,f),a(1187,r),a(17,g),a(114,JSON.parse.bind(JSON)),a(3802,JSON.parse.bind(JSON)),a(199,v),a(3807,v),a(3907,p),a(2951,p),a(791,p),a(1183,p),a(1270,p)},"init")}}),cb=bL((a,b)=>{function c(a){var b=a.readInt32BE(0),c=a.readUInt32BE(4),d="";b<0&&(b=~b+(0===c),c=~c+1>>>0,d="-");var e,f,g,h,i,j,k="";if(e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";if(k=h+g+k,e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";if(k=h+g+k,e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";return k=h+g+k,d+(g=""+(f=0x100000000*(e=b%1e6)+c)%1e6)+k}bU(),bJ(c,"readInt8"),b.exports=c}),cc=bL((a,b)=>{bU();var c=cb(),d=bJ(function(a,b,c,d,e){c=c||0,d=d||!1,e=e||function(a,b,c){return a*Math.pow(2,c)+b};var f=c>>3,g=bJ(function(a){return d?255&~a:a},"inv"),h=255,i=8-c%8;b<i&&(h=255<<8-b&255,i=b),c&&(h>>=c%8);var j=0;c%8+b>=8&&(j=e(0,g(a[f])&h,i));for(var k=b+c>>3,l=f+1;l<k;l++)j=e(j,g(a[l]),8);var m=(b+c)%8;return m>0&&(j=e(j,g(a[k])>>8-m,m)),j},"parseBits"),e=bJ(function(a,b,c){var e=Math.pow(2,c-1)-1,f=d(a,1),g=d(a,c,1);if(0===g)return 0;var h=1,i=d(a,b,c+1,!1,bJ(function(a,b,c){0===a&&(a=1);for(var d=1;d<=c;d++)h/=2,(b&1<<c-d)>0&&(a+=h);return a},"parsePrecisionBits"));return g==Math.pow(2,c+1)-1?0===i?0===f?1/0:-1/0:NaN:(0===f?1:-1)*Math.pow(2,g-e)*i},"parseFloatFromBits"),f=bJ(function(a){return 1==d(a,1)?-1*(d(a,15,1,!0)+1):d(a,15,1)},"parseInt16"),g=bJ(function(a){return 1==d(a,1)?-1*(d(a,31,1,!0)+1):d(a,31,1)},"parseInt32"),h=bJ(function(a){return e(a,23,8)},"parseFloat32"),i=bJ(function(a){return e(a,52,11)},"parseFloat64"),j=bJ(function(a){var b=d(a,16,32);if(49152==b)return NaN;for(var c=Math.pow(1e4,d(a,16,16)),e=0,f=d(a,16),g=0;g<f;g++)e+=d(a,16,64+16*g)*c,c/=1e4;var h=Math.pow(10,d(a,16,48));return(0===b?1:-1)*Math.round(e*h)/h},"parseNumeric"),k=bJ(function(a,b){var c=d(b,1),e=d(b,63,1),f=new Date((0===c?1:-1)*e/1e3+9466848e5);return a||f.setTime(f.getTime()+6e4*f.getTimezoneOffset()),f.usec=e%1e3,f.getMicroSeconds=function(){return this.usec},f.setMicroSeconds=function(a){this.usec=a},f.getUTCMicroSeconds=function(){return this.usec},f},"parseDate"),l=bJ(function(a){for(var b=d(a,32),c=(d(a,32,32),d(a,32,64)),e=96,f=[],g=0;g<b;g++)f[g]=d(a,32,e),e+=64;var h=bJ(function(b){var c,f=d(a,32,e);return(e+=32,0xffffffff==f)?null:23==b||20==b?(c=d(a,8*f,e),e+=8*f,c):25==b?a.toString(this.encoding,e>>3,(e+=f<<3)>>3):void console.log("ERROR: ElementType not implemented: "+b)},"parseElement"),i=bJ(function(a,b){var c,d=[];if(a.length>1){var e=a.shift();for(c=0;c<e;c++)d[c]=i(a,b);a.unshift(e)}else for(c=0;c<a[0];c++)d[c]=h(b);return d},"parse");return i(f,c)},"parseArray"),m=bJ(function(a){return a.toString("utf8")},"parseText"),n=bJ(function(a){return null===a?null:d(a,8)>0},"parseBool");b.exports={init:bJ(function(a){a(20,c),a(21,f),a(23,g),a(26,g),a(1700,j),a(700,h),a(701,i),a(16,n),a(1114,k.bind(null,!1)),a(1184,k.bind(null,!0)),a(1e3,l),a(1007,l),a(1016,l),a(1008,l),a(1009,l),a(25,m)},"init")}}),cd=bL((a,b)=>{bU(),b.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),ce=bL(a=>{bU();var b=ca(),c=cc(),d=b5(),e=cd();a.getTypeParser=h,a.setTypeParser=i,a.arrayParser=d,a.builtins=e;var f={text:{},binary:{}};function g(a){return String(a)}function h(a,b){return f[b=b||"text"]&&f[b][a]||g}function i(a,b,c){"function"==typeof b&&(c=b,b="text"),f[b][a]=c}bJ(g,"noParse"),bJ(h,"getTypeParser"),bJ(i,"setTypeParser"),b.init(function(a,b){f.text[a]=b}),c.init(function(a,b){f.binary[a]=b})}),cf=bL((a,b)=>{bU();var c=ce();function d(a){this._types=a||c,this.text={},this.binary={}}bJ(d,"TypeOverrides"),d.prototype.getOverrides=function(a){switch(a){case"text":return this.text;case"binary":return this.binary;default:return{}}},d.prototype.setTypeParser=function(a,b,c){"function"==typeof b&&(c=b,b="text"),this.getOverrides(b)[a]=c},d.prototype.getTypeParser=function(a,b){return b=b||"text",this.getOverrides(b)[a]||this._types.getTypeParser(a,b)},b.exports=d});function cg(a){let b=0x6a09e667,c=0xbb67ae85,d=0x3c6ef372,e=0xa54ff53a,f=0x510e527f,g=0x9b05688c,h=0x1f83d9ab,i=0x5be0cd19,j=0,k=0,l=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],m=bJ((a,b)=>a>>>b|a<<32-b,"rrot"),n=new Uint32Array(64),o=new Uint8Array(64),p=bJ(()=>{for(let a=0,b=0;a<16;a++,b+=4)n[a]=o[b]<<24|o[b+1]<<16|o[b+2]<<8|o[b+3];for(let a=16;a<64;a++){let b=m(n[a-15],7)^m(n[a-15],18)^n[a-15]>>>3,c=m(n[a-2],17)^m(n[a-2],19)^n[a-2]>>>10;n[a]=n[a-16]+b+n[a-7]+c|0}let a=b,j=c,p=d,q=e,r=f,s=g,t=h,u=i;for(let b=0;b<64;b++){let c=u+(m(r,6)^m(r,11)^m(r,25))+(r&s^~r&t)+l[b]+n[b]|0,d=(m(a,2)^m(a,13)^m(a,22))+(a&j^a&p^j&p)|0;u=t,t=s,s=r,r=q+c|0,q=p,p=j,j=a,a=c+d|0}b=b+a|0,c=c+j|0,d=d+p|0,e=e+q|0,f=f+r|0,g=g+s|0,h=h+t|0,i=i+u|0,k=0},"process"),q=bJ(a=>{"string"==typeof a&&(a=new TextEncoder().encode(a));for(let b=0;b<a.length;b++)o[k++]=a[b],64===k&&p();j+=a.length},"add"),r=bJ(()=>{if(o[k++]=128,64==k&&p(),k+8>64){for(;k<64;)o[k++]=0;p()}for(;k<58;)o[k++]=0;let a=8*j;o[k++]=a/0x10000000000&255,o[k++]=a/0x100000000&255,o[k++]=a>>>24,o[k++]=a>>>16&255,o[k++]=a>>>8&255,o[k++]=255&a,p();let l=new Uint8Array(32);return l[0]=b>>>24,l[1]=b>>>16&255,l[2]=b>>>8&255,l[3]=255&b,l[4]=c>>>24,l[5]=c>>>16&255,l[6]=c>>>8&255,l[7]=255&c,l[8]=d>>>24,l[9]=d>>>16&255,l[10]=d>>>8&255,l[11]=255&d,l[12]=e>>>24,l[13]=e>>>16&255,l[14]=e>>>8&255,l[15]=255&e,l[16]=f>>>24,l[17]=f>>>16&255,l[18]=f>>>8&255,l[19]=255&f,l[20]=g>>>24,l[21]=g>>>16&255,l[22]=g>>>8&255,l[23]=255&g,l[24]=h>>>24,l[25]=h>>>16&255,l[26]=h>>>8&255,l[27]=255&h,l[28]=i>>>24,l[29]=i>>>16&255,l[30]=i>>>8&255,l[31]=255&i,l},"digest");return void 0===a?{add:q,digest:r}:(q(a),r())}var ch,ci,cj=bK(()=>{bU(),bJ(cg,"sha256")}),ck=bK(()=>{bU(),bJ(ch=class a{constructor(){bQ(this,"_dataLength",0),bQ(this,"_bufferLength",0),bQ(this,"_state",new Int32Array(4)),bQ(this,"_buffer",new ArrayBuffer(68)),bQ(this,"_buffer8"),bQ(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(a,b=!1){return this.onePassHasher.start().appendByteArray(a).end(b)}static hashStr(a,b=!1){return this.onePassHasher.start().appendStr(a).end(b)}static hashAsciiStr(a,b=!1){return this.onePassHasher.start().appendAsciiStr(a).end(b)}static _hex(b){let c=a.hexChars,d=a.hexOut,e,f,g,h;for(h=0;h<4;h+=1)for(f=8*h,e=b[h],g=0;g<8;g+=2)d[f+1+g]=c.charAt(15&e),e>>>=4,d[f+0+g]=c.charAt(15&e),e>>>=4;return d.join("")}static _md5cycle(a,b){let c=a[0],d=a[1],e=a[2],f=a[3];c+=(d&e|~d&f)+b[0]-0x28955b88|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[1]-0x173848aa|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[2]+0x242070db|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[3]-0x3e423112|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[4]-0xa83f051|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[5]+0x4787c62a|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[6]-0x57cfb9ed|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[7]-0x2b96aff|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[8]+0x698098d8|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[9]-0x74bb0851|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[10]-42063|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[11]-0x76a32842|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[12]+0x6b901122|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[13]-0x2678e6d|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[14]-0x5986bc72|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[15]+0x49b40821|0,c+=((d=(d<<22|d>>>10)+e|0)&f|e&~f)+b[1]-0x9e1da9e|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[6]-0x3fbf4cc0|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[11]+0x265e5a51|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[0]-0x16493856|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[5]-0x29d0efa3|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[10]+0x2441453|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[15]-0x275e197f|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[4]-0x182c0438|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[9]+0x21e1cde6|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[14]-0x3cc8f82a|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[3]-0xb2af279|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[8]+0x455a14ed|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[13]-0x561c16fb|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[2]-0x3105c08|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[7]+0x676f02d9|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[12]-0x72d5b376|0,c+=((d=(d<<20|d>>>12)+e|0)^e^f)+b[5]-378558|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[8]-0x788e097f|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[11]+0x6d9d6122|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[14]-0x21ac7f4|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[1]-0x5b4115bc|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[4]+0x4bdecfa9|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[7]-0x944b4a0|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[10]-0x41404390|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[13]+0x289b7ec6|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[0]-0x155ed806|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[3]-0x2b10cf7b|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[6]+0x4881d05|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[9]-0x262b2fc7|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[12]-0x1924661b|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[15]+0x1fa27cf8|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[2]-0x3b53a99b|0,d=(d<<23|d>>>9)+e|0,c+=(e^(d|~f))+b[0]-0xbd6ddbc|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[7]+0x432aff97|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[14]-0x546bdc59|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[5]-0x36c5fc7|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[12]+0x655b59c3|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[3]-0x70f3336e|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[10]-1051523|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[1]-0x7a7ba22f|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[8]+0x6fa87e4f|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[15]-0x1d31920|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[6]-0x5cfebcec|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[13]+0x4e0811a1|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[4]-0x8ac817e|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[11]-0x42c50dcb|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[2]+0x2ad7d2bb|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[9]-0x14792c6f|0,d=(d<<21|d>>>11)+e|0,a[0]=c+a[0]|0,a[1]=d+a[1]|0,a[2]=e+a[2]|0,a[3]=f+a[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(a.stateIdentity),this}appendStr(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g;for(g=0;g<b.length;g+=1){if((f=b.charCodeAt(g))<128)c[e++]=f;else if(f<2048)c[e++]=(f>>>6)+192,c[e++]=63&f|128;else if(f<55296||f>56319)c[e++]=(f>>>12)+224,c[e++]=f>>>6&63|128,c[e++]=63&f|128;else{if((f=(f-55296)*1024+(b.charCodeAt(++g)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");c[e++]=(f>>>18)+240,c[e++]=f>>>12&63|128,c[e++]=f>>>6&63|128,c[e++]=63&f|128}e>=64&&(this._dataLength+=64,a._md5cycle(this._state,d),e-=64,d[0]=d[16])}return this._bufferLength=e,this}appendAsciiStr(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g=0;for(;;){for(f=Math.min(b.length-g,64-e);f--;)c[e++]=b.charCodeAt(g++);if(e<64)break;this._dataLength+=64,a._md5cycle(this._state,d),e=0}return this._bufferLength=e,this}appendByteArray(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g=0;for(;;){for(f=Math.min(b.length-g,64-e);f--;)c[e++]=b[g++];if(e<64)break;this._dataLength+=64,a._md5cycle(this._state,d),e=0}return this._bufferLength=e,this}getState(){let a=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[a[0],a[1],a[2],a[3]]}}setState(a){let b=a.buffer,c=a.state,d=this._state,e;for(this._dataLength=a.length,this._bufferLength=a.buflen,d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],e=0;e<b.length;e+=1)this._buffer8[e]=b.charCodeAt(e)}end(b=!1){let c=this._bufferLength,d=this._buffer8,e=this._buffer32,f=(c>>2)+1;this._dataLength+=c;let g=8*this._dataLength;if(d[c]=128,d[c+1]=d[c+2]=d[c+3]=0,e.set(a.buffer32Identity.subarray(f),f),c>55&&(a._md5cycle(this._state,e),e.set(a.buffer32Identity)),g<=0xffffffff)e[14]=g;else{let a=g.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;let b=parseInt(a[2],16),c=parseInt(a[1],16)||0;e[14]=b,e[15]=c}return a._md5cycle(this._state,e),b?this._state:a._hex(this._state)}},"Md5"),bQ(ch,"stateIdentity",new Int32Array([0x67452301,-0x10325477,-0x67452302,0x10325476])),bQ(ch,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),bQ(ch,"hexChars","0123456789abcdef"),bQ(ch,"hexOut",[]),bQ(ch,"onePassHasher",new ch),ci=ch}),cl={};function cm(a){return crypto.getRandomValues(bA.alloc(a))}function cn(a){if("sha256"===a)return{update:bJ(function(a){return{digest:bJ(function(){return bA.from(cg(a))},"digest")}},"update")};if("md5"===a)return{update:bJ(function(a){return{digest:bJ(function(){return"string"==typeof a?ci.hashStr(a):ci.hashByteArray(a)},"digest")}},"update")};throw Error(`Hash type '${a}' not supported`)}function co(a,b){if("sha256"!==a)throw Error(`\
Only sha256 is supported (requested: '${a}')`);return{update:bJ(function(a){return{digest:bJ(function(){"string"==typeof b&&(b=new TextEncoder().encode(b)),"string"==typeof a&&(a=new TextEncoder().encode(a));let c=b.length;if(c>64)b=cg(b);else if(c<64){let a=new Uint8Array(64);a.set(b),b=a}let d=new Uint8Array(64),e=new Uint8Array(64);for(let a=0;a<64;a++)d[a]=54^b[a],e[a]=92^b[a];let f=new Uint8Array(a.length+64);f.set(d,0),f.set(a,64);let g=new Uint8Array(96);return g.set(e,0),g.set(cg(f),64),bA.from(cg(g))},"digest")}},"update")}}bM(cl,{createHash:()=>cn,createHmac:()=>co,randomBytes:()=>cm});var cp=bK(()=>{bU(),cj(),ck(),bJ(cm,"randomBytes"),bJ(cn,"createHash"),bJ(co,"createHmac")}),cq=bL((a,b)=>{bU(),b.exports={host:"localhost",user:"win32"===bB.platform?bB.env.USERNAME:bB.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var c=ce(),d=c.getTypeParser(20,"text"),e=c.getTypeParser(1016,"text");b.exports.__defineSetter__("parseInt8",function(a){c.setTypeParser(20,"text",a?c.getTypeParser(23,"text"):d),c.setTypeParser(1016,"text",a?c.getTypeParser(1007,"text"):e)})}),cr=bL((a,b)=>{bU();var c=(cp(),bP(cl)),d=cq();function e(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function f(a){for(var b="{",c=0;c<a.length;c++)c>0&&(b+=","),null===a[c]||typeof a[c]>"u"?b+="NULL":Array.isArray(a[c])?b+=f(a[c]):a[c]instanceof bA?b+="\\\\x"+a[c].toString("hex"):b+=e(g(a[c]));return b+"}"}bJ(e,"escapeElement"),bJ(f,"arrayString");var g=bJ(function(a,b){if(null==a)return null;if(a instanceof bA)return a;if(ArrayBuffer.isView(a)){var c=bA.from(a.buffer,a.byteOffset,a.byteLength);return c.length===a.byteLength?c:c.slice(a.byteOffset,a.byteOffset+a.byteLength)}return a instanceof Date?d.parseInputDatesAsUTC?k(a):j(a):Array.isArray(a)?f(a):"object"==typeof a?h(a,b):a.toString()},"prepareValue");function h(a,b){if(a&&"function"==typeof a.toPostgres){if(-1!==(b=b||[]).indexOf(a))throw Error('circular reference detected while preparing "'+a+'" for query');return b.push(a),g(a.toPostgres(g),b)}return JSON.stringify(a)}function i(a,b){for(a=""+a;a.length<b;)a="0"+a;return a}function j(a){var b=-a.getTimezoneOffset(),c=a.getFullYear(),d=c<1;d&&(c=Math.abs(c)+1);var e=i(c,4)+"-"+i(a.getMonth()+1,2)+"-"+i(a.getDate(),2)+"T"+i(a.getHours(),2)+":"+i(a.getMinutes(),2)+":"+i(a.getSeconds(),2)+"."+i(a.getMilliseconds(),3);return b<0?(e+="-",b*=-1):e+="+",e+=i(Math.floor(b/60),2)+":"+i(b%60,2),d&&(e+=" BC"),e}function k(a){var b=a.getUTCFullYear(),c=b<1;c&&(b=Math.abs(b)+1);var d=i(b,4)+"-"+i(a.getUTCMonth()+1,2)+"-"+i(a.getUTCDate(),2)+"T"+i(a.getUTCHours(),2)+":"+i(a.getUTCMinutes(),2)+":"+i(a.getUTCSeconds(),2)+"."+i(a.getUTCMilliseconds(),3);return d+="+00:00",c&&(d+=" BC"),d}function l(a,b,c){return a="string"==typeof a?{text:a}:a,b&&("function"==typeof b?a.callback=b:a.values=b),c&&(a.callback=c),a}bJ(h,"prepareObject"),bJ(i,"pad"),bJ(j,"dateToString"),bJ(k,"dateToStringUTC"),bJ(l,"normalizeQueryConfig");var m=bJ(function(a){return c.createHash("md5").update(a,"utf-8").digest("hex")},"md5"),n=bJ(function(a,b,c){var d=m(b+a);return"md5"+m(bA.concat([bA.from(d),c]))},"postgresMd5PasswordHash");b.exports={prepareValue:bJ(function(a){return g(a)},"prepareValueWrapper"),normalizeQueryConfig:l,postgresMd5PasswordHash:n,md5:m}}),cs={};bM(cs,{default:()=>ct});var ct,cu=bK(()=>{bU(),ct={}}),cv=bL((a,b)=>{bU();var c=(cp(),bP(cl));function d(a){if(-1===a.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let b=c.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:b,response:"n,,n=*,r="+b,message:"SASLInitialResponse"}}function e(a,b,c){if("SASLInitialResponse"!==a.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof b)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof c)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let d=j(c);if(d.nonce.startsWith(a.clientNonce)){if(d.nonce.length===a.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var e=o(b,bA.from(d.salt,"base64"),d.iteration),f=n(e,"Client Key"),g=m(f),h="n=*,r="+a.clientNonce,i="r="+d.nonce+",s="+d.salt+",i="+d.iteration,k="c=biws,r="+d.nonce,p=h+","+i+","+k,q=l(f,n(g,p)).toString("base64"),r=n(e,"Server Key"),s=n(r,p);a.message="SASLResponse",a.serverSignature=s.toString("base64"),a.response=k+",p="+q}function f(a,b){if("SASLResponse"!==a.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof b)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:c}=k(b);if(c!==a.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function g(a){if("string"!=typeof a)throw TypeError("SASL: text must be a string");return a.split("").map((b,c)=>a.charCodeAt(c)).every(a=>a>=33&&a<=43||a>=45&&a<=126)}function h(a){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(a)}function i(a){if("string"!=typeof a)throw TypeError("SASL: attribute pairs text must be a string");return new Map(a.split(",").map(a=>{if(!/^.=/.test(a))throw Error("SASL: Invalid attribute pair entry");return[a[0],a.substring(2)]}))}function j(a){let b=i(a),c=b.get("r");if(c){if(!g(c))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let d=b.get("s");if(d){if(!h(d))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let e=b.get("i");if(e){if(!/^[1-9][0-9]*$/.test(e))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:c,salt:d,iteration:parseInt(e,10)}}function k(a){let b=i(a).get("v");if(b){if(!h(b))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:b}}function l(a,b){if(!bA.isBuffer(a))throw TypeError("first argument must be a Buffer");if(!bA.isBuffer(b))throw TypeError("second argument must be a Buffer");if(a.length!==b.length)throw Error("Buffer lengths must match");if(0===a.length)throw Error("Buffers cannot be empty");return bA.from(a.map((c,d)=>a[d]^b[d]))}function m(a){return c.createHash("sha256").update(a).digest()}function n(a,b){return c.createHmac("sha256",a).update(b).digest()}function o(a,b,c){for(var d=n(a,bA.concat([b,bA.from([0,0,0,1])])),e=d,f=0;f<c-1;f++)e=l(e,d=n(a,d));return e}bJ(d,"startSession"),bJ(e,"continueSession"),bJ(f,"finalizeSession"),bJ(g,"isPrintableChars"),bJ(h,"isBase64"),bJ(i,"parseAttributePairs"),bJ(j,"parseServerFirstMessage"),bJ(k,"parseServerFinalMessage"),bJ(l,"xorBuffers"),bJ(m,"sha256"),bJ(n,"hmacSha256"),bJ(o,"Hi"),b.exports={startSession:d,continueSession:e,finalizeSession:f}}),cw={};function cx(...a){return a.join("/")}bM(cw,{join:()=>cx});var cy=bK(()=>{bU(),bJ(cx,"join")}),cz={};function cA(a,b){b(Error("No filesystem"))}bM(cz,{stat:()=>cA});var cB=bK(()=>{bU(),bJ(cA,"stat")}),cC={};bM(cC,{default:()=>cD});var cD,cE=bK(()=>{bU(),cD={}}),cF={};bM(cF,{StringDecoder:()=>cH});var cG,cH,cI=bK(()=>{bU(),bJ(cG=class{constructor(a){bQ(this,"td"),this.td=new TextDecoder(a)}write(a){return this.td.decode(a,{stream:!0})}end(a){return this.td.decode(a)}},"StringDecoder"),cH=cG}),cJ=bL((a,b)=>{bU();var{Transform:c}=(cE(),bP(cC)),{StringDecoder:d}=(cI(),bP(cF)),e=Symbol("last"),f=Symbol("decoder");function g(a,b,c){let d;if(this.overflow){if(1===(d=this[f].write(a).split(this.matcher)).length)return c();d.shift(),this.overflow=!1}else this[e]+=this[f].write(a),d=this[e].split(this.matcher);this[e]=d.pop();for(let a=0;a<d.length;a++)try{i(this,this.mapper(d[a]))}catch(a){return c(a)}if(this.overflow=this[e].length>this.maxLength,this.overflow&&!this.skipOverflow)return void c(Error("maximum buffer reached"));c()}function h(a){if(this[e]+=this[f].end(),this[e])try{i(this,this.mapper(this[e]))}catch(b){return a(b)}a()}function i(a,b){void 0!==b&&a.push(b)}function j(a){return a}function k(a,b,i){switch(a=a||/\r?\n/,b=b||j,i=i||{},arguments.length){case 1:"function"==typeof a?(b=a,a=/\r?\n/):"object"!=typeof a||a instanceof RegExp||a[Symbol.split]||(i=a,a=/\r?\n/);break;case 2:"function"==typeof a?(i=b,b=a,a=/\r?\n/):"object"==typeof b&&(i=b,b=j)}(i=Object.assign({},i)).autoDestroy=!0,i.transform=g,i.flush=h,i.readableObjectMode=!0;let k=new c(i);return k[e]="",k[f]=new d("utf8"),k.matcher=a,k.mapper=b,k.maxLength=i.maxLength,k.skipOverflow=i.skipOverflow||!1,k.overflow=!1,k._destroy=function(a,b){this._writableState.errorEmitted=!1,b(a)},k}bJ(g,"transform"),bJ(h,"flush"),bJ(i,"push"),bJ(j,"noop"),bJ(k,"split"),b.exports=k}),cK=bL((a,b)=>{bU();var c=(cy(),bP(cw)),d=(cE(),bP(cC)).Stream,e=cJ(),f=(cu(),bP(cs)),g="win32"===bB.platform,h=bB.stderr;function i(a){return(61440&a)==32768}bJ(i,"isRegFile");var j=["host","port","database","user","password"],k=j.length,l=j[k-1];function m(){if(h instanceof d&&!0===h.writable){var a=Array.prototype.slice.call(arguments).concat(`
`);h.write(f.format.apply(f,a))}}bJ(m,"warn"),Object.defineProperty(b.exports,"isWin",{get:bJ(function(){return g},"get"),set:bJ(function(a){g=a},"set")}),b.exports.warnTo=function(a){var b=h;return h=a,b},b.exports.getFileName=function(a){var b=a||bB.env;return b.PGPASSFILE||(g?c.join(b.APPDATA||"./","postgresql","pgpass.conf"):c.join(b.HOME||"./",".pgpass"))},b.exports.usePgPass=function(a,b){return!Object.prototype.hasOwnProperty.call(bB.env,"PGPASSWORD")&&(!!g||(b=b||"<unkn>",i(a.mode)?!(63&a.mode)||(m('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',b),!1):(m('WARNING: password file "%s" is not a plain file',b),!1)))};var n=b.exports.match=function(a,b){return j.slice(0,-1).reduce(function(c,d,e){return 1==e&&Number(a[d]||5432)===Number(b[d])?c&&!0:c&&("*"===b[d]||b[d]===a[d])},!0)};b.exports.getPassword=function(a,b,c){var d,f=b.pipe(e());function g(b){var c=o(b);c&&p(c)&&n(a,c)&&(d=c[l],f.end())}bJ(g,"onLine");var h=bJ(function(){b.destroy(),c(d)},"onEnd"),i=bJ(function(a){b.destroy(),m("WARNING: error on reading file: %s",a),c(void 0)},"onErr");b.on("error",i),f.on("data",g).on("end",h).on("error",i)};var o=b.exports.parseLine=function(a){if(a.length<11||a.match(/^\s+#/))return null;for(var b="",c="",d=0,e=0,f={},g=bJ(function(b,c,d){var e=a.substring(c,d);Object.hasOwnProperty.call(bB.env,"PGPASS_NO_DEESCAPE")||(e=e.replace(/\\([:\\])/g,"$1")),f[j[b]]=e},"addToObj"),h=0;h<a.length-1;h+=1){if(b=a.charAt(h+1),c=a.charAt(h),d==k-1){g(d,e);break}h>=0&&":"==b&&"\\"!==c&&(g(d,e,h+1),e=h+2,d+=1)}return f=Object.keys(f).length===k?f:null},p=b.exports.isValidEntry=function(a){for(var b={0:function(a){return a.length>0},1:function(a){return"*"===a||isFinite(a=Number(a))&&a>0&&a<0x20000000000000&&Math.floor(a)===a},2:function(a){return a.length>0},3:function(a){return a.length>0},4:function(a){return a.length>0}},c=0;c<j.length;c+=1)if(!(0,b[c])(a[j[c]]||""))return!1;return!0}}),cL=bL((a,b)=>{bU(),cy(),bP(cw);var c=(cB(),bP(cz)),d=cK();b.exports=function(a,b){var e=d.getFileName();c.stat(e,function(f,g){if(f||!d.usePgPass(g,e))return b(void 0);var h=c.createReadStream(e);d.getPassword(a,h,b)})},b.exports.warnTo=d.warnTo}),cM={};bM(cM,{default:()=>cN});var cN,cO=bK(()=>{bU(),cN={}}),cP=bL((a,b)=>{bU();var c=(b3(),bP(b1)),d=(cB(),bP(cz));function e(a){if("/"===a.charAt(0)){var b=a.split(" ");return{host:b[0],database:b[1]}}var e=c.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(a)?encodeURI(a).replace(/\%25(\d\d)/g,"%$1"):a,!0),b=e.query;for(var f in b)Array.isArray(b[f])&&(b[f]=b[f][b[f].length-1]);var g=(e.auth||":").split(":");if(b.user=g[0],b.password=g.splice(1).join(":"),b.port=e.port,"socket:"==e.protocol)return b.host=decodeURI(e.pathname),b.database=e.query.db,b.client_encoding=e.query.encoding,b;b.host||(b.host=e.hostname);var h=e.pathname;if(!b.host&&h&&/^%2f/i.test(h)){var i=h.split("/");b.host=decodeURIComponent(i[0]),h=i.splice(1).join("/")}switch(h&&"/"===h.charAt(0)&&(h=h.slice(1)||null),b.database=h&&decodeURI(h),("true"===b.ssl||"1"===b.ssl)&&(b.ssl=!0),"0"===b.ssl&&(b.ssl=!1),(b.sslcert||b.sslkey||b.sslrootcert||b.sslmode)&&(b.ssl={}),b.sslcert&&(b.ssl.cert=d.readFileSync(b.sslcert).toString()),b.sslkey&&(b.ssl.key=d.readFileSync(b.sslkey).toString()),b.sslrootcert&&(b.ssl.ca=d.readFileSync(b.sslrootcert).toString()),b.sslmode){case"disable":b.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":b.ssl.rejectUnauthorized=!1}return b}bJ(e,"parse"),b.exports=e,e.parse=e}),cQ=bL((a,b)=>{bU();var c=(cO(),bP(cM)),d=cq(),e=cP().parse,f=bJ(function(a,b,c){return void 0===c?c=bB.env["PG"+a.toUpperCase()]:!1===c||(c=bB.env[c]),b[a]||c||d[a]},"val"),g=bJ(function(){switch(bB.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return d.ssl},"readSSLConfigFromEnvironment"),h=bJ(function(a){return"'"+(""+a).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),i=bJ(function(a,b,c){var d=b[c];null!=d&&a.push(c+"="+h(d))},"add"),j=class{constructor(a){(a="string"==typeof a?e(a):a||{}).connectionString&&(a=Object.assign({},a,e(a.connectionString))),this.user=f("user",a),this.database=f("database",a),void 0===this.database&&(this.database=this.user),this.port=parseInt(f("port",a),10),this.host=f("host",a),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:f("password",a)}),this.binary=f("binary",a),this.options=f("options",a),this.ssl=typeof a.ssl>"u"?g():a.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=f("client_encoding",a),this.replication=f("replication",a),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=f("application_name",a,"PGAPPNAME"),this.fallback_application_name=f("fallback_application_name",a,!1),this.statement_timeout=f("statement_timeout",a,!1),this.lock_timeout=f("lock_timeout",a,!1),this.idle_in_transaction_session_timeout=f("idle_in_transaction_session_timeout",a,!1),this.query_timeout=f("query_timeout",a,!1),void 0===a.connectionTimeoutMillis?this.connect_timeout=bB.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(a.connectionTimeoutMillis/1e3),!1===a.keepAlive?this.keepalives=0:!0===a.keepAlive&&(this.keepalives=1),"number"==typeof a.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(a.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(a){var b=[];i(b,this,"user"),i(b,this,"password"),i(b,this,"port"),i(b,this,"application_name"),i(b,this,"fallback_application_name"),i(b,this,"connect_timeout"),i(b,this,"options");var d="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(i(b,d,"sslmode"),i(b,d,"sslca"),i(b,d,"sslkey"),i(b,d,"sslcert"),i(b,d,"sslrootcert"),this.database&&b.push("dbname="+h(this.database)),this.replication&&b.push("replication="+h(this.replication)),this.host&&b.push("host="+h(this.host)),this.isDomainSocket)return a(null,b.join(" "));this.client_encoding&&b.push("client_encoding="+h(this.client_encoding)),c.lookup(this.host,function(c,d){return c?a(c,null):(b.push("hostaddr="+h(d)),a(null,b.join(" ")))})}};bJ(j,"ConnectionParameters"),b.exports=j}),cR=bL((a,b)=>{bU();var c=ce(),d=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,e=class{constructor(a,b){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=b,this.RowCtor=null,this.rowAsArray="array"===a,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var b;(b=a.text?d.exec(a.text):d.exec(a.command))&&(this.command=b[1],b[3]?(this.oid=parseInt(b[2],10),this.rowCount=parseInt(b[3],10)):b[2]&&(this.rowCount=parseInt(b[2],10)))}_parseRowAsArray(a){for(var b=Array(a.length),c=0,d=a.length;c<d;c++){var e=a[c];null!==e?b[c]=this._parsers[c](e):b[c]=null}return b}parseRow(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c],f=this.fields[c].name;null!==e?b[f]=this._parsers[c](e):b[f]=null}return b}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=Array(a.length));for(var b=0;b<a.length;b++){var d=a[b];this._types?this._parsers[b]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[b]=c.getTypeParser(d.dataTypeID,d.format||"text")}}};bJ(e,"Result"),b.exports=e}),cS=bL((a,b)=>{bU();var{EventEmitter:c}=bV(),d=cR(),e=cr(),f=class extends c{constructor(a,b,c){super(),a=e.normalizeQueryConfig(a,b,c),this.text=a.text,this.values=a.values,this.rows=a.rows,this.types=a.types,this.name=a.name,this.binary=a.binary,this.portal=a.portal||"",this.callback=a.callback,this._rowMode=a.rowMode,bB.domain&&a.callback&&(this.callback=bB.domain.bind(a.callback)),this._result=new d(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new d(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(a){this._checkForMultirow(),this._result.addFields(a.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(a){let b;if(!this._canceledDueToError){try{b=this._result.parseRow(a.fields)}catch(a){this._canceledDueToError=a;return}this.emit("row",b,this._result),this._accumulateRows&&this._result.addRow(b)}}handleCommandComplete(a,b){this._checkForMultirow(),this._result.addCommandComplete(a),this.rows&&b.sync()}handleEmptyQuery(a){this.rows&&a.sync()}handleError(a,b){if(this._canceledDueToError&&(a=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(a);this.emit("error",a)}handleReadyForQuery(a){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,a);if(this.callback)try{this.callback(null,this._results)}catch(a){bB.nextTick(()=>{throw a})}this.emit("end",this._results)}submit(a){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let b=a.parsedStatements[this.name];return this.text&&b&&this.text!==b?Error(`Prepared statements must be unique - '${this.name}\
' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(a):a.query(this.text),null)}hasBeenParsed(a){return this.name&&a.parsedStatements[this.name]}handlePortalSuspended(a){this._getRows(a,this.rows)}_getRows(a,b){a.execute({portal:this.portal,rows:b}),b?a.flush():a.sync()}prepare(a){this.isPreparedStatement=!0,this.hasBeenParsed(a)||a.parse({text:this.text,name:this.name,types:this.types});try{a.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:e.prepareValue})}catch(b){this.handleError(b,a);return}a.describe({type:"P",name:this.portal||""}),this._getRows(a,this.rows)}handleCopyInResponse(a){a.sendCopyFail("No source stream defined")}handleCopyData(a,b){}};bJ(f,"Query"),b.exports=f}),cT=bL(a=>{bU(),Object.defineProperty(a,"__esModule",{value:!0}),a.NoticeMessage=a.DataRowMessage=a.CommandCompleteMessage=a.ReadyForQueryMessage=a.NotificationResponseMessage=a.BackendKeyDataMessage=a.AuthenticationMD5Password=a.ParameterStatusMessage=a.ParameterDescriptionMessage=a.RowDescriptionMessage=a.Field=a.CopyResponse=a.CopyDataMessage=a.DatabaseError=a.copyDone=a.emptyQuery=a.replicationStart=a.portalSuspended=a.noData=a.closeComplete=a.bindComplete=a.parseComplete=void 0,a.parseComplete={name:"parseComplete",length:5},a.bindComplete={name:"bindComplete",length:5},a.closeComplete={name:"closeComplete",length:5},a.noData={name:"noData",length:5},a.portalSuspended={name:"portalSuspended",length:5},a.replicationStart={name:"replicationStart",length:4},a.emptyQuery={name:"emptyQuery",length:4},a.copyDone={name:"copyDone",length:4};var b=class extends Error{constructor(a,b,c){super(a),this.length=b,this.name=c}};bJ(b,"DatabaseError"),a.DatabaseError=b;var c=class{constructor(a,b){this.length=a,this.chunk=b,this.name="copyData"}};bJ(c,"CopyDataMessage"),a.CopyDataMessage=c;var d=class{constructor(a,b,c,d){this.length=a,this.name=b,this.binary=c,this.columnTypes=Array(d)}};bJ(d,"CopyResponse"),a.CopyResponse=d;var e=class{constructor(a,b,c,d,e,f,g){this.name=a,this.tableID=b,this.columnID=c,this.dataTypeID=d,this.dataTypeSize=e,this.dataTypeModifier=f,this.format=g}};bJ(e,"Field"),a.Field=e;var f=class{constructor(a,b){this.length=a,this.fieldCount=b,this.name="rowDescription",this.fields=Array(this.fieldCount)}};bJ(f,"RowDescriptionMessage"),a.RowDescriptionMessage=f;var g=class{constructor(a,b){this.length=a,this.parameterCount=b,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};bJ(g,"ParameterDescriptionMessage"),a.ParameterDescriptionMessage=g;var h=class{constructor(a,b,c){this.length=a,this.parameterName=b,this.parameterValue=c,this.name="parameterStatus"}};bJ(h,"ParameterStatusMessage"),a.ParameterStatusMessage=h;var i=class{constructor(a,b){this.length=a,this.salt=b,this.name="authenticationMD5Password"}};bJ(i,"AuthenticationMD5Password"),a.AuthenticationMD5Password=i;var j=class{constructor(a,b,c){this.length=a,this.processID=b,this.secretKey=c,this.name="backendKeyData"}};bJ(j,"BackendKeyDataMessage"),a.BackendKeyDataMessage=j;var k=class{constructor(a,b,c,d){this.length=a,this.processId=b,this.channel=c,this.payload=d,this.name="notification"}};bJ(k,"NotificationResponseMessage"),a.NotificationResponseMessage=k;var l=class{constructor(a,b){this.length=a,this.status=b,this.name="readyForQuery"}};bJ(l,"ReadyForQueryMessage"),a.ReadyForQueryMessage=l;var m=class{constructor(a,b){this.length=a,this.text=b,this.name="commandComplete"}};bJ(m,"CommandCompleteMessage"),a.CommandCompleteMessage=m;var n=class{constructor(a,b){this.length=a,this.fields=b,this.name="dataRow",this.fieldCount=b.length}};bJ(n,"DataRowMessage"),a.DataRowMessage=n;var o=class{constructor(a,b){this.length=a,this.message=b,this.name="notice"}};bJ(o,"NoticeMessage"),a.NoticeMessage=o}),cU=bL(a=>{bU(),Object.defineProperty(a,"__esModule",{value:!0}),a.Writer=void 0;var b=class{constructor(a=256){this.size=a,this.offset=5,this.headerPosition=0,this.buffer=bA.allocUnsafe(a)}ensure(a){if(this.buffer.length-this.offset<a){let b=this.buffer,c=b.length+(b.length>>1)+a;this.buffer=bA.allocUnsafe(c),b.copy(this.buffer)}}addInt32(a){return this.ensure(4),this.buffer[this.offset++]=a>>>24&255,this.buffer[this.offset++]=a>>>16&255,this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addInt16(a){return this.ensure(2),this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addCString(a){if(a){let b=bA.byteLength(a);this.ensure(b+1),this.buffer.write(a,this.offset,"utf-8"),this.offset+=b}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(a=""){let b=bA.byteLength(a);return this.ensure(b),this.buffer.write(a,this.offset),this.offset+=b,this}add(a){return this.ensure(a.length),a.copy(this.buffer,this.offset),this.offset+=a.length,this}join(a){if(a){this.buffer[this.headerPosition]=a;let b=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(b,this.headerPosition+1)}return this.buffer.slice(5*!a,this.offset)}flush(a){let b=this.join(a);return this.offset=5,this.headerPosition=0,this.buffer=bA.allocUnsafe(this.size),b}};bJ(b,"Writer"),a.Writer=b}),cV=bL(a=>{bU(),Object.defineProperty(a,"__esModule",{value:!0}),a.serialize=void 0;var b=cU(),c=new b.Writer,d=bJ(a=>{for(let b of(c.addInt16(3).addInt16(0),Object.keys(a)))c.addCString(b).addCString(a[b]);c.addCString("client_encoding").addCString("UTF8");let d=c.addCString("").flush(),e=d.length+4;return new b.Writer().addInt32(e).add(d).flush()},"startup"),e=bJ(()=>{let a=bA.allocUnsafe(8);return a.writeInt32BE(8,0),a.writeInt32BE(0x4d2162f,4),a},"requestSsl"),f=bJ(a=>c.addCString(a).flush(112),"password"),g=bJ(function(a,b){return c.addCString(a).addInt32(bA.byteLength(b)).addString(b),c.flush(112)},"sendSASLInitialResponseMessage"),h=bJ(function(a){return c.addString(a).flush(112)},"sendSCRAMClientFinalMessage"),i=bJ(a=>c.addCString(a).flush(81),"query"),j=[],k=bJ(a=>{let b=a.name||"";b.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",b,b.length),console.error("This can cause conflicts and silent errors executing queries"));let d=a.types||j,e=d.length,f=c.addCString(b).addCString(a.text).addInt16(e);for(let a=0;a<e;a++)f.addInt32(d[a]);return c.flush(80)},"parse"),l=new b.Writer,m=bJ(function(a,b){for(let d=0;d<a.length;d++){let e=b?b(a[d],d):a[d];null==e?(c.addInt16(0),l.addInt32(-1)):e instanceof bA?(c.addInt16(1),l.addInt32(e.length),l.add(e)):(c.addInt16(0),l.addInt32(bA.byteLength(e)),l.addString(e))}},"writeValues"),n=bJ((a={})=>{let b=a.portal||"",d=a.statement||"",e=a.binary||!1,f=a.values||j,g=f.length;return c.addCString(b).addCString(d),c.addInt16(g),m(f,a.valueMapper),c.addInt16(g),c.add(l.flush()),c.addInt16(+!!e),c.flush(66)},"bind"),o=bA.from([69,0,0,0,9,0,0,0,0,0]),p=bJ(a=>{if(!a||!a.portal&&!a.rows)return o;let b=a.portal||"",c=a.rows||0,d=bA.byteLength(b),e=4+d+1+4,f=bA.allocUnsafe(1+e);return f[0]=69,f.writeInt32BE(e,1),f.write(b,5,"utf-8"),f[d+5]=0,f.writeUInt32BE(c,f.length-4),f},"execute"),q=bJ((a,b)=>{let c=bA.allocUnsafe(16);return c.writeInt32BE(16,0),c.writeInt16BE(1234,4),c.writeInt16BE(5678,6),c.writeInt32BE(a,8),c.writeInt32BE(b,12),c},"cancel"),r=bJ((a,b)=>{let c=4+bA.byteLength(b)+1,d=bA.allocUnsafe(1+c);return d[0]=a,d.writeInt32BE(c,1),d.write(b,5,"utf-8"),d[c]=0,d},"cstringMessage"),s=c.addCString("P").flush(68),t=c.addCString("S").flush(68),u=bJ(a=>a.name?r(68,`${a.type}${a.name||""}`):"P"===a.type?s:t,"describe"),v=bJ(a=>r(67,`${a.type}${a.name||""}`),"close"),w=bJ(a=>c.add(a).flush(100),"copyData"),x=bJ(a=>r(102,a),"copyFail"),y=bJ(a=>bA.from([a,0,0,0,4]),"codeOnlyBuffer"),z=y(72),A=y(83),B=y(88),C=y(99);a.serialize={startup:d,password:f,requestSsl:e,sendSASLInitialResponseMessage:g,sendSCRAMClientFinalMessage:h,query:i,parse:k,bind:n,execute:p,describe:u,close:v,flush:bJ(()=>z,"flush"),sync:bJ(()=>A,"sync"),end:bJ(()=>B,"end"),copyData:w,copyDone:bJ(()=>C,"copyDone"),copyFail:x,cancel:q}}),cW=bL(a=>{bU(),Object.defineProperty(a,"__esModule",{value:!0}),a.BufferReader=void 0;var b=bA.allocUnsafe(0),c=class{constructor(a=0){this.offset=a,this.buffer=b,this.encoding="utf-8"}setBuffer(a,b){this.offset=a,this.buffer=b}int16(){let a=this.buffer.readInt16BE(this.offset);return this.offset+=2,a}byte(){let a=this.buffer[this.offset];return this.offset++,a}int32(){let a=this.buffer.readInt32BE(this.offset);return this.offset+=4,a}uint32(){let a=this.buffer.readUInt32BE(this.offset);return this.offset+=4,a}string(a){let b=this.buffer.toString(this.encoding,this.offset,this.offset+a);return this.offset+=a,b}cstring(){let a=this.offset,b=a;for(;0!==this.buffer[b++];);return this.offset=b,this.buffer.toString(this.encoding,a,b-1)}bytes(a){let b=this.buffer.slice(this.offset,this.offset+a);return this.offset+=a,b}};bJ(c,"BufferReader"),a.BufferReader=c}),cX=bL(a=>{bU(),Object.defineProperty(a,"__esModule",{value:!0}),a.Parser=void 0;var b=cT(),c=cW(),d=bA.allocUnsafe(0),e=class{constructor(a){if(this.buffer=d,this.bufferLength=0,this.bufferOffset=0,this.reader=new c.BufferReader,a?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=a?.mode||"text"}parse(a,b){this.mergeBuffer(a);let c=this.bufferOffset+this.bufferLength,e=this.bufferOffset;for(;e+5<=c;){let a=this.buffer[e],d=this.buffer.readUInt32BE(e+1),f=1+d;if(f+e<=c)b(this.handlePacket(e+5,a,d,this.buffer)),e+=f;else break}e===c?(this.buffer=d,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=c-e,this.bufferOffset=e)}mergeBuffer(a){if(this.bufferLength>0){let b=this.bufferLength+a.byteLength;if(b+this.bufferOffset>this.buffer.byteLength){let a;if(b<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)a=this.buffer;else{let c=2*this.buffer.byteLength;for(;b>=c;)c*=2;a=bA.allocUnsafe(c)}this.buffer.copy(a,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=a,this.bufferOffset=0}a.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=b}else this.buffer=a,this.bufferOffset=0,this.bufferLength=a.byteLength}handlePacket(a,c,d,e){switch(c){case 50:return b.bindComplete;case 49:return b.parseComplete;case 51:return b.closeComplete;case 110:return b.noData;case 115:return b.portalSuspended;case 99:return b.copyDone;case 87:return b.replicationStart;case 73:return b.emptyQuery;case 68:return this.parseDataRowMessage(a,d,e);case 67:return this.parseCommandCompleteMessage(a,d,e);case 90:return this.parseReadyForQueryMessage(a,d,e);case 65:return this.parseNotificationMessage(a,d,e);case 82:return this.parseAuthenticationResponse(a,d,e);case 83:return this.parseParameterStatusMessage(a,d,e);case 75:return this.parseBackendKeyData(a,d,e);case 69:return this.parseErrorMessage(a,d,e,"error");case 78:return this.parseErrorMessage(a,d,e,"notice");case 84:return this.parseRowDescriptionMessage(a,d,e);case 116:return this.parseParameterDescriptionMessage(a,d,e);case 71:return this.parseCopyInMessage(a,d,e);case 72:return this.parseCopyOutMessage(a,d,e);case 100:return this.parseCopyData(a,d,e);default:return new b.DatabaseError("received invalid response: "+c.toString(16),d,"error")}}parseReadyForQueryMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.string(1);return new b.ReadyForQueryMessage(c,e)}parseCommandCompleteMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.cstring();return new b.CommandCompleteMessage(c,e)}parseCopyData(a,c,d){let e=d.slice(a,a+(c-4));return new b.CopyDataMessage(c,e)}parseCopyInMessage(a,b,c){return this.parseCopyMessage(a,b,c,"copyInResponse")}parseCopyOutMessage(a,b,c){return this.parseCopyMessage(a,b,c,"copyOutResponse")}parseCopyMessage(a,c,d,e){this.reader.setBuffer(a,d);let f=0!==this.reader.byte(),g=this.reader.int16(),h=new b.CopyResponse(c,e,f,g);for(let a=0;a<g;a++)h.columnTypes[a]=this.reader.int16();return h}parseNotificationMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f=this.reader.cstring(),g=this.reader.cstring();return new b.NotificationResponseMessage(c,e,f,g)}parseRowDescriptionMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=new b.RowDescriptionMessage(c,e);for(let a=0;a<e;a++)f.fields[a]=this.parseField();return f}parseField(){let a=this.reader.cstring(),c=this.reader.uint32(),d=this.reader.int16(),e=this.reader.uint32(),f=this.reader.int16(),g=this.reader.int32(),h=0===this.reader.int16()?"text":"binary";return new b.Field(a,c,d,e,f,g,h)}parseParameterDescriptionMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=new b.ParameterDescriptionMessage(c,e);for(let a=0;a<e;a++)f.dataTypeIDs[a]=this.reader.int32();return f}parseDataRowMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=Array(e);for(let a=0;a<e;a++){let b=this.reader.int32();f[a]=-1===b?null:this.reader.string(b)}return new b.DataRowMessage(c,f)}parseParameterStatusMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.cstring(),f=this.reader.cstring();return new b.ParameterStatusMessage(c,e,f)}parseBackendKeyData(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f=this.reader.int32();return new b.BackendKeyDataMessage(c,e,f)}parseAuthenticationResponse(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f={name:"authenticationOk",length:c};switch(e){case 0:break;case 3:8===f.length&&(f.name="authenticationCleartextPassword");break;case 5:if(12===f.length){f.name="authenticationMD5Password";let a=this.reader.bytes(4);return new b.AuthenticationMD5Password(c,a)}break;case 10:{let a;f.name="authenticationSASL",f.mechanisms=[];do(a=this.reader.cstring())&&f.mechanisms.push(a);while(a)}break;case 11:f.name="authenticationSASLContinue",f.data=this.reader.string(c-8);break;case 12:f.name="authenticationSASLFinal",f.data=this.reader.string(c-8);break;default:throw Error("Unknown authenticationOk message type "+e)}return f}parseErrorMessage(a,c,d,e){this.reader.setBuffer(a,d);let f={},g=this.reader.string(1);for(;"\0"!==g;)f[g]=this.reader.cstring(),g=this.reader.string(1);let h=f.M,i="notice"===e?new b.NoticeMessage(c,h):new b.DatabaseError(h,c,e);return i.severity=f.S,i.code=f.C,i.detail=f.D,i.hint=f.H,i.position=f.P,i.internalPosition=f.p,i.internalQuery=f.q,i.where=f.W,i.schema=f.s,i.table=f.t,i.column=f.c,i.dataType=f.d,i.constraint=f.n,i.file=f.F,i.line=f.L,i.routine=f.R,i}};bJ(e,"Parser"),a.Parser=e}),cY=bL(a=>{bU(),Object.defineProperty(a,"__esModule",{value:!0}),a.DatabaseError=a.serialize=a.parse=void 0;var b=cT();Object.defineProperty(a,"DatabaseError",{enumerable:!0,get:bJ(function(){return b.DatabaseError},"get")});var c=cV();Object.defineProperty(a,"serialize",{enumerable:!0,get:bJ(function(){return c.serialize},"get")});var d=cX();function e(a,b){let c=new d.Parser;return a.on("data",a=>c.parse(a,b)),new Promise(b=>a.on("end",()=>b()))}bJ(e,"parse"),a.parse=e}),cZ={};function c$({socket:a,servername:b}){return a.startTls(b),a}bM(cZ,{connect:()=>c$});var c_=bK(()=>{bU(),bJ(c$,"connect")}),c0=bL((a,b)=>{bU();var c=(b0(),bP(bW)),d=bV().EventEmitter,{parse:e,serialize:f}=cY(),g=f.flush(),h=f.sync(),i=f.end(),j=class extends d{constructor(a){super(),a=a||{},this.stream=a.stream||new c.Socket,this._keepAlive=a.keepAlive,this._keepAliveInitialDelayMillis=a.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=a.ssl||!1,this._ending=!1,this._emitMessage=!1;var b=this;this.on("newListener",function(a){"message"===a&&(b._emitMessage=!0)})}connect(a,b){var d=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(a,b),this.stream.once("connect",function(){d._keepAlive&&d.stream.setKeepAlive(!0,d._keepAliveInitialDelayMillis),d.emit("connect")});let e=bJ(function(a){d._ending&&("ECONNRESET"===a.code||"EPIPE"===a.code)||d.emit("error",a)},"reportStreamError");if(this.stream.on("error",e),this.stream.on("close",function(){d.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return d.stream.end(),d.emit("error",Error("The server does not support SSL connections"));default:return d.stream.end(),d.emit("error",Error("There was an error establishing an SSL connection"))}var f=(c_(),bP(cZ));let g={socket:d.stream};!0!==d.ssl&&(Object.assign(g,d.ssl),"key"in d.ssl&&(g.key=d.ssl.key)),0===c.isIP(b)&&(g.servername=b);try{d.stream=f.connect(g)}catch(a){return d.emit("error",a)}d.attachListeners(d.stream),d.stream.on("error",e),d.emit("sslconnect")})}attachListeners(a){a.on("end",()=>{this.emit("end")}),e(a,a=>{var b="error"===a.name?"errorMessage":a.name;this._emitMessage&&this.emit("message",a),this.emit(b,a)})}requestSsl(){this.stream.write(f.requestSsl())}startup(a){this.stream.write(f.startup(a))}cancel(a,b){this._send(f.cancel(a,b))}password(a){this._send(f.password(a))}sendSASLInitialResponseMessage(a,b){this._send(f.sendSASLInitialResponseMessage(a,b))}sendSCRAMClientFinalMessage(a){this._send(f.sendSCRAMClientFinalMessage(a))}_send(a){return!!this.stream.writable&&this.stream.write(a)}query(a){this._send(f.query(a))}parse(a){this._send(f.parse(a))}bind(a){this._send(f.bind(a))}execute(a){this._send(f.execute(a))}flush(){this.stream.writable&&this.stream.write(g)}sync(){this._ending=!0,this._send(g),this._send(h)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){return(this._ending=!0,this._connecting&&this.stream.writable)?this.stream.write(i,()=>{this.stream.end()}):void this.stream.end()}close(a){this._send(f.close(a))}describe(a){this._send(f.describe(a))}sendCopyFromChunk(a){this._send(f.copyData(a))}endCopyFrom(){this._send(f.copyDone())}sendCopyFail(a){this._send(f.copyFail(a))}};bJ(j,"Connection"),b.exports=j}),c1=bL((a,b)=>{bU();var c=bV().EventEmitter,d=(cu(),bP(cs),cr()),e=cv(),f=cL(),g=cf(),h=cQ(),i=cS(),j=cq(),k=c0(),l=class extends c{constructor(a){super(),this.connectionParameters=new h(a),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var b=a||{};this._Promise=b.Promise||by.Promise,this._types=new g(b.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=b.connection||new k({stream:b.stream,ssl:this.connectionParameters.ssl,keepAlive:b.keepAlive||!1,keepAliveInitialDelayMillis:b.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=b.binary||j.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=b.connectionTimeoutMillis||0}_errorAllQueries(a){let b=bJ(b=>{bB.nextTick(()=>{b.handleError(a,this.connection)})},"enqueueError");this.activeQuery&&(b(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(b),this.queryQueue.length=0}_connect(a){var b=this,c=this.connection;if(this._connectionCallback=a,this._connecting||this._connected){let b=Error("Client has already been connected. You cannot reuse a client.");bB.nextTick(()=>{a(b)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{c._ending=!0,c.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?c.connect(this.host+"/.s.PGSQL."+this.port):c.connect(this.port,this.host),c.on("connect",function(){b.ssl?c.requestSsl():c.startup(b.getStartupConf())}),c.on("sslconnect",function(){c.startup(b.getStartupConf())}),this._attachListeners(c),c.once("end",()=>{let a=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(a),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(a):this._handleErrorEvent(a):this._connectionError||this._handleErrorEvent(a)),bB.nextTick(()=>{this.emit("end")})})}connect(a){return a?void this._connect(a):new this._Promise((a,b)=>{this._connect(c=>{c?b(c):a()})})}_attachListeners(a){a.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),a.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),a.on("authenticationSASL",this._handleAuthSASL.bind(this)),a.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),a.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),a.on("backendKeyData",this._handleBackendKeyData.bind(this)),a.on("error",this._handleErrorEvent.bind(this)),a.on("errorMessage",this._handleErrorMessage.bind(this)),a.on("readyForQuery",this._handleReadyForQuery.bind(this)),a.on("notice",this._handleNotice.bind(this)),a.on("rowDescription",this._handleRowDescription.bind(this)),a.on("dataRow",this._handleDataRow.bind(this)),a.on("portalSuspended",this._handlePortalSuspended.bind(this)),a.on("emptyQuery",this._handleEmptyQuery.bind(this)),a.on("commandComplete",this._handleCommandComplete.bind(this)),a.on("parseComplete",this._handleParseComplete.bind(this)),a.on("copyInResponse",this._handleCopyInResponse.bind(this)),a.on("copyData",this._handleCopyData.bind(this)),a.on("notification",this._handleNotification.bind(this))}_checkPgPass(a){let b=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(c=>{if(void 0!==c){if("string"!=typeof c)return void b.emit("error",TypeError("Password must be a string"));this.connectionParameters.password=this.password=c}else this.connectionParameters.password=this.password=null;a()}).catch(a=>{b.emit("error",a)}):null!==this.password?a():f(this.connectionParameters,b=>{void 0!==b&&(this.connectionParameters.password=this.password=b),a()})}_handleAuthCleartextPassword(a){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(a){this._checkPgPass(()=>{let b=d.postgresMd5PasswordHash(this.user,this.password,a.salt);this.connection.password(b)})}_handleAuthSASL(a){this._checkPgPass(()=>{this.saslSession=e.startSession(a.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(a){e.continueSession(this.saslSession,this.password,a.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(a){e.finalizeSession(this.saslSession,a.data),this.saslSession=null}_handleBackendKeyData(a){this.processID=a.processID,this.secretKey=a.secretKey}_handleReadyForQuery(a){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:b}=this;this.activeQuery=null,this.readyForQuery=!0,b&&b.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(a){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(a);this.emit("error",a)}}_handleErrorEvent(a){if(this._connecting)return this._handleErrorWhileConnecting(a);this._queryable=!1,this._errorAllQueries(a),this.emit("error",a)}_handleErrorMessage(a){if(this._connecting)return this._handleErrorWhileConnecting(a);let b=this.activeQuery;if(!b)return void this._handleErrorEvent(a);this.activeQuery=null,b.handleError(a,this.connection)}_handleRowDescription(a){this.activeQuery.handleRowDescription(a)}_handleDataRow(a){this.activeQuery.handleDataRow(a)}_handlePortalSuspended(a){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(a){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(a){this.activeQuery.handleCommandComplete(a,this.connection)}_handleParseComplete(a){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(a){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(a){this.activeQuery.handleCopyData(a,this.connection)}_handleNotification(a){this.emit("notification",a)}_handleNotice(a){this.emit("notice",a)}getStartupConf(){var a=this.connectionParameters,b={user:a.user,database:a.database},c=a.application_name||a.fallback_application_name;return c&&(b.application_name=c),a.replication&&(b.replication=""+a.replication),a.statement_timeout&&(b.statement_timeout=String(parseInt(a.statement_timeout,10))),a.lock_timeout&&(b.lock_timeout=String(parseInt(a.lock_timeout,10))),a.idle_in_transaction_session_timeout&&(b.idle_in_transaction_session_timeout=String(parseInt(a.idle_in_transaction_session_timeout,10))),a.options&&(b.options=a.options),b}cancel(a,b){if(a.activeQuery===b){var c=this.connection;this.host&&0===this.host.indexOf("/")?c.connect(this.host+"/.s.PGSQL."+this.port):c.connect(this.port,this.host),c.on("connect",function(){c.cancel(a.processID,a.secretKey)})}else -1!==a.queryQueue.indexOf(b)&&a.queryQueue.splice(a.queryQueue.indexOf(b),1)}setTypeParser(a,b,c){return this._types.setTypeParser(a,b,c)}getTypeParser(a,b){return this._types.getTypeParser(a,b)}escapeIdentifier(a){return'"'+a.replace(/"/g,'""')+'"'}escapeLiteral(a){for(var b=!1,c="'",d=0;d<a.length;d++){var e=a[d];"'"===e?c+=e+e:"\\"===e?(c+=e+e,b=!0):c+=e}return c+="'",!0===b&&(c=" E"+c),c}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let a=this.activeQuery.submit(this.connection);a&&bB.nextTick(()=>{this.activeQuery.handleError(a,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(a,b,c){var d,e,f,g,h;if(null==a)throw TypeError("Client was passed a null or undefined query");return"function"==typeof a.submit?(f=a.query_timeout||this.connectionParameters.query_timeout,e=d=a,"function"==typeof b&&(d.callback=d.callback||b)):(f=this.connectionParameters.query_timeout,(d=new i(a,b,c)).callback||(e=new this._Promise((a,b)=>{d.callback=(c,d)=>c?b(c):a(d)}))),f&&(h=d.callback,g=setTimeout(()=>{var a=Error("Query read timeout");bB.nextTick(()=>{d.handleError(a,this.connection)}),h(a),d.callback=()=>{};var b=this.queryQueue.indexOf(d);b>-1&&this.queryQueue.splice(b,1),this._pulseQueryQueue()},f),d.callback=(a,b)=>{clearTimeout(g),h(a,b)}),this.binary&&!d.binary&&(d.binary=!0),d._result&&!d._result._types&&(d._result._types=this._types),this._queryable?this._ending?bB.nextTick(()=>{d.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(d),this._pulseQueryQueue()):bB.nextTick(()=>{d.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),e}ref(){this.connection.ref()}unref(){this.connection.unref()}end(a){if(this._ending=!0,!this.connection._connecting)if(!a)return this._Promise.resolve();else a();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!a)return new this._Promise(a=>{this.connection.once("end",a)});this.connection.once("end",a)}};bJ(l,"Client"),l.Query=i,b.exports=l}),c2=bL((a,b)=>{bU();var c=bV().EventEmitter,d=bJ(function(){},"NOOP"),e=bJ((a,b)=>{let c=a.findIndex(b);return -1===c?void 0:a.splice(c,1)[0]},"removeWhere"),f=class{constructor(a,b,c){this.client=a,this.idleListener=b,this.timeoutId=c}};bJ(f,"IdleItem");var g=class{constructor(a){this.callback=a}};function h(){throw Error("Release called on client which has already been released to the pool.")}function i(a,b){let c,d;return b?{callback:b,result:void 0}:{callback:bJ(function(a,b){a?c(a):d(b)},"cb"),result:new a(function(a,b){d=a,c=b}).catch(a=>{throw Error.captureStackTrace(a),a})}}function j(a,b){return bJ(function c(d){d.client=b,b.removeListener("error",c),b.on("error",()=>{a.log("additional client error after disconnection due to error",d)}),a._remove(b),a.emit("error",d,b)},"idleListener")}bJ(g,"PendingItem"),bJ(h,"throwOnDoubleRelease"),bJ(i,"promisify"),bJ(j,"makeIdleListener");var k=class extends c{constructor(a,b){super(),this.options=Object.assign({},a),null!=a&&"password"in a&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:a.password}),null!=a&&a.ssl&&a.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||b||da().Client,this.Promise=this.options.Promise||by.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(a=>{this._remove(a.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;let a=this._pendingQueue.shift();if(this._idle.length){let b=this._idle.pop();clearTimeout(b.timeoutId);let c=b.client;c.ref&&c.ref();let d=b.idleListener;return this._acquireClient(c,a,d,!1)}if(!this._isFull())return this.newClient(a);throw Error("unexpected condition")}_remove(a){let b=e(this._idle,b=>b.client===a);void 0!==b&&clearTimeout(b.timeoutId),this._clients=this._clients.filter(b=>b!==a),a.end(),this.emit("remove",a)}connect(a){if(this.ending){let b=Error("Cannot use a pool after calling end on the pool");return a?a(b):this.Promise.reject(b)}let b=i(this.Promise,a),c=b.result;if(this._isFull()||this._idle.length){if(this._idle.length&&bB.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new g(b.callback)),c;let a=bJ((a,c,d)=>{clearTimeout(f),b.callback(a,c,d)},"queueCallback"),d=new g(a),f=setTimeout(()=>{e(this._pendingQueue,b=>b.callback===a),d.timedOut=!0,b.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return f.unref&&f.unref(),this._pendingQueue.push(d),c}return this.newClient(new g(b.callback)),c}newClient(a){let b=new this.Client(this.options);this._clients.push(b);let c=j(this,b);this.log("checking client timeout");let e,f=!1;this.options.connectionTimeoutMillis&&(e=setTimeout(()=>{this.log("ending client due to timeout"),f=!0,b.connection?b.connection.stream.destroy():b.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),b.connect(h=>{if(e&&clearTimeout(e),b.on("error",c),h)this.log("client failed to connect",h),this._clients=this._clients.filter(a=>a!==b),f&&(h=Error("Connection terminated due to connection timeout",{cause:h})),this._pulseQueue(),a.timedOut||a.callback(h,void 0,d);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(b),-1!==this._idle.findIndex(a=>a.client===b)&&this._acquireClient(b,new g((a,b,c)=>c()),c,!1)},1e3*this.options.maxLifetimeSeconds);a.unref(),b.once("end",()=>clearTimeout(a))}return this._acquireClient(b,a,c,!0)}})}_acquireClient(a,b,c,e){e&&this.emit("connect",a),this.emit("acquire",a),a.release=this._releaseOnce(a,c),a.removeListener("error",c),b.timedOut?e&&this.options.verify?this.options.verify(a,a.release):a.release():e&&this.options.verify?this.options.verify(a,c=>{if(c)return a.release(c),b.callback(c,void 0,d);b.callback(void 0,a,a.release)}):b.callback(void 0,a,a.release)}_releaseOnce(a,b){let c=!1;return d=>{c&&h(),c=!0,this._release(a,b,d)}}_release(a,b,c){let d;if(a.on("error",b),a._poolUseCount=(a._poolUseCount||0)+1,this.emit("release",c,a),c||this.ending||!a._queryable||a._ending||a._poolUseCount>=this.options.maxUses){a._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(a),this._pulseQueue();return}if(this._expired.has(a)){this.log("remove expired client"),this._expired.delete(a),this._remove(a),this._pulseQueue();return}this.options.idleTimeoutMillis&&this._isAboveMin()&&(d=setTimeout(()=>{this.log("remove idle client"),this._remove(a)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&d.unref()),this.options.allowExitOnIdle&&a.unref(),this._idle.push(new f(a,b,d)),this._pulseQueue()}query(a,b,c){if("function"==typeof a){let b=i(this.Promise,a);return bz(function(){return b.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),b.result}"function"==typeof b&&(c=b,b=void 0);let d=i(this.Promise,c);return c=d.callback,this.connect((d,e)=>{if(d)return c(d);let f=!1,g=bJ(a=>{f||(f=!0,e.release(a),c(a))},"onError");e.once("error",g),this.log("dispatching query");try{e.query(a,b,(a,b)=>{if(this.log("query dispatched"),e.removeListener("error",g),!f)return f=!0,e.release(a),a?c(a):c(void 0,b)})}catch(a){return e.release(a),c(a)}}),d.result}end(a){if(this.log("ending"),this.ending){let b=Error("Called end on pool more than once");return a?a(b):this.Promise.reject(b)}this.ending=!0;let b=i(this.Promise,a);return this._endCallback=b.callback,this._pulseQueue(),b.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((a,b)=>a+ +!!this._expired.has(b),0)}get totalCount(){return this._clients.length}};bJ(k,"Pool"),b.exports=k}),c3={};bM(c3,{default:()=>c4});var c4,c5=bK(()=>{bU(),c4={}}),c6=bL((a,b)=>{b.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),c7=bL((a,b)=>{bU();var c=bV().EventEmitter,d=(cu(),bP(cs)),e=cr(),f=b.exports=function(a,b,d){c.call(this),a=e.normalizeQueryConfig(a,b,d),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode="array"===a.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(a){"row"===a&&(this._emitRowEvents=!0)}).bind(this))};d.inherits(f,c);var g={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};f.prototype.handleError=function(a){var b=this.native.pq.resultErrorFields();if(b)for(var c in b)a[g[c]||c]=b[c];this.callback?this.callback(a):this.emit("error",a),this.state="error"},f.prototype.then=function(a,b){return this._getPromise().then(a,b)},f.prototype.catch=function(a){return this._getPromise().catch(a)},f.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(a,b){this._once("end",a),this._once("error",b)}).bind(this))),this._promise},f.prototype.submit=function(a){this.state="running";var b=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var c=bJ(function(c,d,e){if(a.native.arrayMode=!1,bz(function(){b.emit("_done")}),c)return b.handleError(c);b._emitRowEvents&&(e.length>1?d.forEach((a,c)=>{a.forEach(a=>{b.emit("row",a,e[c])})}):d.forEach(function(a){b.emit("row",a,e)})),b.state="end",b.emit("end",e),b.callback&&b.callback(null,e)},"after");if(bB.domain&&(c=bB.domain.bind(c)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var d=(this.values||[]).map(e.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let a=Error(`Prepa\
red statements must be unique - '${this.name}' was used for a different statement`);return c(a)}return a.native.execute(this.name,d,c)}return a.native.prepare(this.name,this.text,d.length,function(e){return e?c(e):(a.namedQueries[b.name]=b.text,b.native.execute(b.name,d,c))})}if(this.values){if(!Array.isArray(this.values)){let a=Error("Query values must be an array");return c(a)}var f=this.values.map(e.prepareValue);a.native.query(this.text,f,c)}else a.native.query(this.text,c)}}),c8=bL((a,b)=>{bU();var c=(c5(),bP(c3)),d=cf(),e=(c6(),bV().EventEmitter),f=(cu(),bP(cs)),g=cQ(),h=c7(),i=b.exports=function(a){e.call(this),a=a||{},this._Promise=a.Promise||by.Promise,this._types=new d(a.types),this.native=new c({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var b=this.connectionParameters=new g(a);this.user=b.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:b.password}),this.database=b.database,this.host=b.host,this.port=b.port,this.namedQueries={}};i.Query=h,f.inherits(i,e),i.prototype._errorAllQueries=function(a){let b=bJ(b=>{bB.nextTick(()=>{b.native=this.native,b.handleError(a)})},"enqueueError");this._hasActiveQuery()&&(b(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(b),this._queryQueue.length=0},i.prototype._connect=function(a){var b=this;if(this._connecting)return void bB.nextTick(()=>a(Error("Client has already been connected. You cannot reuse a client.")));this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(c,d){if(c)return a(c);b.native.connect(d,function(c){if(c)return b.native.end(),a(c);b._connected=!0,b.native.on("error",function(a){b._queryable=!1,b._errorAllQueries(a),b.emit("error",a)}),b.native.on("notification",function(a){b.emit("notification",{channel:a.relname,payload:a.extra})}),b.emit("connect"),b._pulseQueryQueue(!0),a()})})},i.prototype.connect=function(a){return a?void this._connect(a):new this._Promise((a,b)=>{this._connect(c=>{c?b(c):a()})})},i.prototype.query=function(a,b,c){var d,e,f,g,i;if(null==a)throw TypeError("Client was passed a null or undefined query");if("function"==typeof a.submit)f=a.query_timeout||this.connectionParameters.query_timeout,e=d=a,"function"==typeof b&&(a.callback=b);else if(f=this.connectionParameters.query_timeout,!(d=new h(a,b,c)).callback){let a,b;e=new this._Promise((c,d)=>{a=c,b=d}),d.callback=(c,d)=>c?b(c):a(d)}return f&&(i=d.callback,g=setTimeout(()=>{var a=Error("Query read timeout");bB.nextTick(()=>{d.handleError(a,this.connection)}),i(a),d.callback=()=>{};var b=this._queryQueue.indexOf(d);b>-1&&this._queryQueue.splice(b,1),this._pulseQueryQueue()},f),d.callback=(a,b)=>{clearTimeout(g),i(a,b)}),this._queryable?this._ending?(d.native=this.native,bB.nextTick(()=>{d.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(d),this._pulseQueryQueue()):(d.native=this.native,bB.nextTick(()=>{d.handleError(Error("Client has encountered a connection error and is not queryable"))})),e},i.prototype.end=function(a){var b,c=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,a)),a||(b=new this._Promise(function(b,c){a=bJ(a=>a?c(a):b(),"cb")})),this.native.end(function(){c._errorAllQueries(Error("Connection terminated")),bB.nextTick(()=>{c.emit("end"),a&&a()})}),b},i.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},i.prototype._pulseQueryQueue=function(a){if(this._connected&&!this._hasActiveQuery()){var b=this._queryQueue.shift();if(!b){a||this.emit("drain");return}this._activeQuery=b,b.submit(this);var c=this;b.once("_done",function(){c._pulseQueryQueue()})}},i.prototype.cancel=function(a){this._activeQuery===a?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(a)&&this._queryQueue.splice(this._queryQueue.indexOf(a),1)},i.prototype.ref=function(){},i.prototype.unref=function(){},i.prototype.setTypeParser=function(a,b,c){return this._types.setTypeParser(a,b,c)},i.prototype.getTypeParser=function(a,b){return this._types.getTypeParser(a,b)}}),c9=bL((a,b)=>{bU(),b.exports=c8()}),da=bL((a,b)=>{bU();var c=c1(),d=cq(),e=c0(),f=c2(),{DatabaseError:g}=cY(),h=bJ(a=>{var b;return bJ(b=class extends f{constructor(b){super(b,a)}},"BoundPool"),b},"poolFactory"),i=bJ(function(a){this.defaults=d,this.Client=a,this.Query=this.Client.Query,this.Pool=h(this.Client),this._pools=[],this.Connection=e,this.types=ce(),this.DatabaseError=g},"PG");"u">typeof bB.env.NODE_PG_FORCE_NATIVE?b.exports=new i(c9()):(b.exports=new i(c),Object.defineProperty(b.exports,"native",{configurable:!0,enumerable:!1,get(){var a=null;try{a=new i(c9())}catch(a){if("MODULE_NOT_FOUND"!==a.code)throw a}return Object.defineProperty(b.exports,"native",{value:a}),a}}))});bU(),bU(),b0(),b3(),bU();var db=Object.defineProperty,dc=Object.defineProperties,dd=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,df=Object.prototype.hasOwnProperty,dg=Object.prototype.propertyIsEnumerable,dh=bJ((a,b,c)=>b in a?db(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,"__defNormalProp"),di=bJ((a,b)=>{for(var c in b||(b={}))df.call(b,c)&&dh(a,c,b[c]);if(de)for(var c of de(b))dg.call(b,c)&&dh(a,c,b[c]);return a},"__spreadValues"),dj=bJ((a,b)=>dc(a,dd(b)),"__spreadProps"),dk=2===new Uint8Array(new Uint16Array([258]).buffer)[0],dl=new TextDecoder,dm=new TextEncoder,dn=dm.encode("0123456789abcdef"),dp=dm.encode("0123456789ABCDEF"),dq=dm.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").slice();function dr(a,{alphabet:b,scratchArr:c}={}){if(!i)if(i=new Uint16Array(256),j=new Uint16Array(256),dk)for(let a=0;a<256;a++)i[a]=dn[15&a]<<8|dn[a>>>4],j[a]=dp[15&a]<<8|dp[a>>>4];else for(let a=0;a<256;a++)i[a]=dn[15&a]|dn[a>>>4]<<8,j[a]=dp[15&a]|dp[a>>>4]<<8;a.byteOffset%4!=0&&(a=new Uint8Array(a));let d=a.length,e=d>>>2,f=c||new Uint16Array(d),g=new Uint32Array(a.buffer,a.byteOffset,e),h=new Uint32Array(f.buffer,f.byteOffset,d>>>1),k="upper"===b?j:i,l=0,m=0,n;if(dk)for(;l<e;)n=g[l++],h[m++]=k[n>>>8&255]<<16|k[255&n],h[m++]=k[n>>>24]<<16|k[n>>>16&255];else for(;l<e;)n=g[l++],h[m++]=k[n>>>24]<<16|k[n>>>16&255],h[m++]=k[n>>>8&255]<<16|k[255&n];for(l<<=2;l<d;)f[l]=k[a[l++]];return dl.decode(f.subarray(0,d))}function ds(a,b={}){let c="",d=a.length,e=Math.ceil(d/504e3),f=new Uint16Array(e>1?504e3:d);for(let d=0;d<e;d++){let e=504e3*d,g=e+504e3;c+=dr(a.subarray(e,g),dj(di({},b),{scratchArr:f}))}return c}function dt(a,b={}){return"upper"!==b.alphabet&&"function"==typeof a.toHex?a.toHex():ds(a,b)}dq[62]=45,dq[63]=95,bJ(dr,"_toHex"),bJ(ds,"_toHexChunked"),bJ(dt,"toHex"),bU();var du=class a{constructor(a,b){this.strings=a,this.values=b}toParameterizedQuery(b={query:"",params:[]}){let{strings:c,values:d}=this;for(let e=0,f=c.length;e<f;e++)if(b.query+=c[e],e<d.length){let c=d[e];if(c instanceof dw)b.query+=c.sql;else if(c instanceof dH)if(c.queryData instanceof a)c.queryData.toParameterizedQuery(b);else{if(c.queryData.params?.length)throw Error("This query is not composable");b.query+=c.queryData.query}else{let{params:a}=b;a.push(c),b.query+="$"+a.length,(c instanceof bA||ArrayBuffer.isView(c))&&(b.query+="::bytea")}}return b}};bJ(du,"SqlTemplate");var dv=class{constructor(a){this.sql=a}};bJ(dv,"UnsafeRawSql");var dw=dv;function dx(){"u">typeof window&&"u">typeof document&&"u">typeof console&&"function"==typeof console.warn&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}bU(),bJ(dx,"warnIfBrowser"),b0();var dy=bO(cf()),dz=bO(cr()),dA=class a extends Error{constructor(b){super(b),bQ(this,"name","NeonDbError"),bQ(this,"severity"),bQ(this,"code"),bQ(this,"detail"),bQ(this,"hint"),bQ(this,"position"),bQ(this,"internalPosition"),bQ(this,"internalQuery"),bQ(this,"where"),bQ(this,"schema"),bQ(this,"table"),bQ(this,"column"),bQ(this,"dataType"),bQ(this,"constraint"),bQ(this,"file"),bQ(this,"line"),bQ(this,"routine"),bQ(this,"sourceError"),"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}};bJ(dA,"NeonDbError");var dB="transaction() expects an array of queries, or a function returning an array of queries",dC=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function dD(a){return a instanceof bA?"\\x"+dt(a):a}function dE(a){let{query:b,params:c}=a instanceof du?a.toParameterizedQuery():a;return{query:b,params:c.map(a=>dD((0,dz.prepareValue)(a)))}}function dF(a,{arrayMode:b,fullResults:c,fetchOptions:d,isolationLevel:e,readOnly:f,deferrable:g,authToken:h,disableWarningInBrowsers:i}={}){let j;if(!a)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{j=b2(a)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(a))}let{protocol:k,username:l,hostname:m,port:n,pathname:o}=j;if("postgres:"!==k&&"postgresql:"!==k||!l||!m||!o)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function p(a,...b){if(!(Array.isArray(a)&&Array.isArray(a.raw)&&Array.isArray(b)))throw Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new dH(q,new du(a,b))}async function q(j,k,l){let o,{fetchEndpoint:p,fetchFunction:q}=b_,r=Array.isArray(j)?{queries:j.map(a=>dE(a))}:dE(j),s=d??{},t=b??!1,u=c??!1,v=e,w=f,x=g;void 0!==l&&(void 0!==l.fetchOptions&&(s={...s,...l.fetchOptions}),void 0!==l.arrayMode&&(t=l.arrayMode),void 0!==l.fullResults&&(u=l.fullResults),void 0!==l.isolationLevel&&(v=l.isolationLevel),void 0!==l.readOnly&&(w=l.readOnly),void 0!==l.deferrable&&(x=l.deferrable)),void 0===k||Array.isArray(k)||void 0===k.fetchOptions||(s={...s,...k.fetchOptions});let y=h;Array.isArray(k)||k?.authToken===void 0||(y=k.authToken);let z="function"==typeof p?p(m,n,{jwtAuth:void 0!==y}):p,A={"Neon-Connection-String":a,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},B=await dJ(y);B&&(A.Authorization=`Bearer ${B}`),Array.isArray(j)&&(void 0!==v&&(A["Neon-Batch-Isolation-Level"]=v),void 0!==w&&(A["Neon-Batch-Read-Only"]=String(w)),void 0!==x&&(A["Neon-Batch-Deferrable"]=String(x))),i||b_.disableWarningInBrowsers||dx();try{o=await (q??fetch)(z,{method:"POST",body:JSON.stringify(r),headers:A,...s})}catch(b){let a=new dA(`Error connecting to database: ${b}`);throw a.sourceError=b,a}if(o.ok){let a=await o.json();if(Array.isArray(j)){let b=a.results;if(!Array.isArray(b))throw new dA("Neon internal error: unexpected result format");return b.map((a,b)=>{let c=k[b]??{};return dI(a,{arrayMode:c.arrayMode??t,fullResults:c.fullResults??u,types:c.types})})}{let b=k??{};return dI(a,{arrayMode:b.arrayMode??t,fullResults:b.fullResults??u,types:b.types})}}{let{status:a}=o;if(400===a){let a=await o.json(),b=new dA(a.message);for(let c of dC)b[c]=a[c]??void 0;throw b}{let b=await o.text();throw new dA(`Server error (HTTP status ${a}): ${b}`)}}}return bJ(p,"templateFn"),p.query=(a,b,c)=>new dH(q,{query:a,params:b??[]},c),p.unsafe=a=>new dw(a),p.transaction=async(a,b)=>{if("function"==typeof a&&(a=a(p)),!Array.isArray(a))throw Error(dB);return a.forEach(a=>{if(!(a instanceof dH))throw Error(dB)}),q(a.map(a=>a.queryData),a.map(a=>a.opts??{}),b)},bJ(q,"execute"),p}bJ(dD,"encodeBuffersAsBytea"),bJ(dE,"prepareQuery"),bJ(dF,"neon");var dG=class{constructor(a,b,c){this.execute=a,this.queryData=b,this.opts=c}then(a,b){return this.execute(this.queryData,this.opts).then(a,b)}catch(a){return this.execute(this.queryData,this.opts).catch(a)}finally(a){return this.execute(this.queryData,this.opts).finally(a)}};bJ(dG,"NeonQueryPromise");var dH=dG;function dI(a,{arrayMode:b,fullResults:c,types:d}){let e=new dy.default(d),f=a.fields.map(a=>a.name),g=a.fields.map(a=>e.getTypeParser(a.dataTypeID)),h=!0===b?a.rows.map(a=>a.map((a,b)=>null===a?null:g[b](a))):a.rows.map(a=>Object.fromEntries(a.map((a,b)=>[f[b],null===a?null:g[b](a)])));return c?(a.viaNeonFetch=!0,a.rowAsArray=b,a.rows=h,a._parsers=g,a._types=e,a):h}async function dJ(a){if("string"==typeof a)return a;if("function"==typeof a)try{return await Promise.resolve(a())}catch(b){let a=new dA("Error getting auth token.");throw b instanceof Error&&(a=new dA(`Error getting auth token: ${b.message}`)),a}}bJ(dI,"processQueryResult"),bJ(dJ,"getAuthToken"),bU();var dK=bO(da());bU();var dL=bO(da()),dM=class extends dL.Client{constructor(a){super(a),this.config=a}get neonConfig(){return this.connection.stream}connect(a){let{neonConfig:b}=this;b.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&b.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let c="string"!=typeof this.config&&this.config?.host!==void 0||"string"!=typeof this.config&&this.config?.connectionString!==void 0||void 0!==bB.env.PGHOST,d=bB.env.USER??bB.env.USERNAME;if(!c&&"localhost"===this.host&&this.user===d&&this.database===d&&null===this.password)throw Error(`No database host or connection string wa\
s set, and key parameters have default values (host: localhost, user: ${d}, db: ${d}, password: null\
). Is an environment variable missing? Alternatively, if you intended to connect with these paramete\
rs, please set the host to 'localhost' explicitly.`);let e=super.connect(a),f=b.pipelineTLS&&this.ssl,g="password"===b.pipelineConnect;if(!f&&!b.pipelineConnect)return e;let h=this.connection;if(f&&h.on("connect",()=>h.stream.emit("data","S")),g){h.removeAllListeners("authenticationCleartextPassword"),h.removeAllListeners("readyForQuery"),h.once("readyForQuery",()=>h.on("readyForQuery",this._handleReadyForQuery.bind(this)));let a=this.ssl?"sslconnect":"connect";h.on(a,()=>{this.neonConfig.disableWarningInBrowsers||dx(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return e}async _handleAuthSASLContinue(a){if(typeof crypto>"u"||void 0===crypto.subtle||void 0===crypto.subtle.importKey)throw Error("Cannot use SASL auth when `crypto.subtle` is not defined");let b=crypto.subtle,c=this.saslSession,d=this.password,e=a.data;if("SASLInitialResponse"!==c.message||"string"!=typeof d||"string"!=typeof e)throw Error("SASL: protocol error");let f=Object.fromEntries(e.split(",").map(a=>{if(!/^.=/.test(a))throw Error("SASL: Invalid attribute pair entry");return[a[0],a.substring(2)]})),g=f.r,h=f.s,i=f.i;if(!g||!/^[!-+--~]+$/.test(g))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!h||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(h))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!i||!/^[1-9][0-9]*$/.test(i))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!g.startsWith(c.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(g.length===c.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let j=parseInt(i,10),k=bA.from(h,"base64"),l=new TextEncoder,m=l.encode(d),n=await b.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=new Uint8Array(await b.sign("HMAC",n,bA.concat([k,bA.from([0,0,0,1])]))),p=o;for(var q=0;q<j-1;q++)o=new Uint8Array(await b.sign("HMAC",n,o)),p=bA.from(p.map((a,b)=>p[b]^o[b]));let r=p,s=await b.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),t=new Uint8Array(await b.sign("HMAC",s,l.encode("Client Key"))),u=await b.digest("SHA-256",t),v="n=*,r="+c.clientNonce,w="r="+g+",s="+h+",i="+j,x="c=biws,r="+g,y=v+","+w+","+x,z=await b.importKey("raw",u,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var A=new Uint8Array(await b.sign("HMAC",z,l.encode(y))),B=bA.from(t.map((a,b)=>t[b]^A[b])).toString("base64");let C=await b.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),D=await b.sign("HMAC",C,l.encode("Server Key")),E=await b.importKey("raw",D,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var F=bA.from(await b.sign("HMAC",E,l.encode(y)));c.message="SASLResponse",c.serverSignature=F.toString("base64"),c.response=x+",p="+B,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};bJ(dM,"NeonClient"),b0();var dN=bO(cQ());function dO(a,b){let c,d;return b?{callback:b,result:void 0}:{callback:bJ(function(a,b){a?c(a):d(b)},"cb"),result:new a(function(a,b){d=a,c=b})}}bJ(dO,"promisify"),bJ(class extends dK.Pool{constructor(){super(...arguments),bQ(this,"Client",dM),bQ(this,"hasFetchUnsupportedListeners",!1),bQ(this,"addListener",this.on)}on(a,b){return"error"!==a&&(this.hasFetchUnsupportedListeners=!0),super.on(a,b)}query(a,b,c){if(!b_.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof a)return super.query(a,b,c);"function"==typeof b&&(c=b,b=void 0);let d=dO(this.Promise,c);c=d.callback;try{let d=new dN.default(this.options),e=encodeURIComponent,f=encodeURI,g=`postgresql://${e(d.user)}:${e(d.password)}@${e(d.host)}\
/${f(d.database)}`,h="string"==typeof a?a:a.text,i=b??a.values??[];dF(g,{fullResults:!0,arrayMode:"array"===a.rowMode}).query(h,i,{types:a.types??this.options?.types}).then(a=>c(void 0,a)).catch(a=>c(a))}catch(a){c(a)}return d.result}},"NeonPool"),b0();var dP=bO(da());dP.DatabaseError,dP.defaults,dP.escapeIdentifier,dP.escapeLiteral,dP.types;let dQ={free:0,starter:0,core:1,pro:2,team:3,enterprise:4};async function dR(a){if(!process.env.DATABASE_URL)throw Error("DATABASE_URL not configured");let b=dF(process.env.DATABASE_URL);return(await b`
    SELECT 
      subscription_tier,
      subscription_status,
      plan,
      trial_ends_at,
      advanced_ai,
      exports_enabled,
      templates_enabled,
      sso_enabled
    FROM organizations
    WHERE id = ${a}
    LIMIT 1
  `)[0]||null}async function dS(a,b){try{let c=await dR(a);if(!c)return{hasAccess:!1,reason:"Organization not found",currentTier:"free",requiredTier:b};let d=c.subscription_tier||"free",e=c.subscription_status||"inactive",f=c.trial_ends_at&&new Date(c.trial_ends_at)<new Date;if(("active"!==e&&"trialing"!==e||f)&&"free"!==b&&"starter"!==b)return{hasAccess:!1,reason:f?"Your trial has expired. Please upgrade to continue using this feature.":"Active subscription required for this feature",currentTier:"free",requiredTier:b,subscriptionStatus:e,upgradeUrl:"/settings/billing"};let g=dQ[d]||0,h=dQ[b]||0;if(g<h)return{hasAccess:!1,reason:`This feature requires ${b} plan or higher. Your current plan is ${d}.`,currentTier:d,requiredTier:b,subscriptionStatus:e,upgradeUrl:"/settings/billing"};return{hasAccess:!0,currentTier:d,requiredTier:b,subscriptionStatus:e}}catch(a){return console.error("Error checking subscription tier (Edge):",a),{hasAccess:!1,reason:"Error validating subscription",currentTier:"free",requiredTier:b}}}let dT=["chrisjrobertson@outlook.com","chris@synqforge.com"],dU="10.22.0",dV=globalThis;function dW(){return dX(dV),dV}function dX(a){let b=a.__SENTRY__=a.__SENTRY__||{};return b.version=b.version||dU,b[dU]=b[dU]||{}}function dY(a,b,c=dV){let d=c.__SENTRY__=c.__SENTRY__||{},e=d[dU]=d[dU]||{};return e[a]||(e[a]=b())}function dZ(a=dV.crypto||dV.msCrypto){try{if(a?.randomUUID)return a.randomUUID().replace(/-/g,"")}catch{}return e||(e="10000000100040008000100000000000"),e.replace(/[018]/g,a=>(a^(15&16*Math.random())>>a/4).toString(16))}function d$(){return Date.now()/1e3}function d_(){return(f??(f=function(){let{performance:a}=dV;if(!a?.now||!a.timeOrigin)return d$;let b=a.timeOrigin;return()=>(b+a.now())/1e3}()))()}let d0={},d1=Object.prototype.toString;function d2(a,b){return d1.call(a)===`[object ${b}]`}function d3(a){return d2(a,"String")}function d4(a){return!!(a?.then&&"function"==typeof a.then)}function d5(){return dZ().substring(16)}function d6(a,b,c){try{Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0})}catch{}}let d7="_sentrySpan";function d8(a,b){b?d6(a,d7,b):delete a[d7]}function d9(a,b,c=!1){return!!d3(a)&&(d2(b,"RegExp")?b.test(a):!!d3(b)&&(c?a===b:a.includes(b)))}class ea{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:dZ(),sampleRand:Math.random()}}clone(){let a=new ea;return a._breadcrumbs=[...this._breadcrumbs],a._tags={...this._tags},a._extra={...this._extra},a._contexts={...this._contexts},this._contexts.flags&&(a._contexts.flags={values:[...this._contexts.flags.values]}),a._user=this._user,a._level=this._level,a._session=this._session,a._transactionName=this._transactionName,a._fingerprint=this._fingerprint,a._eventProcessors=[...this._eventProcessors],a._attachments=[...this._attachments],a._sdkProcessingMetadata={...this._sdkProcessingMetadata},a._propagationContext={...this._propagationContext},a._client=this._client,a._lastEventId=this._lastEventId,d8(a,this[d7]),a}setClient(a){this._client=a}setLastEventId(a){this._lastEventId=a}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(a){this._scopeListeners.push(a)}addEventProcessor(a){return this._eventProcessors.push(a),this}setUser(a){return this._user=a||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&function(a,b={}){if(b.user&&(!a.ipAddress&&b.user.ip_address&&(a.ipAddress=b.user.ip_address),a.did||b.did||(a.did=b.user.id||b.user.email||b.user.username)),a.timestamp=b.timestamp||d_(),b.abnormal_mechanism&&(a.abnormal_mechanism=b.abnormal_mechanism),b.ignoreDuration&&(a.ignoreDuration=b.ignoreDuration),b.sid&&(a.sid=32===b.sid.length?b.sid:dZ()),void 0!==b.init&&(a.init=b.init),!a.did&&b.did&&(a.did=`${b.did}`),"number"==typeof b.started&&(a.started=b.started),a.ignoreDuration)a.duration=void 0;else if("number"==typeof b.duration)a.duration=b.duration;else{let b=a.timestamp-a.started;a.duration=b>=0?b:0}b.release&&(a.release=b.release),b.environment&&(a.environment=b.environment),!a.ipAddress&&b.ipAddress&&(a.ipAddress=b.ipAddress),!a.userAgent&&b.userAgent&&(a.userAgent=b.userAgent),"number"==typeof b.errors&&(a.errors=b.errors),b.status&&(a.status=b.status)}(this._session,{user:a}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(a){return this._tags={...this._tags,...a},this._notifyScopeListeners(),this}setTag(a,b){return this._tags={...this._tags,[a]:b},this._notifyScopeListeners(),this}setExtras(a){return this._extra={...this._extra,...a},this._notifyScopeListeners(),this}setExtra(a,b){return this._extra={...this._extra,[a]:b},this._notifyScopeListeners(),this}setFingerprint(a){return this._fingerprint=a,this._notifyScopeListeners(),this}setLevel(a){return this._level=a,this._notifyScopeListeners(),this}setTransactionName(a){return this._transactionName=a,this._notifyScopeListeners(),this}setContext(a,b){return null===b?delete this._contexts[a]:this._contexts[a]=b,this._notifyScopeListeners(),this}setSession(a){return a?this._session=a:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(a){if(!a)return this;let b="function"==typeof a?a(this):a,{tags:c,extra:d,user:e,contexts:f,level:g,fingerprint:h=[],propagationContext:i}=(b instanceof ea?b.getScopeData():d2(b,"Object")?a:void 0)||{};return this._tags={...this._tags,...c},this._extra={...this._extra,...d},this._contexts={...this._contexts,...f},e&&Object.keys(e).length&&(this._user=e),g&&(this._level=g),h.length&&(this._fingerprint=h),i&&(this._propagationContext=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,d8(this,void 0),this._attachments=[],this.setPropagationContext({traceId:dZ(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(a,b){let c="number"==typeof b?b:100;if(c<=0)return this;let d={timestamp:d$(),...a,message:a.message?function(a,b=0){return"string"!=typeof a||0===b||a.length<=b?a:`${a.slice(0,b)}...`}(a.message,2048):a.message};return this._breadcrumbs.push(d),this._breadcrumbs.length>c&&(this._breadcrumbs=this._breadcrumbs.slice(-c),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(a){return this._attachments.push(a),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[d7]}}setSDKProcessingMetadata(a){return this._sdkProcessingMetadata=function a(b,c,d=2){if(!c||"object"!=typeof c||d<=0)return c;if(b&&0===Object.keys(c).length)return b;let e={...b};for(let b in c)Object.prototype.hasOwnProperty.call(c,b)&&(e[b]=a(e[b],c[b],d-1));return e}(this._sdkProcessingMetadata,a,2),this}setPropagationContext(a){return this._propagationContext=a,this}getPropagationContext(){return this._propagationContext}captureException(a,b){let c=b?.event_id||dZ();if(!this._client)return c;let d=Error("Sentry syntheticException");return this._client.captureException(a,{originalException:a,syntheticException:d,...b,event_id:c},this),c}captureMessage(a,b,c){let d=c?.event_id||dZ();if(!this._client)return d;let e=Error(a);return this._client.captureMessage(a,b,{originalException:a,syntheticException:e,...c,event_id:d},this),d}captureEvent(a,b){let c=b?.event_id||dZ();return this._client&&this._client.captureEvent(a,{...b,event_id:c},this),c}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(a=>{a(this)}),this._notifyingListeners=!1)}}class eb{constructor(a,b){let c,d;c=a||new ea,d=b||new ea,this._stack=[{scope:c}],this._isolationScope=d}withScope(a){let b,c=this._pushScope();try{b=a(c)}catch(a){throw this._popScope(),a}return d4(b)?b.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),b)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let a=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:a}),a}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function ec(){let a=dX(dW());return a.stack=a.stack||new eb(dY("defaultCurrentScope",()=>new ea),dY("defaultIsolationScope",()=>new ea))}function ed(a){return ec().withScope(a)}function ee(a,b){let c=ec();return c.withScope(()=>(c.getStackTop().scope=a,b(a)))}function ef(a){return ec().withScope(()=>a(ec().getIsolationScope()))}function eg(a){let b=dX(a);return b.acs?b.acs:{withIsolationScope:ef,withScope:ed,withSetScope:ee,withSetIsolationScope:(a,b)=>ef(b),getCurrentScope:()=>ec().getScope(),getIsolationScope:()=>ec().getIsolationScope()}}function eh(){return eg(dW()).getCurrentScope()}function ei(...a){let b=eg(dW());if(2===a.length){let[c,d]=a;return c?b.withSetScope(c,d):b.withScope(d)}return b.withScope(a[0])}function ej(){return eh().getClient()}let ek="sentry.source",el="sentry.sample_rate",em="sentry.op",en="sentry.origin",eo="sentry.custom_span_name",ep=!1;function eq(a){return a&&a.length>0?a.map(({context:{spanId:a,traceId:b,traceFlags:c,...d},attributes:e})=>({span_id:a,trace_id:b,sampled:1===c,attributes:e,...d})):void 0}function er(a){return"number"==typeof a?es(a):Array.isArray(a)?a[0]+a[1]/1e9:a instanceof Date?es(a.getTime()):d_()}function es(a){return a>0x2540be3ff?a/1e3:a}function et(a){var b;if("function"==typeof a.getSpanJSON)return a.getSpanJSON();let{spanId:c,traceId:d}=a.spanContext();if((b=a).attributes&&b.startTime&&b.name&&b.endTime&&b.status){let{attributes:b,startTime:e,name:f,endTime:g,status:h,links:i}=a;return{span_id:c,trace_id:d,data:b,description:f,parent_span_id:"parentSpanId"in a?a.parentSpanId:"parentSpanContext"in a?a.parentSpanContext?.spanId:void 0,start_timestamp:er(e),timestamp:er(g)||void 0,status:ev(h),op:b[em],origin:b[en],links:eq(i)}}return{span_id:c,trace_id:d,start_timestamp:0,data:{}}}function eu(a){let{traceFlags:b}=a.spanContext();return 1===b}function ev(a){if(a&&0!==a.code)return 1===a.code?"ok":a.message||"unknown_error"}let ew="_sentryChildSpans",ex="_sentryRootSpan";function ey(a,b){let c=a[ex]||a;d6(b,ex,c),a[ew]?a[ew].add(b):d6(a,ew,new Set([b]))}function ez(a){return a[ex]||a}let eA="_sentryScope",eB="_sentryIsolationScope";function eC(a,b,c){a&&(d6(a,eB,function(a){try{let b=dV.WeakRef;if("function"==typeof b)return new b(a)}catch{}return a}(c)),d6(a,eA,b))}function eD(a){return{scope:a[eA],isolationScope:function(a){if(a){if("object"==typeof a&&"deref"in a&&"function"==typeof a.deref)try{return a.deref()}catch{return}return a}}(a[eB])}}function eE(a,b,c=()=>{},d=()=>{}){var e,f,g,h;let i;try{i=a()}catch(a){throw b(a),c(),a}return e=i,f=b,g=c,h=d,d4(e)?e.then(a=>(g(),h(a),a),a=>{throw f(a),g(),a}):(g(),h(e),e)}function eF(a){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let b=a||ej()?.getOptions();return!!b&&(null!=b.tracesSampleRate||!!b.tracesSampler)}function eG(a){if("boolean"==typeof a)return Number(a);let b="string"==typeof a?parseFloat(a):a;if(!("number"!=typeof b||isNaN(b))&&!(b<0)&&!(b>1))return b}let eH=/^sentry-/;function eI(a){return a.split(",").map(a=>{let b=a.indexOf("=");return -1===b?[]:[a.slice(0,b),a.slice(b+1)].map(a=>{try{return decodeURIComponent(a.trim())}catch{return}})}).reduce((a,[b,c])=>(b&&c&&(a[b]=c),a),{})}let eJ=/^o(\d+)\./,eK="_frozenDsc";function eL(a){let b=ej();if(!b)return{};let c=ez(a),d=et(c),e=d.data,f=c.spanContext().traceState,g=f?.get("sentry.sample_rate")??e[el]??e["sentry.previous_trace_sample_rate"];function h(a){return("number"==typeof g||"string"==typeof g)&&(a.sample_rate=`${g}`),a}let i=c[eK];if(i)return h(i);let j=f?.get("sentry.dsc"),k=j&&function(a){let b=function(a){if(a&&(d3(a)||Array.isArray(a)))return Array.isArray(a)?a.reduce((a,b)=>(Object.entries(eI(b)).forEach(([b,c])=>{a[b]=c}),a),{}):eI(a)}(a);if(!b)return;let c=Object.entries(b).reduce((a,[b,c])=>(b.match(eH)&&(a[b.slice(7)]=c),a),{});return Object.keys(c).length>0?c:void 0}(j);if(k)return h(k);let l=function(a,b){let c=b.getOptions(),{publicKey:d}=b.getDsn()||{},e={environment:c.environment||"production",release:c.release,public_key:d,trace_id:a,org_id:function(a){let b,c=a.getOptions(),{host:d}=a.getDsn()||{};return c.orgId?b=String(c.orgId):d&&(b=function(a){let b=a.match(eJ);return b?.[1]}(d)),b}(b)};return b.emit("createDsc",e),e}(a.spanContext().traceId,b),m=e[ek],n=d.description;return"url"!==m&&n&&(l.transaction=n),eF()&&(l.sampled=String(eu(c)),l.sample_rand=f?.get("sentry.sample_rand")??eD(c).scope?.getPropagationContext().sampleRand.toString()),h(l),b.emit("createDsc",l,c),l}class eM{constructor(a={}){this._traceId=a.traceId||dZ(),this._spanId=a.spanId||d5()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(a){}setAttribute(a,b){return this}setAttributes(a){return this}setStatus(a){return this}updateName(a){return this}isRecording(){return!1}addEvent(a,b,c){return this}addLink(a){return this}addLinks(a){return this}recordException(a,b){}}function eN(a){if(!a||0===a.length)return;let b={};return a.forEach(a=>{let c=a.attributes||{},d=c["sentry.measurement_unit"],e=c["sentry.measurement_value"];"string"==typeof d&&"number"==typeof e&&(b[a.name]={value:e,unit:d})}),b}class eO{constructor(a={}){this._traceId=a.traceId||dZ(),this._spanId=a.spanId||d5(),this._startTime=a.startTimestamp||d_(),this._links=a.links,this._attributes={},this.setAttributes({[en]:"manual",[em]:a.op,...a.attributes}),this._name=a.name,a.parentSpanId&&(this._parentSpanId=a.parentSpanId),"sampled"in a&&(this._sampled=a.sampled),a.endTimestamp&&(this._endTime=a.endTimestamp),this._events=[],this._isStandaloneSpan=a.isStandalone,this._endTime&&this._onSpanEnded()}addLink(a){return this._links?this._links.push(a):this._links=[a],this}addLinks(a){return this._links?this._links.push(...a):this._links=a,this}recordException(a,b){}spanContext(){let{_spanId:a,_traceId:b,_sampled:c}=this;return{spanId:a,traceId:b,traceFlags:+!!c}}setAttribute(a,b){return void 0===b?delete this._attributes[a]:this._attributes[a]=b,this}setAttributes(a){return Object.keys(a).forEach(b=>this.setAttribute(b,a[b])),this}updateStartTime(a){this._startTime=er(a)}setStatus(a){return this._status=a,this}updateName(a){return this._name=a,this.setAttribute(ek,"custom"),this}end(a){this._endTime||(this._endTime=er(a),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[em],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:ev(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[en],profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes["sentry.exclusive_time"],measurements:eN(this._events),is_segment:this._isStandaloneSpan&&ez(this)===this||void 0,segment_id:this._isStandaloneSpan?ez(this).spanContext().spanId:void 0,links:eq(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(a,b,c){let d=eP(b)?b:c||d_(),e=eP(b)?{}:b||{},f={name:a,time:er(d),attributes:e};return this._events.push(f),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let a=ej();if(a&&a.emit("spanEnd",this),!(this._isStandaloneSpan||this===ez(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(a){let b=ej();if(!b)return;let c=a[1];if(!c||0===c.length)return b.recordDroppedEvent("before_send","span");b.sendEnvelope(a)}(function(a,b){let c=eL(a[0]),d=b?.getDsn(),e=b?.getOptions().tunnel,f={sent_at:new Date().toISOString(),...!!c.trace_id&&!!c.public_key&&{trace:c},...!!e&&d&&{dsn:function(a,b=!1){let{host:c,path:d,pass:e,port:f,projectId:g,protocol:h,publicKey:i}=a;return`${h}://${i}${b&&e?`:${e}`:""}@${c}${f?`:${f}`:""}/${d?`${d}/`:d}${g}`}(d)}},{beforeSendSpan:g,ignoreSpans:h}=b?.getOptions()||{},i=h?.length?a.filter(a=>!function(a,b){if(!b?.length||!a.description)return!1;for(let d of b){var c;if("string"==typeof(c=d)||c instanceof RegExp){if(d9(a.description,d))return!0;continue}if(!d.name&&!d.op)continue;let b=!d.name||d9(a.description,d.name),e=!d.op||a.op&&d9(a.op,d.op);if(b&&e)return!0}return!1}(et(a),h)):a,j=a.length-i.length;j&&b?.recordDroppedEvent("before_send","span",j);let k=g?a=>{let b=et(a),c=g(b);return c||(ep||(function(a){if(!("console"in dV))return a();let b=dV.console,c={},d=Object.keys(d0);d.forEach(a=>{let d=d0[a];c[a]=b[a],b[a]=d});try{return a()}finally{d.forEach(a=>{b[a]=c[a]})}}(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),ep=!0),b)}:et,l=[];for(let a of i){let b=k(a);b&&l.push([{type:"span"},b])}return function(a,b=[]){return[a,b]}(f,l)}([this],a)):a&&a.recordDroppedEvent("sample_rate","span"));let b=this._convertSpanToTransaction();b&&(eD(this).scope||eh()).captureEvent(b)}_convertSpanToTransaction(){if(!eQ(et(this)))return;this._name||(this._name="<unlabeled transaction>");let{scope:a,isolationScope:b}=eD(this),c=a?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;let d=(function(a){let b=new Set;return!function a(c){if(!b.has(c)&&eu(c))for(let d of(b.add(c),c[ew]?Array.from(c[ew]):[]))a(d)}(a),Array.from(b)})(this).filter(a=>{var b;return a!==this&&!((b=a)instanceof eO&&b.isStandaloneSpan())}).map(a=>et(a)).filter(eQ),e=this._attributes[ek];delete this._attributes[eo],d.forEach(a=>{delete a.data[eo]});let f={contexts:{trace:function(a){let{spanId:b,traceId:c}=a.spanContext(),{data:d,op:e,parent_span_id:f,status:g,origin:h,links:i}=et(a);return{parent_span_id:f,span_id:b,trace_id:c,data:d,op:e,status:g,origin:h,links:i}}(this)},spans:d.length>1e3?d.sort((a,b)=>a.start_timestamp-b.start_timestamp).slice(0,1e3):d,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:a,capturedSpanIsolationScope:b,dynamicSamplingContext:eL(this)},request:c,...e&&{transaction_info:{source:e}}},g=eN(this._events);return g&&Object.keys(g).length&&(f.measurements=g),f}}function eP(a){return a&&"number"==typeof a||a instanceof Date||Array.isArray(a)}function eQ(a){return!!a.start_timestamp&&!!a.timestamp&&!!a.span_id&&!!a.trace_id}let eR="__SENTRY_SUPPRESS_TRACING__";function eS(a,b,c){let d=ej(),e=d?.getOptions()||{},{name:f=""}=a,g={spanAttributes:{...a.attributes},spanName:f,parentSampled:c};d?.emit("beforeSampling",g,{decision:!1});let h=g.parentSampled??c,i=g.spanAttributes,j=b.getPropagationContext(),[k,l,m]=b.getScopeData().sdkProcessingMetadata[eR]?[!1]:function(a,b,c){let d,e;if(!eF(a))return[!1];"function"==typeof a.tracesSampler?(d=a.tracesSampler({...b,inheritOrSampleWith:a=>"number"==typeof b.parentSampleRate?b.parentSampleRate:"boolean"==typeof b.parentSampled?Number(b.parentSampled):a}),e=!0):void 0!==b.parentSampled?d=b.parentSampled:void 0!==a.tracesSampleRate&&(d=a.tracesSampleRate,e=!0);let f=eG(d);if(void 0===f)return[!1];if(!f)return[!1,f,e];let g=c<f;return[g,f,e]}(e,{name:f,parentSampled:h,attributes:i,parentSampleRate:eG(j.dsc?.sample_rate)},j.sampleRand),n=new eO({...a,attributes:{[ek]:"custom",[el]:void 0!==l&&m?l:void 0,...i},sampled:k});return!k&&d&&d.recordDroppedEvent("sample_rate","transaction"),d&&d.emit("spanStart",n),n}let eT=["user","level","extra","contexts","tags","fingerprint","propagationContext"];async function eU(a){let b=ej();return b?b.flush(a):Promise.resolve(!1)}async function eV(){try{await eU(2e3)}catch(a){}}function eW(a){return new Proxy(a,{apply:async(a,b,c)=>{let d="_sentryRewritesTunnelPath"in globalThis?globalThis._sentryRewritesTunnelPath:void 0;if(d&&"string"==typeof d){let a=c[0];if(a instanceof Request&&new URL(a.url).pathname.startsWith(d))return new Response(null,{status:200,headers:{"x-middleware-next":"1"}})}return function(...a){let b=eg(dW());if(2===a.length){let[c,d]=a;return c?b.withSetIsolationScope(c,d):b.withIsolationScope(d)}return b.withIsolationScope(a[0])}(d=>{let e,f,g=c[0],h=eh();g instanceof Request?(d.setSDKProcessingMetadata({normalizedRequest:function(a){let b=function(a){let b={};try{a.forEach((a,c)=>{"string"==typeof a&&(b[c]=a)})}catch{}return b}(a.headers);return{method:a.method,url:a.url,query_string:function(a){if(a)try{let b=new URL(a,"http://s.io").search.slice(1);return b.length?b:void 0}catch{return}}(a.url),headers:b}}(g)}),e=`middleware ${g.method}`,f="url"):(e="middleware",f="component"),h.setTransactionName(e);let i=function(){let a=eg(dW());return a.getActiveSpan?a.getActiveSpan():eh()[d7]}();if(i){e="middleware",f="component";let a=ez(i);a&&eC(a,h,d)}return function(a,b){let c=eg(dW());if(c.startSpan)return c.startSpan(a,b);let d=function(a){let b={isStandalone:(a.experimental||{}).standalone,...a};if(a.startTime){let c={...b};return c.startTimestamp=er(a.startTime),delete c.startTime,c}return b}(a),{forceTransaction:e,parentSpan:f,scope:g}=a;return ei(g?.clone(),()=>{var c;return(void 0!==(c=f)?a=>(function(a,b){let c=eg(dW());return c.withActiveSpan?c.withActiveSpan(a,b):ei(c=>(d8(c,a||void 0),b(c)))})(c,a):a=>a())(()=>{let c=eh(),g=function(a,b){if(b)return b;if(null===b)return;let c=a[d7];if(!c)return;let d=ej();return(d?d.getOptions():{}).parentSpanIsAlwaysRootSpan?ez(c):c}(c,f),h=a.onlyIfParent&&!g?new eM:function({parentSpan:a,spanArguments:b,forceTransaction:c,scope:d}){let e;if(!eF()){let d=new eM;if(c||!a){let a={sampled:"false",sample_rate:"0",transaction:b.name,...eL(d)};d6(d,eK,a)}return d}let f=eg(dW()).getIsolationScope();if(a&&!c)e=function(a,b,c){let{spanId:d,traceId:e}=a.spanContext(),f=!b.getScopeData().sdkProcessingMetadata[eR]&&eu(a),g=f?new eO({...c,parentSpanId:d,traceId:e,sampled:f}):new eM({traceId:e});ey(a,g);let h=ej();return h&&(h.emit("spanStart",g),c.endTimestamp&&h.emit("spanEnd",g)),g}(a,d,b),ey(a,e);else if(a){let c=eL(a),{traceId:f,spanId:g}=a.spanContext(),h=eu(a);d6(e=eS({traceId:f,parentSpanId:g,...b},d,h),eK,c)}else{let{traceId:a,dsc:c,parentSpanId:g,sampled:h}={...f.getPropagationContext(),...d.getPropagationContext()};e=eS({traceId:a,parentSpanId:g,...b},d,h),c&&d6(e,eK,c)}return eC(e,d,f),e}({parentSpan:g,spanArguments:d,forceTransaction:e,scope:c});return d8(c,h),eE(()=>b(h),()=>{let{status:a}=et(h);h.isRecording()&&(!a||"ok"===a)&&h.setStatus({code:2,message:"internal_error"})},()=>{h.end()})})})}({name:e,op:"http.server.middleware",attributes:{[ek]:f,[en]:"auto.function.nextjs.wrap_middleware"}},()=>eE(()=>a.apply(b,c),a=>{eh().captureException(a,function(a){if(a){var b;return(b=a)instanceof ea||"function"==typeof b||Object.keys(a).some(a=>eT.includes(a))?{captureContext:a}:a}}({mechanism:{type:"auto.function.nextjs.wrap_middleware",handled:!1}}))},()=>{var a=eV();let b=dV[Symbol.for("@vercel/request-context")],c=b?.get?.();c?.waitUntil&&c.waitUntil(a)}))})}})}let eX=["/","/auth/signin","/auth/signup","/auth/error","/auth/forgot-password","/auth/reset-password","/auth/payment-required","/pricing"],eY=["/api/auth","/api/webhooks"],eZ=["/settings/billing","/auth/payment-required","/api/billing","/api/stripe","/dashboard","/settings"];async function e$(a){let{pathname:b}=a.nextUrl,c=eX.some(a=>b===a||b.startsWith(a+"/")),d=eY.some(a=>b.startsWith(a));if(c||d)return X.next();try{let c=await (0,bC.getToken)({req:a,secret:process.env.NEXTAUTH_SECRET});if(!c){let c=new URL("/auth/signin",a.url);return c.searchParams.set("callbackUrl",b),X.redirect(c)}if(c.email&&function(a){if(!a)return!1;let b=a.toLowerCase().trim();return dT.some(a=>a.toLowerCase()===b)}(c.email))return console.log(` Super Admin detected in middleware (${c.email}) - bypassing all subscription checks for ${b}`),X.next();if(!eZ.some(a=>b===a||b.startsWith(a+"/"))&&c.organizationId){var e;let d=(e=b,/\/api\/[^\/]+\/export(\?|$)/.test(e)||/\/api\/[^\/]+\/[^\/]+\/export(\?|$)/.test(e)?/\/(jira|linear)/.test(e)?{requiresTier:"pro",feature:"export_jira"}:{requiresTier:"core",feature:"export_basic"}:/\/api\/[^\/]+\/bulk(\?|$)/.test(e)||/\/api\/ai\/batch-[^\/]+/.test(e)?{requiresTier:"pro",feature:"bulk_operations"}:/^\/api\/ai\/analyze-document(\?|$)/.test(e)?{requiresTier:"pro",feature:"document_analysis"}:/^\/api\/team\//.test(e)||/\/approval/.test(e)?{requiresTier:"team",feature:"approval_flows"}:/^\/api\/(sso|saml)\//.test(e)?{requiresTier:"enterprise",feature:"sso"}:{requiresTier:null});if(d.requiresTier)try{let e=await dS(c.organizationId,d.requiresTier);if(!e.hasAccess){if(console.warn("\uD83D\uDEAB Subscription gate blocked access:",{path:b,requiredTier:d.requiresTier,currentTier:e.currentTier,reason:e.reason,userId:c.sub,organizationId:c.organizationId,timestamp:new Date().toISOString()}),b.startsWith("/api/"))return X.json({error:"Subscription Required",message:e.reason,currentTier:e.currentTier,requiredTier:d.requiresTier,upgradeUrl:e.upgradeUrl},{status:402});let f=new URL("/auth/payment-required",a.url);return f.searchParams.set("returnUrl",b),f.searchParams.set("requiredTier",d.requiresTier),f.searchParams.set("currentTier",e.currentTier),X.redirect(f)}let f=X.next();return f.headers.set("x-subscription-tier",e.currentTier),f.headers.set("x-subscription-status",e.subscriptionStatus||"unknown"),f}catch(d){if(console.error("\uD83D\uDEA8 SECURITY: Error checking subscription in middleware:",d),b.startsWith("/api/"))return X.json({error:"Service Unavailable",message:"Unable to verify subscription. Please try again in a moment.",code:"SUBSCRIPTION_CHECK_FAILED"},{status:503});let c=new URL("/auth/error",a.url);return c.searchParams.set("code","subscription_check_failed"),c.searchParams.set("returnUrl",b),X.redirect(c)}}return X.next()}catch(d){console.error("Middleware auth error:",d);let c=new URL("/auth/signin",a.url);return c.searchParams.set("callbackUrl",b),X.redirect(c)}}let e_={matcher:["/((?!_next/static|_next/image|favicon.ico|.*\\..*|public).*)"]};var e0=Object.freeze({__proto__:null,config:e_,middleware:e$});"middleware"in e0&&"function"==typeof e0.middleware?g=e0.middleware:"proxy"in e0&&"function"==typeof e0.proxy?g=e0.proxy:"default"in e0&&"function"==typeof e0.default?h=e0.default:"function"==typeof e0&&(h=e0);let e1=g?eW(g):void 0,e2=g?eW(g):void 0,e3=h?eW(h):void 0;Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401});let e4={...k},e5=e4.middleware||e4.default,e6="/middleware";if("function"!=typeof e5)throw Object.defineProperty(Error(`The Middleware "${e6}" must export a \`middleware\` or a \`default\` function`),"__NEXT_ERROR_CODE",{value:"E120",enumerable:!1,configurable:!0});function e7(a){return bk({...a,page:e6,handler:async(...a)=>{try{return await e5(...a)}catch(e){let b=a[0],c=new URL(b.url),d=c.pathname+c.search;throw await o(e,{path:d,method:b.method,headers:Object.fromEntries(b.headers.entries())},{routerKind:"Pages Router",routePath:"/middleware",routeType:"middleware",revalidateReason:void 0}),e}}})}},3048:(a,b,c)=>{"use strict";c.r(b),c.d(b,{DiagConsoleLogger:()=>I,DiagLogLevel:()=>d,INVALID_SPANID:()=>al,INVALID_SPAN_CONTEXT:()=>an,INVALID_TRACEID:()=>am,ProxyTracer:()=>aF,ProxyTracerProvider:()=>aH,ROOT_CONTEXT:()=>G,SamplingDecision:()=>g,SpanKind:()=>h,SpanStatusCode:()=>i,TraceFlags:()=>f,ValueType:()=>e,baggageEntryMetadataFromString:()=>E,context:()=>aO,createContextKey:()=>F,createNoopMeter:()=>aa,createTraceState:()=>aN,default:()=>a2,defaultTextMapGetter:()=>ab,defaultTextMapSetter:()=>ac,diag:()=>aP,isSpanContextValid:()=>aA,isValidSpanId:()=>az,isValidTraceId:()=>ay,metrics:()=>aS,propagation:()=>a_,trace:()=>a1});var d,e,f,g,h,i,j="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof c.g?c.g:{},k="1.9.0",l=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,m=function(a){var b=new Set([a]),c=new Set,d=a.match(l);if(!d)return function(){return!1};var e={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=e.prerelease)return function(b){return b===a};function f(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;var d=a.match(l);if(!d)return f(a);var g={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=g.prerelease||e.major!==g.major)return f(a);if(0===e.major)return e.minor===g.minor&&e.patch<=g.patch?(b.add(a),!0):f(a);return e.minor<=g.minor?(b.add(a),!0):f(a)}}(k),n=Symbol.for("opentelemetry.js.api."+k.split(".")[0]);function o(a,b,c,d){void 0===d&&(d=!1);var e,f=j[n]=null!=(e=j[n])?e:{version:k};if(!d&&f[a]){var g=Error("@opentelemetry/api: Attempted duplicate registration of API: "+a);return c.error(g.stack||g.message),!1}if(f.version!==k){var g=Error("@opentelemetry/api: Registration of version v"+f.version+" for "+a+" does not match previously registered API v"+k);return c.error(g.stack||g.message),!1}return f[a]=b,c.debug("@opentelemetry/api: Registered a global for "+a+" v"+k+"."),!0}function p(a){var b,c,d=null==(b=j[n])?void 0:b.version;if(d&&m(d))return null==(c=j[n])?void 0:c[a]}function q(a,b){b.debug("@opentelemetry/api: Unregistering a global for "+a+" v"+k+".");var c=j[n];c&&delete c[a]}var r=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},s=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},t=function(){function a(a){this._namespace=a.namespace||"DiagComponentLogger"}return a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return u("debug",this._namespace,a)},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return u("error",this._namespace,a)},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return u("info",this._namespace,a)},a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return u("warn",this._namespace,a)},a.prototype.verbose=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return u("verbose",this._namespace,a)},a}();function u(a,b,c){var d=p("diag");if(d)return c.unshift(b),d[a].apply(d,s([],r(c),!1))}!function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(d||(d={}));var v=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},w=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},x=function(){function a(){function a(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=p("diag");if(d)return d[a].apply(d,w([],v(b),!1))}}var b=this;b.setLogger=function(a,c){if(void 0===c&&(c={logLevel:d.INFO}),a===b){var e,f,g,h=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(e=h.stack)?e:h.message),!1}"number"==typeof c&&(c={logLevel:c});var i=p("diag"),j=function(a,b){function c(c,d){var e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<d.NONE?a=d.NONE:a>d.ALL&&(a=d.ALL),b=b||{},{error:c("error",d.ERROR),warn:c("warn",d.WARN),info:c("info",d.INFO),debug:c("debug",d.DEBUG),verbose:c("verbose",d.VERBOSE)}}(null!=(f=c.logLevel)?f:d.INFO,a);if(i&&!c.suppressOverrideMessage){var k=null!=(g=Error().stack)?g:"<failed to generate stacktrace>";i.warn("Current logger will be overwritten from "+k),j.warn("Current logger will overwrite one already registered from "+k)}return o("diag",j,b,!0)},b.disable=function(){q("diag",b)},b.createComponentLogger=function(a){return new t(a)},b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}(),y=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},z=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(){function a(a){this._entries=a?new Map(a):new Map}return a.prototype.getEntry=function(a){var b=this._entries.get(a);if(b)return Object.assign({},b)},a.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(a){var b=y(a,2);return[b[0],b[1]]})},a.prototype.setEntry=function(b,c){var d=new a(this._entries);return d._entries.set(b,c),d},a.prototype.removeEntry=function(b){var c=new a(this._entries);return c._entries.delete(b),c},a.prototype.removeEntries=function(){for(var b,c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];var f=new a(this._entries);try{for(var g=z(d),h=g.next();!h.done;h=g.next()){var i=h.value;f._entries.delete(i)}}catch(a){b={error:a}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(b)throw b.error}}return f},a.prototype.clear=function(){return new a},a}(),B=Symbol("BaggageEntryMetadata"),C=x.instance();function D(a){return void 0===a&&(a={}),new A(new Map(Object.entries(a)))}function E(a){return"string"!=typeof a&&(C.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:B,toString:function(){return a}}}function F(a){return Symbol.for(a)}var G=new function a(b){var c=this;c._currentContext=b?new Map(b):new Map,c.getValue=function(a){return c._currentContext.get(a)},c.setValue=function(b,d){var e=new a(c._currentContext);return e._currentContext.set(b,d),e},c.deleteValue=function(b){var d=new a(c._currentContext);return d._currentContext.delete(b),d}},H=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],I=function(){for(var a=0;a<H.length;a++)this[H[a].n]=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(console){var d=console[a];if("function"!=typeof d&&(d=console.log),"function"==typeof d)return d.apply(console,b)}}}(H[a].c)},J=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),K=function(){function a(){}return a.prototype.createGauge=function(a,b){return W},a.prototype.createHistogram=function(a,b){return X},a.prototype.createCounter=function(a,b){return V},a.prototype.createUpDownCounter=function(a,b){return Y},a.prototype.createObservableGauge=function(a,b){return $},a.prototype.createObservableCounter=function(a,b){return Z},a.prototype.createObservableUpDownCounter=function(a,b){return _},a.prototype.addBatchObservableCallback=function(a,b){},a.prototype.removeBatchObservableCallback=function(a){},a}(),L=function(){},M=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b.prototype.add=function(a,b){},b}(L),N=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b.prototype.add=function(a,b){},b}(L),O=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b.prototype.record=function(a,b){},b}(L),P=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b.prototype.record=function(a,b){},b}(L),Q=function(){function a(){}return a.prototype.addCallback=function(a){},a.prototype.removeCallback=function(a){},a}(),R=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b}(Q),S=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b}(Q),T=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return J(b,a),b}(Q),U=new K,V=new M,W=new O,X=new P,Y=new N,Z=new R,$=new S,_=new T;function aa(){return U}!function(a){a[a.INT=0]="INT",a[a.DOUBLE=1]="DOUBLE"}(e||(e={}));var ab={get:function(a,b){if(null!=a)return a[b]},keys:function(a){return null==a?[]:Object.keys(a)}},ac={set:function(a,b,c){null!=a&&(a[b]=c)}},ad=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},ae=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},af=function(){function a(){}return a.prototype.active=function(){return G},a.prototype.with=function(a,b,c){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];return b.call.apply(b,ae([c],ad(d),!1))},a.prototype.bind=function(a,b){return b},a.prototype.enable=function(){return this},a.prototype.disable=function(){return this},a}(),ag=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},ah=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},ai="context",aj=new af,ak=function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalContextManager=function(a){return o(ai,a,x.instance())},a.prototype.active=function(){return this._getContextManager().active()},a.prototype.with=function(a,b,c){for(var d,e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];return(d=this._getContextManager()).with.apply(d,ah([a,b,c],ag(e),!1))},a.prototype.bind=function(a,b){return this._getContextManager().bind(a,b)},a.prototype._getContextManager=function(){return p(ai)||aj},a.prototype.disable=function(){this._getContextManager().disable(),q(ai,x.instance())},a}();!function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(f||(f={}));var al="0000000000000000",am="00000000000000000000000000000000",an={traceId:am,spanId:al,traceFlags:f.NONE},ao=function(){function a(a){void 0===a&&(a=an),this._spanContext=a}return a.prototype.spanContext=function(){return this._spanContext},a.prototype.setAttribute=function(a,b){return this},a.prototype.setAttributes=function(a){return this},a.prototype.addEvent=function(a,b){return this},a.prototype.addLink=function(a){return this},a.prototype.addLinks=function(a){return this},a.prototype.setStatus=function(a){return this},a.prototype.updateName=function(a){return this},a.prototype.end=function(a){},a.prototype.isRecording=function(){return!1},a.prototype.recordException=function(a,b){},a}(),ap=F("OpenTelemetry Context Key SPAN");function aq(a){return a.getValue(ap)||void 0}function ar(){return aq(ak.getInstance().active())}function as(a,b){return a.setValue(ap,b)}function at(a){return a.deleteValue(ap)}function au(a,b){return as(a,new ao(b))}function av(a){var b;return null==(b=aq(a))?void 0:b.spanContext()}var aw=/^([0-9a-f]{32})$/i,ax=/^[0-9a-f]{16}$/i;function ay(a){return aw.test(a)&&a!==am}function az(a){return ax.test(a)&&a!==al}function aA(a){return ay(a.traceId)&&az(a.spanId)}function aB(a){return new ao(a)}var aC=ak.getInstance(),aD=function(){function a(){}return a.prototype.startSpan=function(a,b,c){if(void 0===c&&(c=aC.active()),null==b?void 0:b.root)return new ao;var d,e=c&&av(c);return"object"==typeof(d=e)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&aA(e)?new ao(e):new ao},a.prototype.startActiveSpan=function(a,b,c,d){if(!(arguments.length<2)){2==arguments.length?g=b:3==arguments.length?(e=b,g=c):(e=b,f=c,g=d);var e,f,g,h=null!=f?f:aC.active(),i=this.startSpan(a,e,h),j=as(h,i);return aC.with(j,g,void 0,i)}},a}(),aE=new aD,aF=function(){function a(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}return a.prototype.startSpan=function(a,b,c){return this._getTracer().startSpan(a,b,c)},a.prototype.startActiveSpan=function(a,b,c,d){var e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)},a.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):aE},a}(),aG=new(function(){function a(){}return a.prototype.getTracer=function(a,b,c){return new aD},a}()),aH=function(){function a(){}return a.prototype.getTracer=function(a,b,c){var d;return null!=(d=this.getDelegateTracer(a,b,c))?d:new aF(this,a,b,c)},a.prototype.getDelegate=function(){var a;return null!=(a=this._delegate)?a:aG},a.prototype.setDelegate=function(a){this._delegate=a},a.prototype.getDelegateTracer=function(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)},a}();!function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(g||(g={})),function(a){a[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER"}(h||(h={})),function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(i||(i={}));var aI="[_0-9a-z-*/]",aJ=RegExp("^(?:[a-z]"+aI+"{0,255}|"+("[a-z0-9]"+aI+"{0,240}@[a-z]")+aI+"{0,13})$"),aK=/^[ -~]{0,255}[!-~]$/,aL=/,|=/,aM=function(){function a(a){this._internalState=new Map,a&&this._parse(a)}return a.prototype.set=function(a,b){var c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c},a.prototype.unset=function(a){var b=this._clone();return b._internalState.delete(a),b},a.prototype.get=function(a){return this._internalState.get(a)},a.prototype.serialize=function(){var a=this;return this._keys().reduce(function(b,c){return b.push(c+"="+a.get(c)),b},[]).join(",")},a.prototype._parse=function(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce(function(a,b){var c=b.trim(),d=c.indexOf("=");if(-1!==d){var e=c.slice(0,d),f=c.slice(d+1,b.length);aJ.test(e)&&aK.test(f)&&!aL.test(f)&&a.set(e,f)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},a.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},a.prototype._clone=function(){var b=new a;return b._internalState=new Map(this._internalState),b},a}();function aN(a){return new aM(a)}var aO=ak.getInstance(),aP=x.instance(),aQ=new(function(){function a(){}return a.prototype.getMeter=function(a,b,c){return U},a}()),aR="metrics",aS=(function(){function a(){}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalMeterProvider=function(a){return o(aR,a,x.instance())},a.prototype.getMeterProvider=function(){return p(aR)||aQ},a.prototype.getMeter=function(a,b,c){return this.getMeterProvider().getMeter(a,b,c)},a.prototype.disable=function(){q(aR,x.instance())},a})().getInstance(),aT=function(){function a(){}return a.prototype.inject=function(a,b){},a.prototype.extract=function(a,b){return a},a.prototype.fields=function(){return[]},a}(),aU=F("OpenTelemetry Baggage Key");function aV(a){return a.getValue(aU)||void 0}function aW(){return aV(ak.getInstance().active())}function aX(a,b){return a.setValue(aU,b)}function aY(a){return a.deleteValue(aU)}var aZ="propagation",a$=new aT,a_=(function(){function a(){this.createBaggage=D,this.getBaggage=aV,this.getActiveBaggage=aW,this.setBaggage=aX,this.deleteBaggage=aY}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalPropagator=function(a){return o(aZ,a,x.instance())},a.prototype.inject=function(a,b,c){return void 0===c&&(c=ac),this._getGlobalPropagator().inject(a,b,c)},a.prototype.extract=function(a,b,c){return void 0===c&&(c=ab),this._getGlobalPropagator().extract(a,b,c)},a.prototype.fields=function(){return this._getGlobalPropagator().fields()},a.prototype.disable=function(){q(aZ,x.instance())},a.prototype._getGlobalPropagator=function(){return p(aZ)||a$},a})().getInstance(),a0="trace",a1=(function(){function a(){this._proxyTracerProvider=new aH,this.wrapSpanContext=aB,this.isSpanContextValid=aA,this.deleteSpan=at,this.getSpan=aq,this.getActiveSpan=ar,this.getSpanContext=av,this.setSpan=as,this.setSpanContext=au}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(a){var b=o(a0,this._proxyTracerProvider,x.instance());return b&&this._proxyTracerProvider.setDelegate(a),b},a.prototype.getTracerProvider=function(){return p(a0)||this._proxyTracerProvider},a.prototype.getTracer=function(a,b){return this.getTracerProvider().getTracer(a,b)},a.prototype.disable=function(){q(a0,x.instance()),this._proxyTracerProvider=new aH},a})().getInstance();let a2={context:aO,diag:aP,metrics:aS,propagation:a_,trace:a1}},3485:(a,b)=>{"use strict";function c(a,b,c){d(a,b),b.set(a,c)}function d(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function e(a,b){return a.get(g(a,b))}function f(a,b,c){return a.set(g(a,b),c),c}function g(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}Object.defineProperty(b,"__esModule",{value:!0}),b.SessionStore=void 0,b.defaultCookies=function(a){let b=a?"__Secure-":"";return{sessionToken:{name:`${b}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},callbackUrl:{name:`${b}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},csrfToken:{name:`${a?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},pkceCodeVerifier:{name:`${b}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},state:{name:`${b}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},nonce:{name:`${b}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}}}};var h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakSet;class l{constructor(a,b,g){!function(a,b){d(a,b),b.add(a)}(this,k),c(this,h,{}),c(this,i,void 0),c(this,j,void 0),f(j,this,g),f(i,this,a);let{cookies:l}=b,{name:m}=a;if("function"==typeof(null==l?void 0:l.getAll))for(let{name:a,value:b}of l.getAll())a.startsWith(m)&&(e(h,this)[a]=b);else if(l instanceof Map)for(let a of l.keys())a.startsWith(m)&&(e(h,this)[a]=l.get(a));else for(let a in l)a.startsWith(m)&&(e(h,this)[a]=l[a])}get value(){return Object.keys(e(h,this)).sort((a,b)=>{var c,d;return parseInt(null!=(c=a.split(".").pop())?c:"0")-parseInt(null!=(d=b.split(".").pop())?d:"0")}).map(a=>e(h,this)[a]).join("")}chunk(a,b){let c=g(k,this,n).call(this);for(let d of g(k,this,m).call(this,{name:e(i,this).name,value:a,options:{...e(i,this).options,...b}}))c[d.name]=d;return Object.values(c)}clean(){return Object.values(g(k,this,n).call(this))}}function m(a){let b=Math.ceil(a.value.length/3933);if(1===b)return e(h,this)[a.name]=a.value,[a];let c=[];for(let d=0;d<b;d++){let b=`${a.name}.${d}`,f=a.value.substr(3933*d,3933);c.push({...a,name:b,value:f}),e(h,this)[b]=f}return e(j,this).debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:a.value.length,chunks:c.map(a=>a.value.length+163)}),c}function n(){let a={};for(let c in e(h,this)){var b;null==(b=e(h,this))||delete b[c],a[c]={name:c,value:"",options:{...e(i,this).options,maxAge:0}}}return a}b.SessionStore=l},3868:a=>{(()=>{"use strict";var b={993:a=>{var b=Object.prototype.hasOwnProperty,c="~";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,d,f,g){if("function"!=typeof d)throw TypeError("The listener must be a function");var h=new e(d,f||a,g),i=c?c+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function g(a,b){0==--a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(c=!1)),h.prototype.eventNames=function(){var a,d,e=[];if(0===this._eventsCount)return e;for(d in a=this._events)b.call(a,d)&&e.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e},h.prototype.listeners=function(a){var b=c?c+a:a,d=this._events[b];if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=Array(f);e<f;e++)g[e]=d[e].fn;return g},h.prototype.listenerCount=function(a){var b=c?c+a:a,d=this._events[b];return d?d.fn?1:d.length:0},h.prototype.emit=function(a,b,d,e,f,g){var h=c?c+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,d),!0;case 4:return k.fn.call(k.context,b,d,e),!0;case 5:return k.fn.call(k.context,b,d,e,f),!0;case 6:return k.fn.call(k.context,b,d,e,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,d);break;case 4:k[j].fn.call(k[j].context,b,d,e);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,d,e){var f=c?c+a:a;if(!this._events[f])return this;if(!b)return g(this,f),this;var h=this._events[f];if(h.fn)h.fn!==b||e&&!h.once||d&&h.context!==d||g(this,f);else{for(var i=0,j=[],k=h.length;i<k;i++)(h[i].fn!==b||e&&!h[i].once||d&&h[i].context!==d)&&j.push(h[i]);j.length?this._events[f]=1===j.length?j[0]:j:g(this,f)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=c?c+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=c,h.EventEmitter=h,a.exports=h},213:a=>{a.exports=(a,b)=>(b=b||(()=>{}),a.then(a=>new Promise(a=>{a(b())}).then(()=>a),a=>new Promise(a=>{a(b())}).then(()=>{throw a})))},574:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c){let d=0,e=a.length;for(;e>0;){let f=e/2|0,g=d+f;0>=c(a[g],b)?(d=++g,e-=f+1):e=f}return d}},821:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0});let d=c(574);class e{constructor(){this._queue=[]}enqueue(a,b){let c={priority:(b=Object.assign({priority:0},b)).priority,run:a};if(this.size&&this._queue[this.size-1].priority>=b.priority)return void this._queue.push(c);let e=d.default(this._queue,c,(a,b)=>b.priority-a.priority);this._queue.splice(e,0,c)}dequeue(){let a=this._queue.shift();return null==a?void 0:a.run}filter(a){return this._queue.filter(b=>b.priority===a.priority).map(a=>a.run)}get size(){return this._queue.length}}b.default=e},816:(a,b,c)=>{let d=c(213);class e extends Error{constructor(a){super(a),this.name="TimeoutError"}}let f=(a,b,c)=>new Promise((f,g)=>{if("number"!=typeof b||b<0)throw TypeError("Expected `milliseconds` to be a positive number");if(b===1/0)return void f(a);let h=setTimeout(()=>{if("function"==typeof c){try{f(c())}catch(a){g(a)}return}let d="string"==typeof c?c:`Promise timed out after ${b} milliseconds`,h=c instanceof Error?c:new e(d);"function"==typeof a.cancel&&a.cancel(),g(h)},b);d(a.then(f,g),()=>{clearTimeout(h)})});a.exports=f,a.exports.default=f,a.exports.TimeoutError=e}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a](f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab="//";var e={};(()=>{Object.defineProperty(e,"__esModule",{value:!0});let a=d(993),b=d(816),c=d(821),f=()=>{},g=new b.TimeoutError;class h extends a{constructor(a){var b,d,e,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=f,this._resolveIdle=f,!("number"==typeof(a=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:c.default},a)).intervalCap&&a.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(d=null==(b=a.intervalCap)?void 0:b.toString())?d:""}\` (${typeof a.intervalCap})`);if(void 0===a.interval||!(Number.isFinite(a.interval)&&a.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(g=null==(e=a.interval)?void 0:e.toString())?g:""}\` (${typeof a.interval})`);this._carryoverConcurrencyCount=a.carryoverConcurrencyCount,this._isIntervalIgnored=a.intervalCap===1/0||0===a.interval,this._intervalCap=a.intervalCap,this._interval=a.interval,this._queue=new a.queueClass,this._queueClass=a.queueClass,this.concurrency=a.concurrency,this._timeout=a.timeout,this._throwOnTimeout=!0===a.throwOnTimeout,this._isPaused=!1===a.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=f,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=f,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let a=Date.now();if(void 0===this._intervalId){let b=this._intervalEnd-a;if(!(b<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},b)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let a=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let b=this._queue.dequeue();return!!b&&(this.emit("active"),b(),a&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(a){if(!("number"==typeof a&&a>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${a}\` (${typeof a})`);this._concurrency=a,this._processQueue()}async add(a,c={}){return new Promise((d,e)=>{let f=async()=>{this._pendingCount++,this._intervalCount++;try{let f=void 0===this._timeout&&void 0===c.timeout?a():b.default(Promise.resolve(a()),void 0===c.timeout?this._timeout:c.timeout,()=>{(void 0===c.throwOnTimeout?this._throwOnTimeout:c.throwOnTimeout)&&e(g)});d(await f)}catch(a){e(a)}this._next()};this._queue.enqueue(f,c),this._tryToStartAnother(),this.emit("add")})}async addAll(a,b){return Promise.all(a.map(async a=>this.add(a,b)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(a=>{let b=this._resolveEmpty;this._resolveEmpty=()=>{b(),a()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(a=>{let b=this._resolveIdle;this._resolveIdle=()=>{b(),a()}})}get size(){return this._queue.size}sizeBy(a){return this._queue.filter(a).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(a){this._timeout=a}}e.default=h})(),a.exports=e})()},4032:a=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var b={};(()=>{b.parse=function(b,c){if("string"!=typeof b)throw TypeError("argument str must be a string");for(var e={},f=b.split(d),g=(c||{}).decode||a,h=0;h<f.length;h++){var i=f[h],j=i.indexOf("=");if(!(j<0)){var k=i.substr(0,j).trim(),l=i.substr(++j,i.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),void 0==e[k]&&(e[k]=function(a,b){try{return b(a)}catch(b){return a}}(l,g))}}return e},b.serialize=function(a,b,d){var f=d||{},g=f.encode||c;if("function"!=typeof g)throw TypeError("option encode is invalid");if(!e.test(a))throw TypeError("argument name is invalid");var h=g(b);if(h&&!e.test(h))throw TypeError("argument val is invalid");var i=a+"="+h;if(null!=f.maxAge){var j=f.maxAge-0;if(isNaN(j)||!isFinite(j))throw TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(j)}if(f.domain){if(!e.test(f.domain))throw TypeError("option domain is invalid");i+="; Domain="+f.domain}if(f.path){if(!e.test(f.path))throw TypeError("option path is invalid");i+="; Path="+f.path}if(f.expires){if("function"!=typeof f.expires.toUTCString)throw TypeError("option expires is invalid");i+="; Expires="+f.expires.toUTCString()}if(f.httpOnly&&(i+="; HttpOnly"),f.secure&&(i+="; Secure"),f.sameSite)switch("string"==typeof f.sameSite?f.sameSite.toLowerCase():f.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return i};var a=decodeURIComponent,c=encodeURIComponent,d=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),a.exports=b})()},4186:(a,b,c)=>{"use strict";var d=c(5356).Buffer;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{handleFetch:function(){return h},interceptFetch:function(){return i},reader:function(){return f}});let e=c(983),f={url:a=>a.url,header:(a,b)=>a.headers.get(b)};async function g(a,b){let{url:c,method:e,headers:f,body:g,cache:h,credentials:i,integrity:j,mode:k,redirect:l,referrer:m,referrerPolicy:n}=b;return{testData:a,api:"fetch",request:{url:c,method:e,headers:[...Array.from(f),["next-test-stack",function(){let a=(Error().stack??"").split("\n");for(let b=1;b<a.length;b++)if(a[b].length>0){a=a.slice(b);break}return(a=(a=(a=a.filter(a=>!a.includes("/next/dist/"))).slice(0,5)).map(a=>a.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:g?d.from(await b.arrayBuffer()).toString("base64"):null,cache:h,credentials:i,integrity:j,mode:k,redirect:l,referrer:m,referrerPolicy:n}}}async function h(a,b){let c=(0,e.getTestReqInfo)(b,f);if(!c)return a(b);let{testData:h,proxyPort:i}=c,j=await g(h,b),k=await a(`http://localhost:${i}`,{method:"POST",body:JSON.stringify(j),next:{internal:!0}});if(!k.ok)throw Object.defineProperty(Error(`Proxy request failed: ${k.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let l=await k.json(),{api:m}=l;switch(m){case"continue":return a(b);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${b.method} ${b.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":let{status:n,headers:o,body:p}=l.response;return new Response(p?d.from(p,"base64"):null,{status:n,headers:new Headers(o)});default:return m}}function i(a){return c.g.fetch=function(b,c){var d;return(null==c||null==(d=c.next)?void 0:d.internal)?a(b,c):h(a,new Request(b,c))},()=>{c.g.fetch=a}}},4949:(a,b,c)=>{"use strict";a.exports=c(6957)},5356:a=>{"use strict";a.exports=require("node:buffer")},5521:a=>{"use strict";a.exports=require("node:async_hooks")},5672:(a,b,c)=>{"use strict";c.r(b),c.d(b,{CompactEncrypt:()=>bc,CompactSign:()=>bf,EmbeddedJWK:()=>bo,EncryptJWT:()=>bk,FlattenedEncrypt:()=>aY,FlattenedSign:()=>be,GeneralEncrypt:()=>a$,GeneralSign:()=>bh,SignJWT:()=>bj,UnsecuredJWT:()=>bx,base64url:()=>e,calculateJwkThumbprint:()=>bm,calculateJwkThumbprintUri:()=>bn,compactDecrypt:()=>aQ,compactVerify:()=>a3,createLocalJWKSet:()=>bt,createRemoteJWKSet:()=>bw,cryptoRuntime:()=>bH,decodeJwt:()=>bB,decodeProtectedHeader:()=>bA,errors:()=>d,exportJWK:()=>aV,exportPKCS8:()=>aU,exportSPKI:()=>aT,flattenedDecrypt:()=>aP,flattenedVerify:()=>a2,generalDecrypt:()=>aR,generalVerify:()=>a4,generateKeyPair:()=>bF,generateSecret:()=>bG,importJWK:()=>aF,importPKCS8:()=>aE,importSPKI:()=>aC,importX509:()=>aD,jwtDecrypt:()=>bb,jwtVerify:()=>ba});var d={};c.r(d),c.d(d,{JOSEAlgNotAllowed:()=>w,JOSEError:()=>t,JOSENotSupported:()=>x,JWEDecompressionFailed:()=>z,JWEDecryptionFailed:()=>y,JWEInvalid:()=>A,JWKInvalid:()=>D,JWKSInvalid:()=>E,JWKSMultipleMatchingKeys:()=>G,JWKSNoMatchingKey:()=>F,JWKSTimeout:()=>H,JWSInvalid:()=>B,JWSSignatureVerificationFailed:()=>I,JWTClaimValidationFailed:()=>u,JWTExpired:()=>v,JWTInvalid:()=>C});var e={};c.r(e),c.d(e,{decode:()=>bz,encode:()=>by});let f=crypto,g=async(a,b)=>{let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await f.subtle.digest(c,b))},h=new TextEncoder,i=new TextDecoder;function j(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;return a.forEach(a=>{b.set(a,c),c+=a.length}),b}function k(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function l(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return k(c,b,0),k(c,a%0x100000000,4),c}function m(a){let b=new Uint8Array(4);return k(b,a),b}function n(a){return j(m(a.length),a)}async function o(a,b,c){let d=Math.ceil((b>>3)/32),e=new Uint8Array(32*d);for(let b=0;b<d;b++){let d=new Uint8Array(4+a.length+c.length);d.set(m(b+1)),d.set(a,4),d.set(c,4+a.length),e.set(await g("sha256",d),32*b)}return e.slice(0,b>>3)}let p=a=>{let b=a;"string"==typeof b&&(b=h.encode(b));let c=[];for(let a=0;a<b.length;a+=32768)c.push(String.fromCharCode.apply(null,b.subarray(a,a+32768)));return btoa(c.join(""))},q=a=>p(a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),r=a=>{let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c},s=a=>{let b=a;b instanceof Uint8Array&&(b=i.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return r(b)}catch(a){throw TypeError("The input to be decoded is not correctly encoded.")}};class t extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(a){var b;super(a),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null==(b=Error.captureStackTrace)||b.call(Error,this,this.constructor)}}class u extends t{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=b,this.reason=c}}class v extends t{static get code(){return"ERR_JWT_EXPIRED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_EXPIRED",this.claim=b,this.reason=c}}class w extends t{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class x extends t{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class y extends t{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class z extends t{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class A extends t{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class B extends t{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class C extends t{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class D extends t{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class E extends t{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class F extends t{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class G extends t{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator;class H extends t{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class I extends t{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}let J=f.getRandomValues.bind(f);function K(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new x(`Unsupported JWE Algorithm: ${a}`)}}let L=a=>J(new Uint8Array(K(a)>>3)),M=(a,b)=>{if(b.length<<3!==K(a))throw new A("Invalid Initialization Vector length")},N=(a,b)=>{let c=a.byteLength<<3;if(c!==b)throw new A(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)};function O(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function P(a,b){return a.name===b}function Q(a){return parseInt(a.name.slice(4),10)}function R(a,b){if(b.length&&!b.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(b.length>2){let c=b.pop();a+=`one of ${b.join(", ")}, or ${c}.`}else 2===b.length?a+=`one of ${b[0]} or ${b[1]}.`:a+=`${b[0]}.`;throw TypeError(a)}}function S(a,b,...c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if(!P(a.algorithm,"AES-GCM"))throw O("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw O(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!P(a.algorithm,"AES-KW"))throw O("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw O(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw O("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!P(a.algorithm,"PBKDF2"))throw O("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!P(a.algorithm,"RSA-OAEP"))throw O("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}R(a,c)}function T(a,b,...c){if(c.length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor&&b.constructor.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let U=(a,...b)=>T("Key must be ",a,...b);function V(a,b,...c){return T(`Key for the ${a} algorithm must be `,b,...c)}let W=["CryptoKey"];async function X(a,b,c,d,e,g){let h,i;if(!(b instanceof Uint8Array))throw TypeError(U(b,"Uint8Array"));let k=parseInt(a.slice(1,4),10),m=await f.subtle.importKey("raw",b.subarray(k>>3),"AES-CBC",!1,["decrypt"]),n=await f.subtle.importKey("raw",b.subarray(0,k>>3),{hash:`SHA-${k<<1}`,name:"HMAC"},!1,["sign"]),o=j(g,d,c,l(g.length<<3)),p=new Uint8Array((await f.subtle.sign("HMAC",n,o)).slice(0,k>>3));try{h=((a,b)=>{if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");if(a.length!==b.length)throw TypeError("Input buffers must have the same length");let c=a.length,d=0,e=-1;for(;++e<c;)d|=a[e]^b[e];return 0===d})(e,p)}catch(a){}if(!h)throw new y;try{i=new Uint8Array(await f.subtle.decrypt({iv:d,name:"AES-CBC"},m,c))}catch(a){}if(!i)throw new y;return i}async function Y(a,b,c,d,e,g){let h;b instanceof Uint8Array?h=await f.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):(S(b,a,"decrypt"),h=b);try{return new Uint8Array(await f.subtle.decrypt({additionalData:g,iv:d,name:"AES-GCM",tagLength:128},h,j(c,e)))}catch(a){throw new y}}let Z=async(a,b,c,d,e,f)=>{if(!(b instanceof CryptoKey)&&!(b instanceof Uint8Array))throw TypeError(U(b,...W,"Uint8Array"));switch(M(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&N(b,parseInt(a.slice(-3),10)),X(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&N(b,parseInt(a.slice(1,4),10)),Y(a,b,c,d,e,f);default:throw new x("Unsupported JWE Content Encryption Algorithm")}},$=async()=>{throw new x('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},_=async()=>{throw new x('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},aa=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0};function ab(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}let ac=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function ad(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function ae(a,b,c){if(a instanceof CryptoKey)return S(a,b,c),a;if(a instanceof Uint8Array)return f.subtle.importKey("raw",a,"AES-KW",!0,[c]);throw TypeError(U(a,...W,"Uint8Array"))}let af=async(a,b,c)=>{let d=await ae(b,a,"wrapKey");ad(d,a);let e=await f.subtle.importKey("raw",c,...ac);return new Uint8Array(await f.subtle.wrapKey("raw",e,d,"AES-KW"))},ag=async(a,b,c)=>{let d=await ae(b,a,"unwrapKey");ad(d,a);let e=await f.subtle.unwrapKey("raw",c,d,"AES-KW",...ac);return new Uint8Array(await f.subtle.exportKey("raw",e))};async function ah(a,b,c,d,e=new Uint8Array(0),g=new Uint8Array(0)){let i;if(!(a instanceof CryptoKey))throw TypeError(U(a,...W));if(S(a,"ECDH"),!(b instanceof CryptoKey))throw TypeError(U(b,...W));S(b,"ECDH","deriveBits");let k=j(n(h.encode(c)),n(e),n(g),m(d));return i="X25519"===a.algorithm.name?256:"X448"===a.algorithm.name?448:Math.ceil(parseInt(a.algorithm.namedCurve.substr(-3),10)/8)<<3,o(new Uint8Array(await f.subtle.deriveBits({name:a.algorithm.name,public:a},b,i)),d,k)}async function ai(a){if(!(a instanceof CryptoKey))throw TypeError(U(a,...W));return f.subtle.generateKey(a.algorithm,!0,["deriveBits"])}function aj(a){if(!(a instanceof CryptoKey))throw TypeError(U(a,...W));return["P-256","P-384","P-521"].includes(a.algorithm.namedCurve)||"X25519"===a.algorithm.name||"X448"===a.algorithm.name}async function ak(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new A("PBES2 Salt Input must be 8 or more octets");let e=j(h.encode(b),new Uint8Array([0]),a),g=parseInt(b.slice(13,16),10),i={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},k=await function(a,b){if(a instanceof Uint8Array)return f.subtle.importKey("raw",a,"PBKDF2",!1,["deriveBits"]);if(a instanceof CryptoKey)return S(a,b,"deriveBits","deriveKey"),a;throw TypeError(U(a,...W,"Uint8Array"))}(d,b);if(k.usages.includes("deriveBits"))return new Uint8Array(await f.subtle.deriveBits(i,k,g));if(k.usages.includes("deriveKey"))return f.subtle.deriveKey(i,k,{length:g,name:"AES-KW"},!1,["wrapKey","unwrapKey"]);throw TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}let al=async(a,b,c,d=2048,e=J(new Uint8Array(16)))=>{let f=await ak(e,a,d,b);return{encryptedKey:await af(a.slice(-6),f,c),p2c:d,p2s:q(e)}},am=async(a,b,c,d,e)=>{let f=await ak(e,a,d,b);return ag(a.slice(-6),f,c)};function an(a){switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new x(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}let ao=(a,b)=>{if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}},ap=async(a,b,c)=>{if(!(b instanceof CryptoKey))throw TypeError(U(b,...W));if(S(b,a,"encrypt","wrapKey"),ao(a,b),b.usages.includes("encrypt"))return new Uint8Array(await f.subtle.encrypt(an(a),b,c));if(b.usages.includes("wrapKey")){let d=await f.subtle.importKey("raw",c,...ac);return new Uint8Array(await f.subtle.wrapKey("raw",d,b,an(a)))}throw TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},aq=async(a,b,c)=>{if(!(b instanceof CryptoKey))throw TypeError(U(b,...W));if(S(b,a,"decrypt","unwrapKey"),ao(a,b),b.usages.includes("decrypt"))return new Uint8Array(await f.subtle.decrypt(an(a),b,c));if(b.usages.includes("unwrapKey")){let d=await f.subtle.unwrapKey("raw",c,b,an(a),...ac);return new Uint8Array(await f.subtle.exportKey("raw",d))}throw TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function ar(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new x(`Unsupported JWE Algorithm: ${a}`)}}let as=a=>J(new Uint8Array(ar(a)>>3)),at=(a,b)=>{let c=(a.match(/.{1,64}/g)||[]).join("\n");return`-----BEGIN ${b}-----
${c}
-----END ${b}-----`},au=async(a,b,c)=>{if(!(c instanceof CryptoKey))throw TypeError(U(c,...W));if(!c.extractable)throw TypeError("CryptoKey is not extractable");if(c.type!==a)throw TypeError(`key is not a ${a} key`);return at(p(new Uint8Array(await f.subtle.exportKey(b,c))),`${a.toUpperCase()} KEY`)},av=(a,b,c=0)=>{0===c&&(b.unshift(b.length),b.unshift(6));let d=a.indexOf(b[0],c);if(-1===d)return!1;let e=a.subarray(d,d+b.length);return e.length===b.length&&(e.every((a,c)=>a===b[c])||av(a,b,d+1))},aw=a=>{switch(!0){case av(a,[42,134,72,206,61,3,1,7]):return"P-256";case av(a,[43,129,4,0,34]):return"P-384";case av(a,[43,129,4,0,35]):return"P-521";case av(a,[43,101,110]):return"X25519";case av(a,[43,101,111]):return"X448";case av(a,[43,101,112]):return"Ed25519";case av(a,[43,101,113]):return"Ed448";default:throw new x("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},ax=async(a,b,c,d,e)=>{var g;let h,i,j=new Uint8Array(atob(c.replace(a,"")).split("").map(a=>a.charCodeAt(0))),k="spki"===b;switch(d){case"PS256":case"PS384":case"PS512":h={name:"RSA-PSS",hash:`SHA-${d.slice(-3)}`},i=k?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":h={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${d.slice(-3)}`},i=k?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h={name:"RSA-OAEP",hash:`SHA-${parseInt(d.slice(-3),10)||1}`},i=k?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":h={name:"ECDSA",namedCurve:"P-256"},i=k?["verify"]:["sign"];break;case"ES384":h={name:"ECDSA",namedCurve:"P-384"},i=k?["verify"]:["sign"];break;case"ES512":h={name:"ECDSA",namedCurve:"P-521"},i=k?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let a=aw(j);h=a.startsWith("P-")?{name:"ECDH",namedCurve:a}:{name:a},i=k?[]:["deriveBits"];break}case"EdDSA":h={name:aw(j)},i=k?["verify"]:["sign"];break;default:throw new x('Invalid or unsupported "alg" (Algorithm) value')}return f.subtle.importKey(b,j,h,null!=(g=null==e?void 0:e.extractable)&&g,i)},ay=(a,b,c)=>ax(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",a,b,c);function az(a){let b=[],c=0;for(;c<a.length;){let d=aA(a.subarray(c));b.push(d),c+=d.byteLength}return b}function aA(a){let b=0,c=31&a[0];if(b++,31===c){for(c=0;a[b]>=128;)c=128*c+a[b]-128,b++;c=128*c+a[b]-128,b++}let d=0;if(a[b]<128)d=a[b],b++;else if(128===d){for(d=0;0!==a[b+d]||0!==a[b+d+1];){if(d>a.byteLength)throw TypeError("invalid indefinite form length");d++}let c=b+d+2;return{byteLength:c,contents:a.subarray(b,b+d),raw:a.subarray(0,c)}}else{let c=127&a[b];b++,d=0;for(let e=0;e<c;e++)d=256*d+a[b],b++}let e=b+d;return{byteLength:e,contents:a.subarray(b,e),raw:a.subarray(0,e)}}let aB=async a=>{var b,c;if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:d,keyUsages:e}=function(a){let b,c;switch(a.kty){case"oct":switch(a.alg){case"HS256":case"HS384":case"HS512":b={name:"HMAC",hash:`SHA-${a.alg.slice(-3)}`},c=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new x(`${a.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":b={name:"AES-GCM"},c=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":b={name:"AES-KW"},c=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":b={name:"PBKDF2"},c=["deriveBits"];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"EdDSA":b={name:a.crv},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new x('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),g=[d,null!=(b=a.ext)&&b,null!=(c=a.key_ops)?c:e];if("PBKDF2"===d.name)return f.subtle.importKey("raw",s(a.k),...g);let h={...a};return delete h.alg,delete h.use,f.subtle.importKey("jwk",h,...g)};async function aC(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return ay(a,b,c)}async function aD(a,b,c){let d;if("string"!=typeof a||0!==a.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');try{d=at(function(a){let b=az(az(aA(a).contents)[0].contents);return p(b[160===b[0].raw[0]?6:5].raw)}(r(a.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""))),"PUBLIC KEY")}catch(a){throw TypeError("Failed to parse the X.509 certificate",{cause:a})}return ay(d,b,c)}async function aE(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return ax(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",a,b,c)}async function aF(a,b,c){var d;if(!ab(a))throw TypeError("JWK must be an object");switch(b||(b=a.alg),a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=c||(c=!0!==a.ext),c)return aB({...a,alg:b,ext:null!=(d=a.ext)&&d});return s(a.k);case"RSA":if(void 0!==a.oth)throw new x('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return aB({...a,alg:b});default:throw new x('Unsupported "kty" (Key Type) Parameter value')}}let aG=(a,b,c)=>{a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(a)?((a,b)=>{if(!(b instanceof Uint8Array)){if(!(b instanceof CryptoKey))throw TypeError(V(a,b,...W,"Uint8Array"));if("secret"!==b.type)throw TypeError(`${W.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(a,b):((a,b,c)=>{if(!(b instanceof CryptoKey))throw TypeError(V(a,b,...W));if("secret"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(a,b,c)};async function aH(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError(U(c,"Uint8Array"));let g=parseInt(a.slice(1,4),10),h=await f.subtle.importKey("raw",c.subarray(g>>3),"AES-CBC",!1,["encrypt"]),i=await f.subtle.importKey("raw",c.subarray(0,g>>3),{hash:`SHA-${g<<1}`,name:"HMAC"},!1,["sign"]),k=new Uint8Array(await f.subtle.encrypt({iv:d,name:"AES-CBC"},h,b)),m=j(e,d,k,l(e.length<<3));return{ciphertext:k,tag:new Uint8Array((await f.subtle.sign("HMAC",i,m)).slice(0,g>>3))}}async function aI(a,b,c,d,e){let g;c instanceof Uint8Array?g=await f.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):(S(c,a,"encrypt"),g=c);let h=new Uint8Array(await f.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},g,b)),i=h.slice(-16);return{ciphertext:h.slice(0,-16),tag:i}}let aJ=async(a,b,c,d,e)=>{if(!(c instanceof CryptoKey)&&!(c instanceof Uint8Array))throw TypeError(U(c,...W,"Uint8Array"));switch(M(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&N(c,parseInt(a.slice(-3),10)),aH(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&N(c,parseInt(a.slice(1,4),10)),aI(a,b,c,d,e);default:throw new x("Unsupported JWE Content Encryption Algorithm")}};async function aK(a,b,c,d){let e=a.slice(0,7);d||(d=L(e));let{ciphertext:f,tag:g}=await aJ(e,c,b,d,new Uint8Array(0));return{encryptedKey:f,iv:q(d),tag:q(g)}}async function aL(a,b,c,d,e){return Z(a.slice(0,7),b,c,d,e,new Uint8Array(0))}async function aM(a,b,c,d,e){switch(aG(a,b,"decrypt"),a){case"dir":if(void 0!==c)throw new A("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new A("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!ab(d.epk))throw new A('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!aj(b))throw new x("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await aF(d.epk,a);if(void 0!==d.apu){if("string"!=typeof d.apu)throw new A('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=s(d.apu)}catch(a){throw new A("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new A('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=s(d.apv)}catch(a){throw new A("Failed to base64url decode the apv")}}let h=await ah(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?ar(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new A("JWE Encrypted Key missing");return ag(a.slice(-6),h,c)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new A("JWE Encrypted Key missing");return aq(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new A("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new A('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=(null==e?void 0:e.maxPBES2Count)||1e4;if(d.p2c>g)throw new A('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new A('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=s(d.p2s)}catch(a){throw new A("Failed to base64url decode the p2s")}return am(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new A("JWE Encrypted Key missing");return ag(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new A("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new A('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new A('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=s(d.iv)}catch(a){throw new A("Failed to base64url decode the iv")}try{f=s(d.tag)}catch(a){throw new A("Failed to base64url decode the tag")}return aL(a,b,c,e,f)}default:throw new x('Invalid or unsupported "alg" (JWE Algorithm) header value')}}let aN=function(a,b,c,d,e){let f;if(void 0!==e.crit&&void 0===d.crit)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new x(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)},aO=(a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)};async function aP(a,b,c){var d;let e,f,g,k,l,m,n;if(!ab(a))throw new A("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new A("JOSE Header missing");if("string"!=typeof a.iv)throw new A("JWE Initialization Vector missing or incorrect type");if("string"!=typeof a.ciphertext)throw new A("JWE Ciphertext missing or incorrect type");if("string"!=typeof a.tag)throw new A("JWE Authentication Tag missing or incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new A("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new A("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new A("JWE AAD incorrect type");if(void 0!==a.header&&!ab(a.header))throw new A("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!ab(a.unprotected))throw new A("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=s(a.protected);e=JSON.parse(i.decode(b))}catch(a){throw new A("JWE Protected Header is invalid")}if(!aa(e,a.header,a.unprotected))throw new A("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let o={...e,...a.header,...a.unprotected};if(aN(A,new Map,null==c?void 0:c.crit,e,o),void 0!==o.zip){if(!e||!e.zip)throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==o.zip)throw new x('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:p,enc:q}=o;if("string"!=typeof p||!p)throw new A("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof q||!q)throw new A("missing JWE Encryption Algorithm (enc) in JWE Header");let r=c&&aO("keyManagementAlgorithms",c.keyManagementAlgorithms),t=c&&aO("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(r&&!r.has(p))throw new w('"alg" (Algorithm) Header Parameter not allowed');if(t&&!t.has(q))throw new w('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==a.encrypted_key)try{f=s(a.encrypted_key)}catch(a){throw new A("Failed to base64url decode the encrypted_key")}let u=!1;"function"==typeof b&&(b=await b(e,a),u=!0);try{g=await aM(p,b,f,o,c)}catch(a){if(a instanceof TypeError||a instanceof A||a instanceof x)throw a;g=as(q)}try{k=s(a.iv)}catch(a){throw new A("Failed to base64url decode the iv")}try{l=s(a.tag)}catch(a){throw new A("Failed to base64url decode the tag")}let v=h.encode(null!=(d=a.protected)?d:"");m=void 0!==a.aad?j(v,h.encode("."),h.encode(a.aad)):v;try{n=s(a.ciphertext)}catch(a){throw new A("Failed to base64url decode the ciphertext")}let y=await Z(q,g,n,k,l,m);"DEF"===o.zip&&(y=await ((null==c?void 0:c.inflateRaw)||$)(y));let z={plaintext:y};if(void 0!==a.protected&&(z.protectedHeader=e),void 0!==a.aad)try{z.additionalAuthenticatedData=s(a.aad)}catch(a){throw new A("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(z.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(z.unprotectedHeader=a.header),u)?{...z,key:b}:z}async function aQ(a,b,c){if(a instanceof Uint8Array&&(a=i.decode(a)),"string"!=typeof a)throw new A("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:j}=a.split(".");if(5!==j)throw new A("Invalid Compact JWE");let k=await aP({ciphertext:g,iv:f||void 0,protected:d||void 0,tag:h||void 0,encrypted_key:e||void 0},b,c),l={plaintext:k.plaintext,protectedHeader:k.protectedHeader};return"function"==typeof b?{...l,key:k.key}:l}async function aR(a,b,c){if(!ab(a))throw new A("General JWE must be an object");if(!Array.isArray(a.recipients)||!a.recipients.every(ab))throw new A("JWE Recipients missing or incorrect type");if(!a.recipients.length)throw new A("JWE Recipients has no members");for(let d of a.recipients)try{return await aP({aad:a.aad,ciphertext:a.ciphertext,encrypted_key:d.encrypted_key,header:d.header,iv:a.iv,protected:a.protected,tag:a.tag,unprotected:a.unprotected},b,c)}catch(a){}throw new y}let aS=async a=>{if(a instanceof Uint8Array)return{kty:"oct",k:q(a)};if(!(a instanceof CryptoKey))throw TypeError(U(a,...W,"Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...g}=await f.subtle.exportKey("jwk",a);return g};async function aT(a){return au("public","spki",a)}async function aU(a){return au("private","pkcs8",a)}async function aV(a){return aS(a)}async function aW(a,b,c,d,e={}){let f,g,h;switch(aG(a,c,"encrypt"),a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!aj(c))throw new x("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:i,apv:j}=e,{epk:k}=e;k||(k=(await ai(c)).privateKey);let{x:l,y:m,crv:n,kty:o}=await aV(k),p=await ah(c,k,"ECDH-ES"===a?b:a,"ECDH-ES"===a?ar(b):parseInt(a.slice(-5,-2),10),i,j);if(g={epk:{x:l,crv:n,kty:o}},"EC"===o&&(g.epk.y=m),i&&(g.apu=q(i)),j&&(g.apv=q(j)),"ECDH-ES"===a){h=p;break}h=d||as(b);let r=a.slice(-6);f=await af(r,p,h);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||as(b),f=await ap(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||as(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await al(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||as(b),f=await af(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||as(b);let{iv:i}=e;({encryptedKey:f,...g}=await aK(a,c,h,i));break}default:throw new x('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}let aX=Symbol();class aY{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=a}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}async encrypt(a,b){let c,d,e,f,g,k,l;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new A("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!aa(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new A("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let m={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(aN(A,new Map,null==b?void 0:b.crit,this._protectedHeader,m),void 0!==m.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==m.zip)throw new x('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:n,enc:o}=m;if("string"!=typeof n||!n)throw new A('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof o||!o)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===n){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===n&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let e;({cek:d,encryptedKey:c,parameters:e}=await aW(n,o,a,this._cek,this._keyManagementParameters)),e&&(b&&aX in b?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...e}:this.setUnprotectedHeader(e):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...e}:this.setProtectedHeader(e))}if(this._iv||(this._iv=L(o)),f=this._protectedHeader?h.encode(q(JSON.stringify(this._protectedHeader))):h.encode(""),this._aad?(g=q(this._aad),e=j(f,h.encode("."),h.encode(g))):e=f,"DEF"===m.zip){let a=await ((null==b?void 0:b.deflateRaw)||_)(this._plaintext);({ciphertext:k,tag:l}=await aJ(o,a,d,this._iv,e))}else({ciphertext:k,tag:l}=await aJ(o,this._plaintext,d,this._iv,e));let p={ciphertext:q(k),iv:q(this._iv),tag:q(l)};return c&&(p.encrypted_key=q(c)),g&&(p.aad=g),this._protectedHeader&&(p.protected=i.decode(f)),this._sharedUnprotectedHeader&&(p.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(p.header=this._unprotectedHeader),p}}class aZ{constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addRecipient(...a){return this.parent.addRecipient(...a)}encrypt(...a){return this.parent.encrypt(...a)}done(){return this.parent}}class a${constructor(a){this._recipients=[],this._plaintext=a}addRecipient(a,b){let c=new aZ(this,a,{crit:null==b?void 0:b.crit});return this._recipients.push(c),c}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}async encrypt(a){var b,c,d;let e;if(!this._recipients.length)throw new A("at least one recipient must be added");if(a={deflateRaw:null==a?void 0:a.deflateRaw},1===this._recipients.length){let[b]=this._recipients,c=await new aY(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(b.unprotectedHeader).encrypt(b.key,{...b.options,...a}),d={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(d.aad=c.aad),c.protected&&(d.protected=c.protected),c.unprotected&&(d.unprotected=c.unprotected),c.encrypted_key&&(d.recipients[0].encrypted_key=c.encrypted_key),c.header&&(d.recipients[0].header=c.header),d}for(let a=0;a<this._recipients.length;a++){let b=this._recipients[a];if(!aa(this._protectedHeader,this._unprotectedHeader,b.unprotectedHeader))throw new A("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let c={...this._protectedHeader,...this._unprotectedHeader,...b.unprotectedHeader},{alg:d}=c;if("string"!=typeof d||!d)throw new A('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===d||"ECDH-ES"===d)throw new A('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof c.enc||!c.enc)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==c.enc)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=c.enc;if(aN(A,new Map,b.options.crit,this._protectedHeader,c),void 0!==c.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let f=as(e),g={ciphertext:"",iv:"",recipients:[],tag:""};for(let h=0;h<this._recipients.length;h++){let i=this._recipients[h],j={};g.recipients.push(j);let k=({...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader}).alg.startsWith("PBES2")?2048+h:void 0;if(0===h){let b=await new aY(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(f).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(i.unprotectedHeader).setKeyManagementParameters({p2c:k}).encrypt(i.key,{...i.options,...a,[aX]:!0});g.ciphertext=b.ciphertext,g.iv=b.iv,g.tag=b.tag,b.aad&&(g.aad=b.aad),b.protected&&(g.protected=b.protected),b.unprotected&&(g.unprotected=b.unprotected),j.encrypted_key=b.encrypted_key,b.header&&(j.header=b.header);continue}let{encryptedKey:l,parameters:m}=await aW((null==(b=i.unprotectedHeader)?void 0:b.alg)||(null==(c=this._protectedHeader)?void 0:c.alg)||(null==(d=this._unprotectedHeader)?void 0:d.alg),e,i.key,f,{p2c:k});j.encrypted_key=q(l),(i.unprotectedHeader||m)&&(j.header={...i.unprotectedHeader,...m})}return g}}function a_(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:a.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"EdDSA":return{name:b.name};default:throw new x(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}function a0(a,b,c){if(b instanceof CryptoKey)return!function(a,b,...c){switch(b){case"HS256":case"HS384":case"HS512":{if(!P(a.algorithm,"HMAC"))throw O("HMAC");let c=parseInt(b.slice(2),10);if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!P(a.algorithm,"RSASSA-PKCS1-v1_5"))throw O("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!P(a.algorithm,"RSA-PSS"))throw O("RSA-PSS");let c=parseInt(b.slice(2),10);if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw O("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!P(a.algorithm,"ECDSA"))throw O("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw O(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}R(a,c)}(b,a,c),b;if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(U(b,...W));return f.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}throw TypeError(U(b,...W,"Uint8Array"))}let a1=async(a,b,c,d)=>{let e=await a0(a,b,"verify");ao(a,e);let g=a_(a,e.algorithm);try{return await f.subtle.verify(g,e,c,d)}catch(a){return!1}};async function a2(a,b,c){var d;let e,f;if(!ab(a))throw new B("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new B('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new B("JWS Protected Header incorrect type");if(void 0===a.payload)throw new B("JWS Payload missing");if("string"!=typeof a.signature)throw new B("JWS Signature missing or incorrect type");if(void 0!==a.header&&!ab(a.header))throw new B("JWS Unprotected Header incorrect type");let g={};if(a.protected)try{let b=s(a.protected);g=JSON.parse(i.decode(b))}catch(a){throw new B("JWS Protected Header is invalid")}if(!aa(g,a.header))throw new B("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let k={...g,...a.header},l=aN(B,new Map([["b64",!0]]),null==c?void 0:c.crit,g,k),m=!0;if(l.has("b64")&&"boolean"!=typeof(m=g.b64))throw new B('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:n}=k;if("string"!=typeof n||!n)throw new B('JWS "alg" (Algorithm) Header Parameter missing or invalid');let o=c&&aO("algorithms",c.algorithms);if(o&&!o.has(n))throw new w('"alg" (Algorithm) Header Parameter not allowed');if(m){if("string"!=typeof a.payload)throw new B("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new B("JWS Payload must be a string or an Uint8Array instance");let p=!1;"function"==typeof b&&(b=await b(g,a),p=!0),aG(n,b,"verify");let q=j(h.encode(null!=(d=a.protected)?d:""),h.encode("."),"string"==typeof a.payload?h.encode(a.payload):a.payload);try{e=s(a.signature)}catch(a){throw new B("Failed to base64url decode the signature")}if(!await a1(n,b,e,q))throw new I;if(m)try{f=s(a.payload)}catch(a){throw new B("Failed to base64url decode the payload")}else f="string"==typeof a.payload?h.encode(a.payload):a.payload;let r={payload:f};return(void 0!==a.protected&&(r.protectedHeader=g),void 0!==a.header&&(r.unprotectedHeader=a.header),p)?{...r,key:b}:r}async function a3(a,b,c){if(a instanceof Uint8Array&&(a=i.decode(a)),"string"!=typeof a)throw new B("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new B("Invalid Compact JWS");let h=await a2({payload:e,protected:d,signature:f},b,c),j={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...j,key:h.key}:j}async function a4(a,b,c){if(!ab(a))throw new B("General JWS must be an object");if(!Array.isArray(a.signatures)||!a.signatures.every(ab))throw new B("JWS Signatures missing or incorrect type");for(let d of a.signatures)try{return await a2({header:d.header,payload:a.payload,protected:d.protected,signature:d.signature},b,c)}catch(a){}throw new I}let a5=a=>Math.floor(a.getTime()/1e3),a6=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,a7=a=>{let b=a6.exec(a);if(!b)throw TypeError("Invalid time period format");let c=parseFloat(b[1]);switch(b[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(c);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*c);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*c);case"day":case"days":case"d":return Math.round(86400*c);case"week":case"weeks":case"w":return Math.round(604800*c);default:return Math.round(0x1e187e0*c)}},a8=a=>a.toLowerCase().replace(/^application\//,""),a9=(a,b,c={})=>{let d,e,{typ:f}=c;if(f&&("string"!=typeof a.typ||a8(a.typ)!==a8(f)))throw new u('unexpected "typ" JWT header value',"typ","check_failed");try{d=JSON.parse(i.decode(b))}catch(a){}if(!ab(d))throw new C("JWT Claims Set must be a top-level JSON object");let{requiredClaims:g=[],issuer:h,subject:j,audience:k,maxTokenAge:l}=c;for(let a of(void 0!==l&&g.push("iat"),void 0!==k&&g.push("aud"),void 0!==j&&g.push("sub"),void 0!==h&&g.push("iss"),new Set(g.reverse())))if(!(a in d))throw new u(`missing required "${a}" claim`,a,"missing");if(h&&!(Array.isArray(h)?h:[h]).includes(d.iss))throw new u('unexpected "iss" claim value',"iss","check_failed");if(j&&d.sub!==j)throw new u('unexpected "sub" claim value',"sub","check_failed");if(k&&!((a,b)=>"string"==typeof a?b.includes(a):!!Array.isArray(a)&&b.some(Set.prototype.has.bind(new Set(a))))(d.aud,"string"==typeof k?[k]:k))throw new u('unexpected "aud" claim value',"aud","check_failed");switch(typeof c.clockTolerance){case"string":e=a7(c.clockTolerance);break;case"number":e=c.clockTolerance;break;case"undefined":e=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:m}=c,n=a5(m||new Date);if((void 0!==d.iat||l)&&"number"!=typeof d.iat)throw new u('"iat" claim must be a number',"iat","invalid");if(void 0!==d.nbf){if("number"!=typeof d.nbf)throw new u('"nbf" claim must be a number',"nbf","invalid");if(d.nbf>n+e)throw new u('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==d.exp){if("number"!=typeof d.exp)throw new u('"exp" claim must be a number',"exp","invalid");if(d.exp<=n-e)throw new v('"exp" claim timestamp check failed',"exp","check_failed")}if(l){let a=n-d.iat;if(a-e>("number"==typeof l?l:a7(l)))throw new v('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(a<0-e)throw new u('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return d};async function ba(a,b,c){var d;let e=await a3(a,b,c);if((null==(d=e.protectedHeader.crit)?void 0:d.includes("b64"))&&!1===e.protectedHeader.b64)throw new C("JWTs MUST NOT use unencoded payload");let f={payload:a9(e.protectedHeader,e.payload,c),protectedHeader:e.protectedHeader};return"function"==typeof b?{...f,key:e.key}:f}async function bb(a,b,c){let d=await aQ(a,b,c),e=a9(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new u('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new u('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new u('replicated "aud" claim header parameter mismatch',"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}class bc{constructor(a){this._flattened=new aY(a)}setContentEncryptionKey(a){return this._flattened.setContentEncryptionKey(a),this}setInitializationVector(a){return this._flattened.setInitializationVector(a),this}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}setKeyManagementParameters(a){return this._flattened.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this._flattened.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}let bd=async(a,b,c)=>{let d=await a0(a,b,"sign");return ao(a,d),new Uint8Array(await f.subtle.sign(a_(a,d.algorithm),d,c))};class be{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new B("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!aa(this._protectedHeader,this._unprotectedHeader))throw new B("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader},e=aN(B,new Map([["b64",!0]]),null==b?void 0:b.crit,this._protectedHeader,d),f=!0;if(e.has("b64")&&"boolean"!=typeof(f=this._protectedHeader.b64))throw new B('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:g}=d;if("string"!=typeof g||!g)throw new B('JWS "alg" (Algorithm) Header Parameter missing or invalid');aG(g,a,"sign");let k=this._payload;f&&(k=h.encode(q(k)));let l=j(c=this._protectedHeader?h.encode(q(JSON.stringify(this._protectedHeader))):h.encode(""),h.encode("."),k),m={signature:q(await bd(g,a,l)),payload:""};return f&&(m.payload=i.decode(k)),this._unprotectedHeader&&(m.header=this._unprotectedHeader),this._protectedHeader&&(m.protected=i.decode(c)),m}}class bf{constructor(a){this._flattened=new be(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}class bg{constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setProtectedHeader(a){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=a,this}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addSignature(...a){return this.parent.addSignature(...a)}sign(...a){return this.parent.sign(...a)}done(){return this.parent}}class bh{constructor(a){this._signatures=[],this._payload=a}addSignature(a,b){let c=new bg(this,a,b);return this._signatures.push(c),c}async sign(){if(!this._signatures.length)throw new B("at least one signature must be added");let a={signatures:[],payload:""};for(let b=0;b<this._signatures.length;b++){let c=this._signatures[b],d=new be(this._payload);d.setProtectedHeader(c.protectedHeader),d.setUnprotectedHeader(c.unprotectedHeader);let{payload:e,...f}=await d.sign(c.key,c.options);if(0===b)a.payload=e;else if(a.payload!==e)throw new B("inconsistent use of JWS Unencoded Payload (RFC7797)");a.signatures.push(f)}return a}}class bi{constructor(a){if(!ab(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:a}:this._payload={...this._payload,nbf:a5(new Date)+a7(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:a}:this._payload={...this._payload,exp:a5(new Date)+a7(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:a5(new Date)}:this._payload={...this._payload,iat:a},this}}class bj extends bi{setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){var c;let d=new bf(h.encode(JSON.stringify(this._payload)));if(d.setProtectedHeader(this._protectedHeader),Array.isArray(null==(c=this._protectedHeader)?void 0:c.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new C("JWTs MUST NOT use unencoded payload");return d.sign(a,b)}}class bk extends bi{setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(a,b){let c=new bc(h.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),c.setProtectedHeader(this._protectedHeader),this._iv&&c.setInitializationVector(this._iv),this._cek&&c.setContentEncryptionKey(this._cek),this._keyManagementParameters&&c.setKeyManagementParameters(this._keyManagementParameters),c.encrypt(a,b)}}let bl=(a,b)=>{if("string"!=typeof a||!a)throw new D(`${b} missing or invalid`)};async function bm(a,b){let c;if(!ab(a))throw TypeError("JWK must be an object");if(null!=b||(b="sha256"),"sha256"!==b&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(a.kty){case"EC":bl(a.crv,'"crv" (Curve) Parameter'),bl(a.x,'"x" (X Coordinate) Parameter'),bl(a.y,'"y" (Y Coordinate) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x,y:a.y};break;case"OKP":bl(a.crv,'"crv" (Subtype of Key Pair) Parameter'),bl(a.x,'"x" (Public Key) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x};break;case"RSA":bl(a.e,'"e" (Exponent) Parameter'),bl(a.n,'"n" (Modulus) Parameter'),c={e:a.e,kty:a.kty,n:a.n};break;case"oct":bl(a.k,'"k" (Key Value) Parameter'),c={k:a.k,kty:a.kty};break;default:throw new x('"kty" (Key Type) Parameter missing or unsupported')}let d=h.encode(JSON.stringify(c));return q(await g(b,d))}async function bn(a,b){null!=b||(b="sha256");let c=await bm(a,b);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${b.slice(-3)}:${c}`}async function bo(a,b){let c={...a,...null==b?void 0:b.header};if(!ab(c.jwk))throw new B('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let d=await aF({...c.jwk,ext:!0},c.alg,!0);if(d instanceof Uint8Array||"public"!==d.type)throw new B('"jwk" (JSON Web Key) Header Parameter must be a public key');return d}function bp(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(bq)}function bq(a){return ab(a)}class br{constructor(a){if(this._cached=new WeakMap,!bp(a))throw new E("JSON Web Key Set malformed");this._jwks=function(a){return"function"==typeof structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}(a)}async getKey(a,b){let{alg:c,kid:d}={...a,...null==b?void 0:b.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new x('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this._jwks.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&"string"==typeof a.alg&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b&&"EdDSA"===c&&(b="Ed25519"===a.crv||"Ed448"===a.crv),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES256K":b="secp256k1"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new F;if(1!==h){let a=new G,{_cached:b}=this;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await bs(b,a,c)}catch(a){continue}},a}return bs(this._cached,g,c)}}async function bs(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await aF({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new E("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function bt(a){let b=new br(a);return async function(a,c){return b.getKey(a,c)}}let bu=async(a,b,c)=>{let d,e,f=!1;"function"==typeof AbortController&&(d=new AbortController,e=setTimeout(()=>{f=!0,d.abort()},b));let g=await fetch(a.href,{signal:d?d.signal:void 0,redirect:"manual",headers:c.headers}).catch(a=>{if(f)throw new H;throw a});if(void 0!==e&&clearTimeout(e),200!==g.status)throw new t("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await g.json()}catch(a){throw new t("Failed to parse the JSON Web Key Set HTTP response as JSON")}};class bv extends br{constructor(a,b){if(super({keys:[]}),this._jwks=void 0,!(a instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(a.href),this._options={agent:null==b?void 0:b.agent,headers:null==b?void 0:b.headers},this._timeoutDuration="number"==typeof(null==b?void 0:b.timeoutDuration)?null==b?void 0:b.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==b?void 0:b.cooldownDuration)?null==b?void 0:b.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==b?void 0:b.cacheMaxAge)?null==b?void 0:b.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(a,b){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(a,b)}catch(c){if(c instanceof F&&!1===this.coolingDown())return await this.reload(),super.getKey(a,b);throw c}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||1)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=bu(this._url,this._timeoutDuration,this._options).then(a=>{if(!bp(a))throw new E("JSON Web Key Set malformed");this._jwks={keys:a.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(a=>{throw this._pendingFetch=void 0,a})),await this._pendingFetch}}function bw(a,b){let c=new bv(a,b);return async function(a,b){return c.getKey(a,b)}}class bx extends bi{encode(){let a=q(JSON.stringify({alg:"none"})),b=q(JSON.stringify(this._payload));return`${a}.${b}.`}static decode(a,b){let c;if("string"!=typeof a)throw new C("Unsecured JWT must be a string");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g||""!==f)throw new C("Invalid Unsecured JWT");try{if(c=JSON.parse(i.decode(s(d))),"none"!==c.alg)throw Error()}catch(a){throw new C("Invalid Unsecured JWT")}return{payload:a9(c,s(e),b),header:c}}}let by=q,bz=s;function bA(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(i.decode(bz(b)));if(!ab(a))throw Error();return a}catch(a){throw TypeError("Invalid Token or Protected Header formatting")}}function bB(a){let b,c;if("string"!=typeof a)throw new C("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new C("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new C("Invalid JWT");if(!d)throw new C("JWTs must contain a payload");try{b=bz(d)}catch(a){throw new C("Failed to base64url decode the payload")}try{c=JSON.parse(i.decode(b))}catch(a){throw new C("Failed to parse the decoded payload as JSON")}if(!ab(c))throw new C("Invalid JWT Claims Set");return c}async function bC(a,b){var c;let d,e,g;switch(a){case"HS256":case"HS384":case"HS512":d=parseInt(a.slice(-3),10),e={name:"HMAC",hash:`SHA-${d}`,length:d},g=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return J(new Uint8Array((d=parseInt(a.slice(-3),10))>>3));case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW",length:d=parseInt(a.slice(1,4),10)},g=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":e={name:"AES-GCM",length:d=parseInt(a.slice(1,4),10)},g=["encrypt","decrypt"];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return f.subtle.generateKey(e,null!=(c=null==b?void 0:b.extractable)&&c,g)}function bD(a){var b;let c=null!=(b=null==a?void 0:a.modulusLength)?b:2048;if("number"!=typeof c||c<2048)throw new x("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return c}async function bE(a,b){var c,d,e;let g,h;switch(a){case"PS256":case"PS384":case"PS512":g={name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bD(b)},h=["sign","verify"];break;case"RS256":case"RS384":case"RS512":g={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bD(b)},h=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g={name:"RSA-OAEP",hash:`SHA-${parseInt(a.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bD(b)},h=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":g={name:"ECDSA",namedCurve:"P-256"},h=["sign","verify"];break;case"ES384":g={name:"ECDSA",namedCurve:"P-384"},h=["sign","verify"];break;case"ES512":g={name:"ECDSA",namedCurve:"P-521"},h=["sign","verify"];break;case"EdDSA":h=["sign","verify"];let i=null!=(c=null==b?void 0:b.crv)?c:"Ed25519";switch(i){case"Ed25519":case"Ed448":g={name:i};break;default:throw new x("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{h=["deriveKey","deriveBits"];let a=null!=(d=null==b?void 0:b.crv)?d:"P-256";switch(a){case"P-256":case"P-384":case"P-521":g={name:"ECDH",namedCurve:a};break;case"X25519":case"X448":g={name:a};break;default:throw new x("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return f.subtle.generateKey(g,null!=(e=null==b?void 0:b.extractable)&&e,h)}async function bF(a,b){return bE(a,b)}async function bG(a,b){return bC(a,b)}let bH="WebCryptoAPI"},6809:(a,b,c)=>{"use strict";var d=c(2851);Object.defineProperty(b,"__esModule",{value:!0});var e={encode:!0,decode:!0,getToken:!0};b.decode=l,b.encode=k,b.getToken=m;var f=c(5672),g=d(c(8199)),h=c(8423),i=c(3485),j=c(8966);async function k(a){let{token:b={},secret:c,maxAge:d=2592e3,salt:e=""}=a,g=await n(c,e);return await new f.EncryptJWT(b).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti((0,h.v4)()).encrypt(g)}async function l(a){let{token:b,secret:c,salt:d=""}=a;if(!b)return null;let e=await n(c,d),{payload:g}=await (0,f.jwtDecrypt)(b,e,{clockTolerance:15});return g}async function m(a){var b,c,d,e;let{req:f,secureCookie:g=null!=(b=null==(c=process.env.NEXTAUTH_URL)?void 0:c.startsWith("https://"))?b:!!process.env.VERCEL,cookieName:h=g?"__Secure-next-auth.session-token":"next-auth.session-token",raw:j,decode:k=l,logger:m=console,secret:n=null!=(d=process.env.NEXTAUTH_SECRET)?d:process.env.AUTH_SECRET}=a;if(!f)throw Error("Must pass `req` to JWT getToken()");let o=new i.SessionStore({name:h,options:{secure:g}},{cookies:f.cookies,headers:f.headers},m).value,p=f.headers instanceof Headers?f.headers.get("authorization"):null==(e=f.headers)?void 0:e.authorization;if(o||(null==p?void 0:p.split(" ")[0])!=="Bearer"||(o=decodeURIComponent(p.split(" ")[1])),!o)return null;if(j)return o;try{return await k({token:o,secret:n})}catch(a){return null}}async function n(a,b){return await (0,g.default)("sha256",a,b,`NextAuth.js Generated Encryption Key${b?` (${b})`:""}`,32)}Object.keys(j).forEach(function(a){!("default"===a||"__esModule"===a||Object.prototype.hasOwnProperty.call(e,a))&&(a in b&&b[a]===j[a]||Object.defineProperty(b,a,{enumerable:!0,get:function(){return j[a]}}))})},6957:(a,b)=>{"use strict";Symbol.for("react.transitional.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;Object.prototype.hasOwnProperty,Object.assign},8199:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f,hkdf:()=>f});let d=async(a,b,c,d,e)=>{let{crypto:{subtle:f}}=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw Error("unable to locate global object")})();return new Uint8Array(await f.deriveBits({name:"HKDF",hash:`SHA-${a.substr(3)}`,salt:c,info:d},await f.importKey("raw",b,"HKDF",!1,["deriveBits"]),e<<3))};function e(a,b){if("string"==typeof a)return new TextEncoder().encode(a);if(!(a instanceof Uint8Array))throw TypeError(`"${b}"" must be an instance of Uint8Array or a string`);return a}async function f(a,b,c,f,g){return d(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(a),function(a){let b=e(a,"ikm");if(!b.byteLength)throw TypeError('"ikm" must be at least one byte in length');return b}(b),e(c,"salt"),function(a){let b=e(a,"info");if(b.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return b}(f),function(a,b){if("number"!=typeof a||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(b.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(g,a))}},8423:(a,b,c)=>{"use strict";c.r(b),c.d(b,{NIL:()=>D,parse:()=>q,stringify:()=>m,v1:()=>p,v3:()=>z,v4:()=>A,v5:()=>C,validate:()=>j,version:()=>E});var d,e,f,g=new Uint8Array(16);function h(){if(!d&&!(d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(g)}let i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,j=function(a){return"string"==typeof a&&i.test(a)};for(var k=[],l=0;l<256;++l)k.push((l+256).toString(16).substr(1));let m=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=(k[a[b+0]]+k[a[b+1]]+k[a[b+2]]+k[a[b+3]]+"-"+k[a[b+4]]+k[a[b+5]]+"-"+k[a[b+6]]+k[a[b+7]]+"-"+k[a[b+8]]+k[a[b+9]]+"-"+k[a[b+10]]+k[a[b+11]]+k[a[b+12]]+k[a[b+13]]+k[a[b+14]]+k[a[b+15]]).toLowerCase();if(!j(c))throw TypeError("Stringified UUID is invalid");return c};var n=0,o=0;let p=function(a,b,c){var d=b&&c||0,g=b||Array(16),i=(a=a||{}).node||e,j=void 0!==a.clockseq?a.clockseq:f;if(null==i||null==j){var k=a.random||(a.rng||h)();null==i&&(i=e=[1|k[0],k[1],k[2],k[3],k[4],k[5]]),null==j&&(j=f=(k[6]<<8|k[7])&16383)}var l=void 0!==a.msecs?a.msecs:Date.now(),p=void 0!==a.nsecs?a.nsecs:o+1,q=l-n+(p-o)/1e4;if(q<0&&void 0===a.clockseq&&(j=j+1&16383),(q<0||l>n)&&void 0===a.nsecs&&(p=0),p>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");n=l,o=p,f=j;var r=((0xfffffff&(l+=122192928e5))*1e4+p)%0x100000000;g[d++]=r>>>24&255,g[d++]=r>>>16&255,g[d++]=r>>>8&255,g[d++]=255&r;var s=l/0x100000000*1e4&0xfffffff;g[d++]=s>>>8&255,g[d++]=255&s,g[d++]=s>>>24&15|16,g[d++]=s>>>16&255,g[d++]=j>>>8|128,g[d++]=255&j;for(var t=0;t<6;++t)g[d+t]=i[t];return b||m(g)},q=function(a){if(!j(a))throw TypeError("Invalid UUID");var b,c=new Uint8Array(16);return c[0]=(b=parseInt(a.slice(0,8),16))>>>24,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c[4]=(b=parseInt(a.slice(9,13),16))>>>8,c[5]=255&b,c[6]=(b=parseInt(a.slice(14,18),16))>>>8,c[7]=255&b,c[8]=(b=parseInt(a.slice(19,23),16))>>>8,c[9]=255&b,c[10]=(b=parseInt(a.slice(24,36),16))/0x10000000000&255,c[11]=b/0x100000000&255,c[12]=b>>>24&255,c[13]=b>>>16&255,c[14]=b>>>8&255,c[15]=255&b,c};function r(a,b,c){function d(a,d,e,f){if("string"==typeof a&&(a=function(a){a=unescape(encodeURIComponent(a));for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b}(a)),"string"==typeof d&&(d=q(d)),16!==d.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+a.length);if(g.set(d),g.set(a,d.length),(g=c(g))[6]=15&g[6]|b,g[8]=63&g[8]|128,e){f=f||0;for(var h=0;h<16;++h)e[f+h]=g[h];return e}return m(g)}try{d.name=a}catch(a){}return d.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",d.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",d}function s(a){return(a+64>>>9<<4)+14+1}function t(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function u(a,b,c,d,e,f){var g;return t((g=t(t(b,a),t(d,f)))<<e|g>>>32-e,c)}function v(a,b,c,d,e,f,g){return u(b&c|~b&d,a,b,e,f,g)}function w(a,b,c,d,e,f,g){return u(b&d|c&~d,a,b,e,f,g)}function x(a,b,c,d,e,f,g){return u(b^c^d,a,b,e,f,g)}function y(a,b,c,d,e,f,g){return u(c^(b|~d),a,b,e,f,g)}let z=r("v3",48,function(a){if("string"==typeof a){var b=unescape(encodeURIComponent(a));a=new Uint8Array(b.length);for(var c=0;c<b.length;++c)a[c]=b.charCodeAt(c)}return function(a){for(var b=[],c=32*a.length,d="0123456789abcdef",e=0;e<c;e+=8){var f=a[e>>5]>>>e%32&255,g=parseInt(d.charAt(f>>>4&15)+d.charAt(15&f),16);b.push(g)}return b}(function(a,b){a[b>>5]|=128<<b%32,a[s(b)-1]=b;for(var c=0x67452301,d=-0x10325477,e=-0x67452302,f=0x10325476,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=v(c,d,e,f,a[g],7,-0x28955b88),f=v(f,c,d,e,a[g+1],12,-0x173848aa),e=v(e,f,c,d,a[g+2],17,0x242070db),d=v(d,e,f,c,a[g+3],22,-0x3e423112),c=v(c,d,e,f,a[g+4],7,-0xa83f051),f=v(f,c,d,e,a[g+5],12,0x4787c62a),e=v(e,f,c,d,a[g+6],17,-0x57cfb9ed),d=v(d,e,f,c,a[g+7],22,-0x2b96aff),c=v(c,d,e,f,a[g+8],7,0x698098d8),f=v(f,c,d,e,a[g+9],12,-0x74bb0851),e=v(e,f,c,d,a[g+10],17,-42063),d=v(d,e,f,c,a[g+11],22,-0x76a32842),c=v(c,d,e,f,a[g+12],7,0x6b901122),f=v(f,c,d,e,a[g+13],12,-0x2678e6d),e=v(e,f,c,d,a[g+14],17,-0x5986bc72),d=v(d,e,f,c,a[g+15],22,0x49b40821),c=w(c,d,e,f,a[g+1],5,-0x9e1da9e),f=w(f,c,d,e,a[g+6],9,-0x3fbf4cc0),e=w(e,f,c,d,a[g+11],14,0x265e5a51),d=w(d,e,f,c,a[g],20,-0x16493856),c=w(c,d,e,f,a[g+5],5,-0x29d0efa3),f=w(f,c,d,e,a[g+10],9,0x2441453),e=w(e,f,c,d,a[g+15],14,-0x275e197f),d=w(d,e,f,c,a[g+4],20,-0x182c0438),c=w(c,d,e,f,a[g+9],5,0x21e1cde6),f=w(f,c,d,e,a[g+14],9,-0x3cc8f82a),e=w(e,f,c,d,a[g+3],14,-0xb2af279),d=w(d,e,f,c,a[g+8],20,0x455a14ed),c=w(c,d,e,f,a[g+13],5,-0x561c16fb),f=w(f,c,d,e,a[g+2],9,-0x3105c08),e=w(e,f,c,d,a[g+7],14,0x676f02d9),d=w(d,e,f,c,a[g+12],20,-0x72d5b376),c=x(c,d,e,f,a[g+5],4,-378558),f=x(f,c,d,e,a[g+8],11,-0x788e097f),e=x(e,f,c,d,a[g+11],16,0x6d9d6122),d=x(d,e,f,c,a[g+14],23,-0x21ac7f4),c=x(c,d,e,f,a[g+1],4,-0x5b4115bc),f=x(f,c,d,e,a[g+4],11,0x4bdecfa9),e=x(e,f,c,d,a[g+7],16,-0x944b4a0),d=x(d,e,f,c,a[g+10],23,-0x41404390),c=x(c,d,e,f,a[g+13],4,0x289b7ec6),f=x(f,c,d,e,a[g],11,-0x155ed806),e=x(e,f,c,d,a[g+3],16,-0x2b10cf7b),d=x(d,e,f,c,a[g+6],23,0x4881d05),c=x(c,d,e,f,a[g+9],4,-0x262b2fc7),f=x(f,c,d,e,a[g+12],11,-0x1924661b),e=x(e,f,c,d,a[g+15],16,0x1fa27cf8),d=x(d,e,f,c,a[g+2],23,-0x3b53a99b),c=y(c,d,e,f,a[g],6,-0xbd6ddbc),f=y(f,c,d,e,a[g+7],10,0x432aff97),e=y(e,f,c,d,a[g+14],15,-0x546bdc59),d=y(d,e,f,c,a[g+5],21,-0x36c5fc7),c=y(c,d,e,f,a[g+12],6,0x655b59c3),f=y(f,c,d,e,a[g+3],10,-0x70f3336e),e=y(e,f,c,d,a[g+10],15,-1051523),d=y(d,e,f,c,a[g+1],21,-0x7a7ba22f),c=y(c,d,e,f,a[g+8],6,0x6fa87e4f),f=y(f,c,d,e,a[g+15],10,-0x1d31920),e=y(e,f,c,d,a[g+6],15,-0x5cfebcec),d=y(d,e,f,c,a[g+13],21,0x4e0811a1),c=y(c,d,e,f,a[g+4],6,-0x8ac817e),f=y(f,c,d,e,a[g+11],10,-0x42c50dcb),e=y(e,f,c,d,a[g+2],15,0x2ad7d2bb),d=y(d,e,f,c,a[g+9],21,-0x14792c6f),c=t(c,h),d=t(d,i),e=t(e,j),f=t(f,k)}return[c,d,e,f]}(function(a){if(0===a.length)return[];for(var b=8*a.length,c=new Uint32Array(s(b)),d=0;d<b;d+=8)c[d>>5]|=(255&a[d/8])<<d%32;return c}(a),8*a.length))}),A=function(a,b,c){var d=(a=a||{}).random||(a.rng||h)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(var e=0;e<16;++e)b[c+e]=d[e];return b}return m(d)};function B(a,b){return a<<b|a>>>32-b}let C=r("v5",80,function(a){var b=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6],c=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];if("string"==typeof a){var d=unescape(encodeURIComponent(a));a=[];for(var e=0;e<d.length;++e)a.push(d.charCodeAt(e))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var f=Math.ceil((a.length/4+2)/16),g=Array(f),h=0;h<f;++h){for(var i=new Uint32Array(16),j=0;j<16;++j)i[j]=a[64*h+4*j]<<24|a[64*h+4*j+1]<<16|a[64*h+4*j+2]<<8|a[64*h+4*j+3];g[h]=i}g[f-1][14]=(a.length-1)*8/0x100000000,g[f-1][14]=Math.floor(g[f-1][14]),g[f-1][15]=(a.length-1)*8|0;for(var k=0;k<f;++k){for(var l=new Uint32Array(80),m=0;m<16;++m)l[m]=g[k][m];for(var n=16;n<80;++n)l[n]=B(l[n-3]^l[n-8]^l[n-14]^l[n-16],1);for(var o=c[0],p=c[1],q=c[2],r=c[3],s=c[4],t=0;t<80;++t){var u=Math.floor(t/20),v=B(o,5)+function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:case 3:return b^c^d;case 2:return b&c^b&d^c&d}}(u,p,q,r)+s+b[u]+l[t]>>>0;s=r,r=q,q=B(p,30)>>>0,p=o,o=v}c[0]=c[0]+o>>>0,c[1]=c[1]+p>>>0,c[2]=c[2]+q>>>0,c[3]=c[3]+r>>>0,c[4]=c[4]+s>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,255&c[0],c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,255&c[1],c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,255&c[2],c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,255&c[3],c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,255&c[4]]}),D="00000000-0000-0000-0000-000000000000",E=function(a){if(!j(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}},8966:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},9082:(a,b,c)=>{var d;(()=>{var e={226:function(e,f){!function(g,h){"use strict";var i="function",j="undefined",k="object",l="string",m="major",n="model",o="name",p="type",q="vendor",r="version",s="architecture",t="console",u="mobile",v="tablet",w="smarttv",x="wearable",y="embedded",z="Amazon",A="Apple",B="ASUS",C="BlackBerry",D="Browser",E="Chrome",F="Firefox",G="Google",H="Huawei",I="Microsoft",J="Motorola",K="Opera",L="Samsung",M="Sharp",N="Sony",O="Xiaomi",P="Zebra",Q="Facebook",R="Chromium OS",S="Mac OS",T=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},U=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},V=function(a,b){return typeof a===l&&-1!==W(b).indexOf(W(a))},W=function(a){return a.toLowerCase()},X=function(a,b){if(typeof a===l)return a=a.replace(/^\s\s*/,""),typeof b===j?a:a.substring(0,350)},Y=function(a,b){for(var c,d,e,f,g,j,l=0;l<b.length&&!g;){var m=b[l],n=b[l+1];for(c=d=0;c<m.length&&!g&&m[c];)if(g=m[c++].exec(a))for(e=0;e<n.length;e++)j=g[++d],typeof(f=n[e])===k&&f.length>0?2===f.length?typeof f[1]==i?this[f[0]]=f[1].call(this,j):this[f[0]]=f[1]:3===f.length?typeof f[1]!==i||f[1].exec&&f[1].test?this[f[0]]=j?j.replace(f[1],f[2]):void 0:this[f[0]]=j?f[1].call(this,j,f[2]):void 0:4===f.length&&(this[f[0]]=j?f[3].call(this,j.replace(f[1],f[2])):h):this[f]=j||h;l+=2}},Z=function(a,b){for(var c in b)if(typeof b[c]===k&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(V(b[c][d],a))return"?"===c?h:c}else if(V(b[c],a))return"?"===c?h:c;return a},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[r,[o,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[r,[o,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[o,r],[/opios[\/ ]+([\w\.]+)/i],[r,[o,K+" Mini"]],[/\bopr\/([\w\.]+)/i],[r,[o,K]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[o,r],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[r,[o,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[r,[o,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[r,[o,"WeChat"]],[/konqueror\/([\w\.]+)/i],[r,[o,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[r,[o,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[r,[o,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[o,/(.+)/,"$1 Secure "+D],r],[/\bfocus\/([\w\.]+)/i],[r,[o,F+" Focus"]],[/\bopt\/([\w\.]+)/i],[r,[o,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[r,[o,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[r,[o,"Dolphin"]],[/coast\/([\w\.]+)/i],[r,[o,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[r,[o,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[r,[o,F]],[/\bqihu|(qi?ho?o?|360)browser/i],[[o,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[o,/(.+)/,"$1 "+D],r],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],r],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[o,r],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[o],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[o,Q],r],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[o,r],[/\bgsa\/([\w\.]+) .*safari\//i],[r,[o,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[r,[o,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[r,[o,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[o,E+" WebView"],r],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[r,[o,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[o,r],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[r,[o,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[r,o],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[o,[r,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[o,r],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[o,"Netscape"],r],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[r,[o,F+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[o,r],[/(cobalt)\/([\w\.]+)/i],[o,[r,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,W]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[s,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[s,"armhf"]],[/windows (ce|mobile); ppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[s,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[s,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[n,[q,L],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[n,[q,L],[p,u]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[n,[q,A],[p,u]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[n,[q,A],[p,v]],[/(macintosh);/i],[n,[q,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[n,[q,M],[p,u]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[n,[q,H],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[n,[q,H],[p,u]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,u]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[n,[q,"OPPO"],[p,u]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[n,[q,"Vivo"],[p,u]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[n,[q,"Realme"],[p,u]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[n,[q,J],[p,u]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[n,[q,J],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[n,[q,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[n,[q,"LG"],[p,u]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[n,[q,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[n,/_/g," "],[q,"Nokia"],[p,u]],[/(pixel c)\b/i],[n,[q,G],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[n,[q,G],[p,u]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[n,[q,N],[p,u]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[n,"Xperia Tablet"],[q,N],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[n,[q,"OnePlus"],[p,u]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[n,[q,z],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[n,/(.+)/g,"Fire Phone $1"],[q,z],[p,u]],[/(playbook);[-\w\),; ]+(rim)/i],[n,q,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[n,[q,C],[p,u]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[n,[q,B],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[n,[q,B],[p,u]],[/(nexus 9)/i],[n,[q,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[q,[n,/_/g," "],[p,u]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[n,[q,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[n,[q,"Meizu"],[p,u]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[q,n,[p,u]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[q,n,[p,v]],[/(surface duo)/i],[n,[q,I],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[n,[q,"Fairphone"],[p,u]],[/(u304aa)/i],[n,[q,"AT&T"],[p,u]],[/\bsie-(\w*)/i],[n,[q,"Siemens"],[p,u]],[/\b(rct\w+) b/i],[n,[q,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[n,[q,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[n,[q,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[n,[q,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[n,[q,"NuVision"],[p,v]],[/\b(k88) b/i],[n,[q,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[n,[q,"ZTE"],[p,u]],[/\b(gen\d{3}) b.+49h/i],[n,[q,"Swiss"],[p,u]],[/\b(zur\d{3}) b/i],[n,[q,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[n,[q,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[q,"Dragon Touch"],n,[p,v]],[/\b(ns-?\w{0,9}) b/i],[n,[q,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[n,[q,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[q,"Voice"],n,[p,u]],[/\b(lvtel\-)?(v1[12]) b/i],[[q,"LvTel"],n,[p,u]],[/\b(ph-1) /i],[n,[q,"Essential"],[p,u]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[n,[q,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[n,[q,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[n,[q,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[n,[q,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[q,n,[p,u]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[q,I],[p,u]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[n,[q,P],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[n,[q,P],[p,u]],[/smart-tv.+(samsung)/i],[q,[p,w]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[q,L],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[q,"LG"],[p,w]],[/(apple) ?tv/i],[q,[n,A+" TV"],[p,w]],[/crkey/i],[[n,E+"cast"],[q,G],[p,w]],[/droid.+aft(\w)( bui|\))/i],[n,[q,z],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[n,[q,M],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[n,[q,N],[p,w]],[/(mitv-\w{5}) bui/i],[n,[q,O],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[q,n,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[q,X],[n,X],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[q,n,[p,t]],[/droid.+; (shield) bui/i],[n,[q,"Nvidia"],[p,t]],[/(playstation [345portablevi]+)/i],[n,[q,N],[p,t]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[n,[q,I],[p,t]],[/((pebble))app/i],[q,n,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[n,[q,A],[p,x]],[/droid.+; (glass) \d/i],[n,[q,G],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[n,[q,P],[p,x]],[/(quest( 2| pro)?)/i],[n,[q,Q],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[q,[p,y]],[/(aeobc)\b/i],[n,[q,z],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[n,[p,u]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[n,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,u]],[/(android[-\w\. ]{0,9});.+buil/i],[n,[q,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[r,[o,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[r,[o,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[o,r],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[r,o]],os:[[/microsoft (windows) (vista|xp)/i],[o,r],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[o,[r,Z,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[o,"Windows"],[r,Z,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[r,/_/g,"."],[o,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[o,S],[r,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[r,o],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[o,r],[/\(bb(10);/i],[r,[o,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[r,[o,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[r,[o,F+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[r,[o,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[r,[o,"watchOS"]],[/crkey\/([\d\.]+)/i],[r,[o,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[o,R],r],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[o,r],[/(sunos) ?([\w\.\d]*)/i],[[o,"Solaris"],r],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[o,r]]},aa=function(a,b){if(typeof a===k&&(b=a,a=h),!(this instanceof aa))return new aa(a,b).getResult();var c=typeof g!==j&&g.navigator?g.navigator:h,d=a||(c&&c.userAgent?c.userAgent:""),e=c&&c.userAgentData?c.userAgentData:h,f=b?T(_,b):_,t=c&&c.userAgent==d;return this.getBrowser=function(){var a,b={};return b[o]=h,b[r]=h,Y.call(b,d,f.browser),b[m]=typeof(a=b[r])===l?a.replace(/[^\d\.]/g,"").split(".")[0]:h,t&&c&&c.brave&&typeof c.brave.isBrave==i&&(b[o]="Brave"),b},this.getCPU=function(){var a={};return a[s]=h,Y.call(a,d,f.cpu),a},this.getDevice=function(){var a={};return a[q]=h,a[n]=h,a[p]=h,Y.call(a,d,f.device),t&&!a[p]&&e&&e.mobile&&(a[p]=u),t&&"Macintosh"==a[n]&&c&&typeof c.standalone!==j&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[n]="iPad",a[p]=v),a},this.getEngine=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.engine),a},this.getOS=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.os),t&&!a[o]&&e&&"Unknown"!=e.platform&&(a[o]=e.platform.replace(/chrome os/i,R).replace(/macos/i,S)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=typeof a===l&&a.length>350?X(a,350):a,this},this.setUA(d),this};aa.VERSION="1.0.35",aa.BROWSER=U([o,r,m]),aa.CPU=U([s]),aa.DEVICE=U([n,q,p,t,u,w,v,x,y]),aa.ENGINE=aa.OS=U([o,r]),typeof f!==j?(e.exports&&(f=e.exports=aa),f.UAParser=aa):c.amdO?void 0===(d=(function(){return aa}).call(b,c,b,a))||(a.exports=d):typeof g!==j&&(g.UAParser=aa);var ab=typeof g!==j&&(g.jQuery||g.Zepto);if(ab&&!ab.ua){var ac=new aa;ab.ua=ac.getResult(),ab.ua.get=function(){return ac.getUA()},ab.ua.set=function(a){ac.setUA(a);var b=ac.getResult();for(var c in b)ab.ua[c]=b[c]}}}("object"==typeof window?window:this)}},f={};function g(a){var b=f[a];if(void 0!==b)return b.exports;var c=f[a]={exports:{}},d=!0;try{e[a].call(c.exports,c,c.exports,g),d=!1}finally{d&&delete f[a]}return c.exports}g.ab="//",a.exports=g(226)})()},9186:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};function g(a){var b;let c=["path"in a&&a.path&&`Path=${a.path}`,"expires"in a&&(a.expires||0===a.expires)&&`Expires=${("number"==typeof a.expires?new Date(a.expires):a.expires).toUTCString()}`,"maxAge"in a&&"number"==typeof a.maxAge&&`Max-Age=${a.maxAge}`,"domain"in a&&a.domain&&`Domain=${a.domain}`,"secure"in a&&a.secure&&"Secure","httpOnly"in a&&a.httpOnly&&"HttpOnly","sameSite"in a&&a.sameSite&&`SameSite=${a.sameSite}`,"partitioned"in a&&a.partitioned&&"Partitioned","priority"in a&&a.priority&&`Priority=${a.priority}`].filter(Boolean),d=`${a.name}=${encodeURIComponent(null!=(b=a.value)?b:"")}`;return 0===c.length?d:`${d}; ${c.join("; ")}`}function h(a){let b=new Map;for(let c of a.split(/; */)){if(!c)continue;let a=c.indexOf("=");if(-1===a){b.set(c,"true");continue}let[d,e]=[c.slice(0,a),c.slice(a+1)];try{b.set(d,decodeURIComponent(null!=e?e:"true"))}catch{}}return b}function i(a){if(!a)return;let[[b,c],...d]=h(a),{domain:e,expires:f,httponly:g,maxage:i,path:l,samesite:m,secure:n,partitioned:o,priority:p}=Object.fromEntries(d.map(([a,b])=>[a.toLowerCase().replace(/-/g,""),b]));{var q,r,s={name:b,value:decodeURIComponent(c),domain:e,...f&&{expires:new Date(f)},...g&&{httpOnly:!0},..."string"==typeof i&&{maxAge:Number(i)},path:l,...m&&{sameSite:j.includes(q=(q=m).toLowerCase())?q:void 0},...n&&{secure:!0},...p&&{priority:k.includes(r=(r=p).toLowerCase())?r:void 0},...o&&{partitioned:!0}};let a={};for(let b in s)s[b]&&(a[b]=s[b]);return a}}((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{RequestCookies:()=>l,ResponseCookies:()=>m,parseCookie:()=>h,parseSetCookie:()=>i,stringifyCookie:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let i of d(f))e.call(a,i)||i===g||b(a,i,{get:()=>f[i],enumerable:!(h=c(f,i))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);var j=["strict","lax","none"],k=["low","medium","high"],l=class{constructor(a){this._parsed=new Map,this._headers=a;let b=a.get("cookie");if(b)for(let[a,c]of h(b))this._parsed.set(a,{name:a,value:c})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed);if(!a.length)return c.map(([a,b])=>b);let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(([a])=>a===d).map(([a,b])=>b)}has(a){return this._parsed.has(a)}set(...a){let[b,c]=1===a.length?[a[0].name,a[0].value]:a,d=this._parsed;return d.set(b,{name:b,value:c}),this._headers.set("cookie",Array.from(d).map(([a,b])=>g(b)).join("; ")),this}delete(a){let b=this._parsed,c=Array.isArray(a)?a.map(a=>b.delete(a)):b.delete(a);return this._headers.set("cookie",Array.from(b).map(([a,b])=>g(b)).join("; ")),c}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a=>`${a.name}=${encodeURIComponent(a.value)}`).join("; ")}},m=class{constructor(a){var b,c,d;this._parsed=new Map,this._headers=a;let e=null!=(d=null!=(c=null==(b=a.getSetCookie)?void 0:b.call(a))?c:a.get("set-cookie"))?d:[];for(let a of Array.isArray(e)?e:function(a){if(!a)return[];var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}(e)){let b=i(a);b&&this._parsed.set(b.name,b)}}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed.values());if(!a.length)return c;let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(a=>a.name===d)}has(a){return this._parsed.has(a)}set(...a){let[b,c,d]=1===a.length?[a[0].name,a[0].value,a[0]]:a,e=this._parsed;return e.set(b,function(a={name:"",value:""}){return"number"==typeof a.expires&&(a.expires=new Date(a.expires)),a.maxAge&&(a.expires=new Date(Date.now()+1e3*a.maxAge)),(null===a.path||void 0===a.path)&&(a.path="/"),a}({name:b,value:c,...d})),function(a,b){for(let[,c]of(b.delete("set-cookie"),a)){let a=g(c);b.append("set-cookie",a)}}(e,this._headers),this}delete(...a){let[b,c]="string"==typeof a[0]?[a[0]]:[a[0].name,a[0]];return this.set({...c,name:b,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(g).join("; ")}}}},a=>{var b=a(a.s=2900);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES).middleware_middleware=b}]);
//# sourceMappingURL=middleware.js.map;
  export default (function () {
    const module = { exports: {}, loaded: false };
    const fn = (function(module,exports) {var b=Object.create;var p=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var h=e=>p(e,"__esModule",{value:!0});var _=(e,n)=>{h(e);for(var t in n)p(e,t,{get:n[t],enumerable:!0})},U=(e,n,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of T(n))!L.call(e,i)&&i!=="default"&&p(e,i,{get:()=>n[i],enumerable:!(t=w(n,i))||t.enumerable});return e},A=e=>U(h(p(e!=null?b(P(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);_(exports,{default:()=>N});var R=A(require("async_hooks")),S="@next/request-context",f=Symbol.for(S),C=Symbol.for("internal.storage");function O(){let e=globalThis;if(!e[f]){let n=new R.AsyncLocalStorage,t={get:()=>n.getStore(),[C]:n};e[f]=t}return e[f]}var q=O();function m(e,n){return q[C].run(e,n)}function y(e){let n={};return e&&e.forEach((t,i)=>{n[i]=t,i.toLowerCase()==="set-cookie"&&(n[i]=M(t))}),n}function M(e){let n=[],t=0,i,a,g,o,r;function x(){for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length}function s(){return a=e.charAt(t),a!=="="&&a!==";"&&a!==","}for(;t<e.length;){for(i=t,r=!1;x();)if(a=e.charAt(t),a===","){for(g=t,t+=1,x(),o=t;t<e.length&&s();)t+=1;t<e.length&&e.charAt(t)==="="?(r=!0,t=o,n.push(e.substring(i,g)),i=t):t=g+1}else t+=1;(!r||t>=e.length)&&n.push(e.substring(i,e.length))}return n}function N(e){let n=e.staticRoutes.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page})),t=e.dynamicRoutes?.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page}))||[];return async function(a,g){let o=new URL(a.url).pathname,r={};if(e.nextConfig?.basePath&&o.startsWith(e.nextConfig.basePath)&&(o=o.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let s of e.nextConfig.i18n.locales){let u=new RegExp(`^/${s}($|/)`,"i");if(o.match(u)){o=o.replace(u,"/")||"/";break}}for(let s of n)if(s.regexp.exec(o)){r.name=s.page;break}if(!r.name){let s=E(o);for(let u of t||[]){if(s&&!E(u.page))continue;let d=u.regexp.exec(o);if(d){r={name:u.page,params:d.groups};break}}}let x=await m({waitUntil:g.waitUntil},()=>_ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:a.url,method:a.method,headers:y(a.headers),ip:c(a.headers,l.Ip),geo:{city:c(a.headers,l.City,!0),country:c(a.headers,l.Country,!0),latitude:c(a.headers,l.Latitude),longitude:c(a.headers,l.Longitude),region:c(a.headers,l.Region,!0)},nextConfig:e.nextConfig,page:r,body:a.body}}));return x.waitUntil&&g.waitUntil(x.waitUntil),x.response}}function c(e,n,t=!1){let i=e.get(n)||void 0;return t&&i?decodeURIComponent(i):i}function E(e){return e==="/api"||e.startsWith("/api/")}var l;(function(o){o.City="x-vercel-ip-city",o.Country="x-vercel-ip-country",o.Ip="x-real-ip",o.Latitude="x-vercel-ip-latitude",o.Longitude="x-vercel-ip-longitude",o.Region="x-vercel-ip-country-region"})(l||(l={}));

});
    fn(module, module.exports);
    return module.exports;
  }).call({}).default(
    {"name":"middleware","staticRoutes":[{"page":"/","regex":"^/(?:/)?$","routeKeys":{},"namedRegex":"^/(?:/)?$"},{"page":"/_not-found","regex":"^/_not\\-found(?:/)?$","routeKeys":{},"namedRegex":"^/_not\\-found(?:/)?$"},{"page":"/addons","regex":"^/addons(?:/)?$","routeKeys":{},"namedRegex":"^/addons(?:/)?$"},{"page":"/ai-generate","regex":"^/ai\\-generate(?:/)?$","routeKeys":{},"namedRegex":"^/ai\\-generate(?:/)?$"},{"page":"/apple-icon","regex":"^/apple\\-icon(?:/)?$","routeKeys":{},"namedRegex":"^/apple\\-icon(?:/)?$"},{"page":"/auth/error","regex":"^/auth/error(?:/)?$","routeKeys":{},"namedRegex":"^/auth/error(?:/)?$"},{"page":"/auth/forgot-password","regex":"^/auth/forgot\\-password(?:/)?$","routeKeys":{},"namedRegex":"^/auth/forgot\\-password(?:/)?$"},{"page":"/auth/payment-required","regex":"^/auth/payment\\-required(?:/)?$","routeKeys":{},"namedRegex":"^/auth/payment\\-required(?:/)?$"},{"page":"/auth/reset-password","regex":"^/auth/reset\\-password(?:/)?$","routeKeys":{},"namedRegex":"^/auth/reset\\-password(?:/)?$"},{"page":"/auth/signin","regex":"^/auth/signin(?:/)?$","routeKeys":{},"namedRegex":"^/auth/signin(?:/)?$"},{"page":"/auth/signup","regex":"^/auth/signup(?:/)?$","routeKeys":{},"namedRegex":"^/auth/signup(?:/)?$"},{"page":"/dashboard","regex":"^/dashboard(?:/)?$","routeKeys":{},"namedRegex":"^/dashboard(?:/)?$"},{"page":"/debug","regex":"^/debug(?:/)?$","routeKeys":{},"namedRegex":"^/debug(?:/)?$"},{"page":"/epics","regex":"^/epics(?:/)?$","routeKeys":{},"namedRegex":"^/epics(?:/)?$"},{"page":"/icon","regex":"^/icon(?:/)?$","routeKeys":{},"namedRegex":"^/icon(?:/)?$"},{"page":"/notifications","regex":"^/notifications(?:/)?$","routeKeys":{},"namedRegex":"^/notifications(?:/)?$"},{"page":"/pricing","regex":"^/pricing(?:/)?$","routeKeys":{},"namedRegex":"^/pricing(?:/)?$"},{"page":"/projects","regex":"^/projects(?:/)?$","routeKeys":{},"namedRegex":"^/projects(?:/)?$"},{"page":"/projects/new","regex":"^/projects/new(?:/)?$","routeKeys":{},"namedRegex":"^/projects/new(?:/)?$"},{"page":"/settings","regex":"^/settings(?:/)?$","routeKeys":{},"namedRegex":"^/settings(?:/)?$"},{"page":"/settings/billing","regex":"^/settings/billing(?:/)?$","routeKeys":{},"namedRegex":"^/settings/billing(?:/)?$"},{"page":"/stories","regex":"^/stories(?:/)?$","routeKeys":{},"namedRegex":"^/stories(?:/)?$"},{"page":"/tasks","regex":"^/tasks(?:/)?$","routeKeys":{},"namedRegex":"^/tasks(?:/)?$"},{"page":"/team","regex":"^/team(?:/)?$","routeKeys":{},"namedRegex":"^/team(?:/)?$"}],"dynamicRoutes":[{"page":"/api/ai/ac-validator/[storyId]/history","regex":"^/api/ai/ac\\-validator/([^/]+?)/history(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/ai/ac\\-validator/(?<nxtPstoryId>[^/]+?)/history(?:/)?$"},{"page":"/api/ai/autopilot/[jobId]/approve","regex":"^/api/ai/autopilot/([^/]+?)/approve(?:/)?$","routeKeys":{"nxtPjobId":"nxtPjobId"},"namedRegex":"^/api/ai/autopilot/(?<nxtPjobId>[^/]+?)/approve(?:/)?$"},{"page":"/api/ai/autopilot/[jobId]/retry","regex":"^/api/ai/autopilot/([^/]+?)/retry(?:/)?$","routeKeys":{"nxtPjobId":"nxtPjobId"},"namedRegex":"^/api/ai/autopilot/(?<nxtPjobId>[^/]+?)/retry(?:/)?$"},{"page":"/api/ai/planning/[sprintId]/history","regex":"^/api/ai/planning/([^/]+?)/history(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/ai/planning/(?<nxtPsprintId>[^/]+?)/history(?:/)?$"},{"page":"/api/ai/test-generator/[artefactId]","regex":"^/api/ai/test\\-generator/([^/]+?)(?:/)?$","routeKeys":{"nxtPartefactId":"nxtPartefactId"},"namedRegex":"^/api/ai/test\\-generator/(?<nxtPartefactId>[^/]+?)(?:/)?$"},{"page":"/api/auth/[...nextauth]","regex":"^/api/auth/(.+?)(?:/)?$","routeKeys":{"nxtPnextauth":"nxtPnextauth"},"namedRegex":"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{"page":"/api/billing/add-ons/[id]/cancel","regex":"^/api/billing/add\\-ons/([^/]+?)/cancel(?:/)?$","routeKeys":{"nxtPid":"nxtPid"},"namedRegex":"^/api/billing/add\\-ons/(?<nxtPid>[^/]+?)/cancel(?:/)?$"},{"page":"/api/comments/[commentId]","regex":"^/api/comments/([^/]+?)(?:/)?$","routeKeys":{"nxtPcommentId":"nxtPcommentId"},"namedRegex":"^/api/comments/(?<nxtPcommentId>[^/]+?)(?:/)?$"},{"page":"/api/comments/[commentId]/reactions","regex":"^/api/comments/([^/]+?)/reactions(?:/)?$","routeKeys":{"nxtPcommentId":"nxtPcommentId"},"namedRegex":"^/api/comments/(?<nxtPcommentId>[^/]+?)/reactions(?:/)?$"},{"page":"/api/documents/[documentId]/download","regex":"^/api/documents/([^/]+?)/download(?:/)?$","routeKeys":{"nxtPdocumentId":"nxtPdocumentId"},"namedRegex":"^/api/documents/(?<nxtPdocumentId>[^/]+?)/download(?:/)?$"},{"page":"/api/epics/[epicId]","regex":"^/api/epics/([^/]+?)(?:/)?$","routeKeys":{"nxtPepicId":"nxtPepicId"},"namedRegex":"^/api/epics/(?<nxtPepicId>[^/]+?)(?:/)?$"},{"page":"/api/epics/[epicId]/progress","regex":"^/api/epics/([^/]+?)/progress(?:/)?$","routeKeys":{"nxtPepicId":"nxtPepicId"},"namedRegex":"^/api/epics/(?<nxtPepicId>[^/]+?)/progress(?:/)?$"},{"page":"/api/epics/[epicId]/publish","regex":"^/api/epics/([^/]+?)/publish(?:/)?$","routeKeys":{"nxtPepicId":"nxtPepicId"},"namedRegex":"^/api/epics/(?<nxtPepicId>[^/]+?)/publish(?:/)?$"},{"page":"/api/epics/[epicId]/status","regex":"^/api/epics/([^/]+?)/status(?:/)?$","routeKeys":{"nxtPepicId":"nxtPepicId"},"namedRegex":"^/api/epics/(?<nxtPepicId>[^/]+?)/status(?:/)?$"},{"page":"/api/epics/[epicId]/stories","regex":"^/api/epics/([^/]+?)/stories(?:/)?$","routeKeys":{"nxtPepicId":"nxtPepicId"},"namedRegex":"^/api/epics/(?<nxtPepicId>[^/]+?)/stories(?:/)?$"},{"page":"/api/organizations/[orgId]/projects","regex":"^/api/organizations/([^/]+?)/projects(?:/)?$","routeKeys":{"nxtPorgId":"nxtPorgId"},"namedRegex":"^/api/organizations/(?<nxtPorgId>[^/]+?)/projects(?:/)?$"},{"page":"/api/organizations/[orgId]/projects/[projectId]","regex":"^/api/organizations/([^/]+?)/projects/([^/]+?)(?:/)?$","routeKeys":{"nxtPorgId":"nxtPorgId","nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/organizations/(?<nxtPorgId>[^/]+?)/projects/(?<nxtPprojectId>[^/]+?)(?:/)?$"},{"page":"/api/projects/[projectId]","regex":"^/api/projects/([^/]+?)(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)(?:/)?$"},{"page":"/api/projects/[projectId]/activate","regex":"^/api/projects/([^/]+?)/activate(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/activate(?:/)?$"},{"page":"/api/projects/[projectId]/archive","regex":"^/api/projects/([^/]+?)/archive(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/archive(?:/)?$"},{"page":"/api/projects/[projectId]/epics","regex":"^/api/projects/([^/]+?)/epics(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/epics(?:/)?$"},{"page":"/api/projects/[projectId]/export","regex":"^/api/projects/([^/]+?)/export(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/export(?:/)?$"},{"page":"/api/projects/[projectId]/files/process-and-analyze","regex":"^/api/projects/([^/]+?)/files/process\\-and\\-analyze(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/files/process\\-and\\-analyze(?:/)?$"},{"page":"/api/projects/[projectId]/sprints","regex":"^/api/projects/([^/]+?)/sprints(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/sprints(?:/)?$"},{"page":"/api/projects/[projectId]/sprints/active","regex":"^/api/projects/([^/]+?)/sprints/active(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/sprints/active(?:/)?$"},{"page":"/api/projects/[projectId]/stats","regex":"^/api/projects/([^/]+?)/stats(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/stats(?:/)?$"},{"page":"/api/projects/[projectId]/stories","regex":"^/api/projects/([^/]+?)/stories(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/stories(?:/)?$"},{"page":"/api/projects/[projectId]/velocity","regex":"^/api/projects/([^/]+?)/velocity(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/api/projects/(?<nxtPprojectId>[^/]+?)/velocity(?:/)?$"},{"page":"/api/sprints/[sprintId]","regex":"^/api/sprints/([^/]+?)(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)(?:/)?$"},{"page":"/api/sprints/[sprintId]/actions","regex":"^/api/sprints/([^/]+?)/actions(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)/actions(?:/)?$"},{"page":"/api/sprints/[sprintId]/burndown","regex":"^/api/sprints/([^/]+?)/burndown(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)/burndown(?:/)?$"},{"page":"/api/sprints/[sprintId]/metrics","regex":"^/api/sprints/([^/]+?)/metrics(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)/metrics(?:/)?$"},{"page":"/api/sprints/[sprintId]/stories","regex":"^/api/sprints/([^/]+?)/stories(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)/stories(?:/)?$"},{"page":"/api/sprints/[sprintId]/stories/manage","regex":"^/api/sprints/([^/]+?)/stories/manage(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)/stories/manage(?:/)?$"},{"page":"/api/sprints/[sprintId]/velocity","regex":"^/api/sprints/([^/]+?)/velocity(?:/)?$","routeKeys":{"nxtPsprintId":"nxtPsprintId"},"namedRegex":"^/api/sprints/(?<nxtPsprintId>[^/]+?)/velocity(?:/)?$"},{"page":"/api/stories/[storyId]","regex":"^/api/stories/([^/]+?)(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)(?:/)?$"},{"page":"/api/stories/[storyId]/ai-split-suggestions","regex":"^/api/stories/([^/]+?)/ai\\-split\\-suggestions(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/ai\\-split\\-suggestions(?:/)?$"},{"page":"/api/stories/[storyId]/move","regex":"^/api/stories/([^/]+?)/move(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/move(?:/)?$"},{"page":"/api/stories/[storyId]/split","regex":"^/api/stories/([^/]+?)/split(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/split(?:/)?$"},{"page":"/api/stories/[storyId]/split-analysis","regex":"^/api/stories/([^/]+?)/split\\-analysis(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/split\\-analysis(?:/)?$"},{"page":"/api/stories/[storyId]/split-enhanced","regex":"^/api/stories/([^/]+?)/split\\-enhanced(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/split\\-enhanced(?:/)?$"},{"page":"/api/stories/[storyId]/sprint","regex":"^/api/stories/([^/]+?)/sprint(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/sprint(?:/)?$"},{"page":"/api/stories/[storyId]/tasks","regex":"^/api/stories/([^/]+?)/tasks(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/api/stories/(?<nxtPstoryId>[^/]+?)/tasks(?:/)?$"},{"page":"/api/tasks/[taskId]","regex":"^/api/tasks/([^/]+?)(?:/)?$","routeKeys":{"nxtPtaskId":"nxtPtaskId"},"namedRegex":"^/api/tasks/(?<nxtPtaskId>[^/]+?)(?:/)?$"},{"page":"/api/team/invite/[invitationId]","regex":"^/api/team/invite/([^/]+?)(?:/)?$","routeKeys":{"nxtPinvitationId":"nxtPinvitationId"},"namedRegex":"^/api/team/invite/(?<nxtPinvitationId>[^/]+?)(?:/)?$"},{"page":"/api/templates/[templateId]","regex":"^/api/templates/([^/]+?)(?:/)?$","routeKeys":{"nxtPtemplateId":"nxtPtemplateId"},"namedRegex":"^/api/templates/(?<nxtPtemplateId>[^/]+?)(?:/)?$"},{"page":"/api/templates/[templateId]/apply","regex":"^/api/templates/([^/]+?)/apply(?:/)?$","routeKeys":{"nxtPtemplateId":"nxtPtemplateId"},"namedRegex":"^/api/templates/(?<nxtPtemplateId>[^/]+?)/apply(?:/)?$"},{"page":"/api/users/[userId]","regex":"^/api/users/([^/]+?)(?:/)?$","routeKeys":{"nxtPuserId":"nxtPuserId"},"namedRegex":"^/api/users/(?<nxtPuserId>[^/]+?)(?:/)?$"},{"page":"/api/users/[userId]/activity","regex":"^/api/users/([^/]+?)/activity(?:/)?$","routeKeys":{"nxtPuserId":"nxtPuserId"},"namedRegex":"^/api/users/(?<nxtPuserId>[^/]+?)/activity(?:/)?$"},{"page":"/api/users/[userId]/stats","regex":"^/api/users/([^/]+?)/stats(?:/)?$","routeKeys":{"nxtPuserId":"nxtPuserId"},"namedRegex":"^/api/users/(?<nxtPuserId>[^/]+?)/stats(?:/)?$"},{"page":"/api/users/[userId]/stories","regex":"^/api/users/([^/]+?)/stories(?:/)?$","routeKeys":{"nxtPuserId":"nxtPuserId"},"namedRegex":"^/api/users/(?<nxtPuserId>[^/]+?)/stories(?:/)?$"},{"page":"/projects/[projectId]","regex":"^/projects/([^/]+?)(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId"},"namedRegex":"^/projects/(?<nxtPprojectId>[^/]+?)(?:/)?$"},{"page":"/projects/[projectId]/epics/[epicId]","regex":"^/projects/([^/]+?)/epics/([^/]+?)(?:/)?$","routeKeys":{"nxtPprojectId":"nxtPprojectId","nxtPepicId":"nxtPepicId"},"namedRegex":"^/projects/(?<nxtPprojectId>[^/]+?)/epics/(?<nxtPepicId>[^/]+?)(?:/)?$"},{"page":"/stories/[storyId]","regex":"^/stories/([^/]+?)(?:/)?$","routeKeys":{"nxtPstoryId":"nxtPstoryId"},"namedRegex":"^/stories/(?<nxtPstoryId>[^/]+?)(?:/)?$"}],"nextConfig":{"basePath":""}}
  )
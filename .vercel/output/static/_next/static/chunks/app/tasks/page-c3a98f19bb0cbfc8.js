try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="be3cbf9b-a8c9-4c39-8608-c491723c0758",e._sentryDebugIdIdentifier="sentry-dbid-be3cbf9b-a8c9-4c39-8608-c491723c0758")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8147],{6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},20508:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24033:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},26983:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},30247:(e,s,t)=>{Promise.resolve().then(t.bind(t,60435))},60435:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(95155),r=t(12115),l=t(36489),i=t(20063),c=t(61194),n=t(26983),o=t(6132),d=t(99051),h=t(6191),m=t(86651),x=t(87717),u=t(89715),p=t(71360),g=t(20508),j=t(97003),y=t(83209),f=t(67812),b=t(47507),v=t(33789),w=t(44022),N=t(46070),k=t(48248),A=t(25016),S=t(18720);function C(){let{status:e}=(0,l.useSession)(),s=(0,i.useRouter)(),t=(0,i.useSearchParams)(),C=null==t?void 0:t.get("highlight"),[E,P]=r.useState([]),[I,T]=r.useState([]),[_,M]=r.useState([]),[F,L]=r.useState(!0),[D,H]=r.useState(""),[$,z]=r.useState(!1),[U,V]=r.useState(""),[G,O]=r.useState(""),[R,q]=r.useState("all"),[B,W]=r.useState("all"),[Z,Y]=r.useState("all"),[J,K]=r.useState("all"),[Q,X]=r.useState(""),[ee,es]=r.useState(1),[et,ea]=r.useState(24),er=r.useMemo(()=>[...I].sort((e,s)=>e.name.localeCompare(s.name)),[I]),el=r.useMemo(()=>[..."all"===B?_:_.filter(e=>e.projectId===B)].sort((e,s)=>e.title.localeCompare(s.title)),[_,B]);r.useEffect(()=>{"all"!==Z&&(el.some(e=>e.id===Z)||Y("all"))},[el,Z]),r.useEffect(()=>{"all"!==B&&(I.some(e=>e.id===B)||W("all"))},[I,B]);let ei=r.useCallback(async()=>{try{L(!0),H(""),M([]);let[e,s]=await Promise.all([fetch("/api/projects",{cache:"no-store",credentials:"include"}),fetch("/api/tasks?limit=1000",{cache:"no-store",credentials:"include"})]);if(!e.ok)throw Error("Failed to load projects");if(!s.ok)throw Error("Failed to load tasks");let t=await e.json(),a=await s.json(),r=Array.isArray(null==t?void 0:t.data)?t.data:[],l=Array.isArray(null==a?void 0:a.data)?a.data:[];if(T(r),P(l),r.length>0){let e=await Promise.all(r.map(async e=>{try{let s=await fetch("/api/projects/".concat(e.id,"/stories"),{cache:"no-store",credentials:"include"});if(!s.ok)throw Error("Failed to load stories");let t=await s.json();return Array.isArray(null==t?void 0:t.data)?t.data:[]}catch(s){return console.error("Failed to fetch stories for project ".concat(e.id,":"),s),[]}}));M(e.flat())}}catch(e){console.error("Failed to fetch data:",e),H(e.message||"Failed to load tasks")}finally{L(!1)}},[]);r.useEffect(()=>{if("unauthenticated"===e)return void s.push("/auth/signin");"authenticated"===e&&ei()},[e,s,ei]);let ec=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),en=async(e,s)=>{if(s.stopPropagation(),confirm("Are you sure you want to delete this task?"))try{if(!(await fetch("/api/tasks/".concat(e),{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to delete task");S.o.success("Task deleted successfully!"),ei()}catch(e){S.o.error(e.message||"Failed to delete task")}};r.useEffect(()=>{C&&!F&&setTimeout(()=>{let e=document.getElementById("task-".concat(C));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{let e=new URLSearchParams(window.location.search);e.delete("highlight"),s.replace("".concat(window.location.pathname).concat(e.toString()?"?"+e.toString():""),{scroll:!1})},3e3))},100)},[C,F,s]);let eo=r.useMemo(()=>{let e=Q.trim().toLowerCase();return E.filter(s=>{var t,a;let r=0===e.length||s.title.toLowerCase().includes(e)||null!=(a=null==(t=s.description)?void 0:t.toLowerCase().includes(e))&&a,l="all"===R||s.status===R,i="all"===B||s.projectId===B,c="all"===Z||s.storyId===Z,n="all"===J||s.priority===J;return r&&l&&i&&c&&n})},[E,Q,R,B,Z,J]);r.useEffect(()=>{es(1)},[Q,R,B,Z,J]);let ed=eo.length,eh=(ee-1)*et,em=eo.slice(eh,eh+et);return"loading"===e||F?(0,a.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,a.jsx)(N.AppSidebar,{}),(0,a.jsx)("main",{className:"flex-1 md:ml-64",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading tasks..."})})})]}):(0,a.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,a.jsx)(N.AppSidebar,{}),(0,a.jsxs)("main",{className:"flex-1 md:ml-64",children:[(0,a.jsx)("div",{className:"border-b border-gray-700 bg-gray-800/50 backdrop-blur-xl sticky top-0 z-10",children:(0,a.jsx)("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 py-4 md:py-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center shadow-lg shadow-purple-500/50",children:(0,a.jsx)(c.A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"All Tasks"}),(0,a.jsx)("p",{className:"text-gray-400",children:"View and manage all your tasks across projects"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,a.jsx)(j.$,{variant:"outline",size:"sm",onClick:ei,disabled:F,children:"Refresh"}),(0,a.jsxs)(j.$,{size:"sm",onClick:()=>{var e;if(0===I.length){S.o.error("Please create a project first"),s.push("/projects");return}let t="all"!==B?B:null==(e=I[0])?void 0:e.id;if(!t)return void S.o.error("No project selected");let a="all"!==Z?Z:"";V(t),O(a),z(!0)},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"New Task"]}),(0,a.jsxs)(f.E,{variant:"secondary",className:"text-sm",children:[eo.length," ",1===eo.length?"task":"tasks"]})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(v.p,{type:"text",placeholder:"Search tasks by title or description...",value:Q,onChange:e=>X(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Status"}),(0,a.jsxs)(b.l,{value:R,onChange:e=>q(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"todo",children:"To Do"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"done",children:"Done"}),(0,a.jsx)("option",{value:"blocked",children:"Blocked"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Project"}),(0,a.jsxs)(b.l,{value:B,onChange:e=>W(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Projects"}),er.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.key,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Story"}),(0,a.jsxs)(b.l,{value:Z,onChange:e=>Y(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Stories"}),el.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Priority"}),(0,a.jsxs)(b.l,{value:J,onChange:e=>K(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Priorities"}),(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]})]})]}),D&&(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center justify-between gap-4 flex-wrap",children:[(0,a.jsx)("span",{children:D}),(0,a.jsx)(j.$,{variant:"outline",size:"sm",onClick:ei,children:"Try again"})]}),0===eo.length?(0,a.jsx)(y.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,a.jsxs)(y.Wu,{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-full bg-purple-500/10 flex items-center justify-center mb-4",children:(0,a.jsx)(c.A,{className:"h-8 w-8 text-purple-400"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:0===E.length?"No Tasks Yet":"No Tasks Match Filters"}),(0,a.jsx)("p",{className:"text-gray-400 text-center max-w-md mb-6",children:0===E.length?"Create your first task in a story or project.":"Try adjusting your filter criteria to see more results."}),0===E.length&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(j.$,{onClick:()=>s.push("/projects"),children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Go to Projects"]}),(0,a.jsxs)(j.$,{variant:"outline",onClick:()=>s.push("/stories"),children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Go to Stories"]})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:em.map(e=>{let t,r;return(0,a.jsx)(y.Zp,{id:"task-".concat(e.id),className:(0,A.cn)("bg-gray-800/50 border-gray-700 hover:border-purple-500/50 hover:shadow-lg hover:shadow-purple-500/10 transition-all cursor-pointer group",C===e.id&&"ring-2 ring-purple-500 border-purple-500 animate-pulse"),onClick:()=>e.story&&s.push("/stories/".concat(e.storyId)),children:(0,a.jsxs)(y.Wu,{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[e.priority&&(0,a.jsx)(f.E,{className:(0,A.cn)("text-xs border",(e=>{switch(e){case"critical":return"bg-red-500/10 text-red-400 border-red-500/20";case"high":return"bg-orange-500/10 text-orange-400 border-orange-500/20";case"medium":return"bg-yellow-500/10 text-yellow-400 border-yellow-500/20";case"low":return"bg-green-500/10 text-green-400 border-green-500/20";default:return"bg-gray-500/10 text-gray-400 border-gray-500/20"}})(e.priority)),children:(t=e.priority)?ec(t):"Unspecified"}),(0,a.jsxs)(f.E,{className:(0,A.cn)("text-xs border flex items-center gap-1",(e=>{switch(e){case"done":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"in_progress":return"bg-purple-500/10 text-purple-400 border-purple-500/20";case"blocked":return"bg-red-500/10 text-red-400 border-red-500/20";default:return"bg-gray-500/10 text-gray-400 border-gray-500/20"}})(e.status)),children:[(e=>{switch(e){case"done":return(0,a.jsx)(c.A,{className:"h-3.5 w-3.5"});case"in_progress":return(0,a.jsx)(n.A,{className:"h-3.5 w-3.5"});case"blocked":return(0,a.jsx)(o.A,{className:"h-3.5 w-3.5"});default:return(0,a.jsx)(d.A,{className:"h-3.5 w-3.5"})}})(e.status),(r=e.status)?ec(r):"Unknown"]})]}),(0,a.jsx)("div",{className:"hidden group-hover:flex items-center gap-1",children:(0,a.jsx)(j.$,{size:"sm",variant:"ghost",onClick:s=>en(e.id,s),className:"h-7 w-7 p-0 text-red-400 hover:text-red-300 hover:bg-red-400/10",children:(0,a.jsx)(p.A,{className:"h-3.5 w-3.5"})})})]}),(0,a.jsx)("h3",{className:"font-semibold text-white mb-2 line-clamp-2 group-hover:text-purple-400 transition-colors",children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2 mb-3",children:[e.project&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)(x.A,{className:"h-3 w-3 text-gray-500"}),(0,a.jsxs)("span",{className:"text-gray-400",children:[e.project.name," (",e.project.key,")"]})]}),e.story&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)(u.A,{className:"h-3 w-3 text-gray-500"}),(0,a.jsx)("span",{className:"text-gray-400 line-clamp-1",children:e.story.title})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.estimatedHours&&(0,a.jsxs)("span",{className:"font-mono",children:[e.estimatedHours,"h est"]}),e.actualHours&&(0,a.jsxs)("span",{className:"font-mono",children:[e.actualHours,"h act"]})]}),e.assignee&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.assignee.name||e.assignee.email})]})]})]})},e.id)})}),eo.length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(w.d,{currentPage:ee,totalItems:ed,itemsPerPage:et,onPageChange:e=>{es(e),window.scrollTo({top:0,behavior:"smooth"})},onItemsPerPageChange:e=>{ea(e),es(1)},itemName:"tasks"})})]})]})]}),$&&(0,a.jsx)(k.G,{open:$,onOpenChange:z,storyId:G||void 0,projectId:U,onSuccess:()=>{z(!1),ei(),S.o.success("Task saved successfully!")}})]})}function E(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,a.jsx)(N.AppSidebar,{}),(0,a.jsx)("main",{className:"flex-1 ml-64",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading tasks..."})})})]}),children:(0,a.jsx)(C,{})})}},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},99051:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[5707,6489,8720,9484,8184,5193,575,4964,8248,4850,8441,504,7358],()=>e(e.s=30247)),_N_E=e.O()}]);
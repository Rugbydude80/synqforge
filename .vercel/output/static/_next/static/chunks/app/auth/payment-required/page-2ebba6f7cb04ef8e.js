try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="13f4f5d6-320c-42f4-8f22-17e619d1ca67",e._sentryDebugIdIdentifier="sentry-dbid-13f4f5d6-320c-42f4-8f22-17e619d1ca67")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7946],{25016:(e,r,a)=>{"use strict";a.d(r,{IM:()=>l,cn:()=>n,fw:()=>i});var t=a(2821),s=a(75889);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}function i(e){let r=new Date,a=new Date(e),t=Math.floor((r.getTime()-a.getTime())/1e3);return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):t<604800?"".concat(Math.floor(t/86400),"d ago"):new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function l(e){return e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}},27306:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>j,dynamic:()=>y});var t=a(95155),s=a(12115),n=a(20063),i=a(36489),l=a(52619),o=a.n(l),d=a(83209),c=a(97003),h=a(95740),u=a(56154),m=a(19408),p=a(35299),g=a(6132),f=a(61362),x=a(78519),b=a(25016);let y="force-dynamic",w=[{id:"free",name:"Free",price:0,icon:h.A,description:"Perfect for trying out SynqForge",features:["1 project","Up to 50 stories","5K AI tokens","7-day trial"]},{id:"solo",name:"Solo",price:19,icon:h.A,description:"For individual developers",features:["3 projects","200 stories/month","150K AI tokens"]},{id:"team",name:"Team",price:29,icon:u.A,description:"For small teams",features:["10 projects","500 stories/month","500K AI tokens"],popular:!0},{id:"pro",name:"Pro",price:99,icon:m.A,description:"For growing organizations",features:["Unlimited projects","2K stories/month","2.5M AI tokens"]},{id:"enterprise",name:"Enterprise",price:299,icon:m.A,description:"For large organizations",features:["Everything unlimited","Dedicated support","SSO/SAML"]}];function j(){let e=(0,n.useRouter)(),r=(0,n.useSearchParams)(),{status:a}=(0,i.useSession)(),l=r.get("returnUrl")||"/dashboard",[h,u]=(0,s.useState)("team"),[m,y]=(0,s.useState)(!1),[j,v]=(0,s.useState)(""),[N,k]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{if("loading"!==a){if("unauthenticated"===a)return e.push("/auth/signin");try{let r=await fetch("/api/organizations/me");if(r.ok){let a=await r.json(),t=!!a.trialEndsAt&&new Date(a.trialEndsAt)<new Date;if("active"===a.subscriptionStatus&&!t||"trialing"===a.subscriptionStatus)return void e.push(l);a.plan&&"free"!==a.plan&&u(a.plan)}}catch(e){console.error("Error fetching org details:",e)}finally{k(!1)}}})()},[a,e,l,u]);let C=async()=>{y(!0),v("");try{let r=await fetch("/api/organizations/downgrade-to-free",{method:"POST"});if(r.ok)e.push(l);else{let e=await r.json();v(e.error||"Failed to switch to free plan")}}catch(e){v("An error occurred. Please try again.")}finally{y(!1)}},S=async()=>{y(!0),v("");try{let e=await fetch("/api/billing/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:h,returnUrl:l})});if(e.ok){let r=await e.json();r.checkoutUrl?window.location.href=r.checkoutUrl:v("Failed to create checkout session")}else{let r=await e.json();v(r.error||"Failed to create checkout session")}}catch(e){v("An error occurred. Please try again.")}finally{y(!1)}},A=async()=>{await (0,i.signOut)({callbackUrl:"/"})};return N?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(p.A,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Checking subscription status..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"container max-w-6xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)(o(),{href:"/",className:"text-2xl font-bold gradient-text",children:"SynqForge"}),(0,t.jsx)(c.$,{variant:"ghost",onClick:A,children:"Sign out"})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(d.Zp,{className:"border-amber-500/50 bg-amber-500/5",children:(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(g.A,{className:"h-6 w-6 text-amber-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-1",children:"Payment Required"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"To continue using SynqForge, please complete your subscription payment or switch to the free plan."})]})]})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Choose your plan"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Select a plan to continue, or use our free plan with limited features"}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-8",children:w.map(e=>{let r=e.icon;return(0,t.jsxs)(d.Zp,{className:(0,b.cn)("relative cursor-pointer transition-all hover:scale-105",h===e.id&&"border-brand-purple-500 shadow-xl shadow-brand-purple-500/20",e.popular&&"border-brand-purple-500/50"),onClick:()=>u(e.id),children:[e.popular&&(0,t.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-primary rounded-full text-xs font-medium text-white",children:"Most Popular"}),(0,t.jsxs)(d.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-gradient-primary",children:(0,t.jsx)(r,{className:"h-4 w-4 text-white"})}),(0,t.jsx)(d.ZB,{className:"text-lg",children:e.name})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold",children:["\xa3",e.price]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"/month"})]}),(0,t.jsx)(d.BT,{className:"mt-2",children:e.description})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)("ul",{className:"space-y-2",children:e.features.map(e=>(0,t.jsxs)("li",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-brand-emerald-500"}),e]},e))})})]},e.id)})}),j&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive",children:j}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:"free"===h?(0,t.jsx)(c.$,{size:"lg",onClick:C,disabled:m,className:"min-w-[200px]",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Switching to Free..."]}):(0,t.jsx)(t.Fragment,{children:"Continue with Free Plan"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.$,{size:"lg",onClick:S,disabled:m,className:"min-w-[200px]",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Redirecting to payment..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Continue to Payment"]})}),(0,t.jsx)(c.$,{size:"lg",variant:"outline",onClick:()=>u("free"),disabled:m,children:"Use Free Plan Instead"})]})})]})]})]})})}},34870:(e,r,a)=>{Promise.resolve().then(a.bind(a,27306))},83209:(e,r,a)=>{"use strict";a.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>h});var t=a(95155),s=a(12115),n=a(25016);let i=s.forwardRef((e,r)=>{let{className:a,gradient:s,...i}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg dark:border-gray-800 dark:bg-gray-900 dark:text-gray-100",s&&"relative before:absolute before:inset-0 before:rounded-xl before:p-[1px] before:bg-gradient-to-r before:from-brand-purple-500 before:to-brand-emerald-500 before:-z-10",a),...i,children:s?(0,t.jsx)("div",{className:"relative z-10 bg-white dark:bg-gray-900 rounded-xl p-6",children:i.children}):i.children})});i.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let h=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});h.displayName="CardFooter"},97003:(e,r,a)=>{"use strict";a.d(r,{$:()=>d});var t=a(95155),s=a(12115),n=a(32467),i=a(83101),l=a(25016);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-purple-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gradient-to-r from-brand-purple-600 to-brand-purple-500 text-white shadow-lg shadow-brand-purple-500/30 hover:shadow-xl hover:shadow-brand-purple-500/40 hover:scale-105 active:scale-95",secondary:"bg-gray-100 text-gray-900 shadow-sm hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",outline:"border-2 border-gray-300 bg-transparent hover:bg-gray-100 hover:border-brand-purple-500 dark:border-gray-700 dark:hover:bg-gray-800",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-100",link:"text-brand-purple-600 underline-offset-4 hover:underline",destructive:"bg-red-600 text-white shadow-sm hover:bg-red-700",purple:"bg-brand-purple-600 text-white shadow-lg shadow-brand-purple-500/30 hover:bg-brand-purple-700 hover:shadow-xl hover:shadow-brand-purple-500/40",emerald:"bg-brand-emerald-600 text-white shadow-lg shadow-brand-emerald-500/30 hover:bg-brand-emerald-700 hover:shadow-xl hover:shadow-brand-emerald-500/40",glass:"bg-white/10 backdrop-blur-lg border border-white/20 text-gray-900 hover:bg-white/20 dark:text-gray-100"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:a,variant:s,size:i,asChild:d=!1,loading:c,children:h,disabled:u,...m}=e,p=d?n.DX:"button";return(0,t.jsx)(p,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:r,disabled:u||c,...m,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:"Loading..."})]}):h})});d.displayName="Button"}},e=>{e.O(0,[5707,6489,2403,4850,8441,504,7358],()=>e(e.s=34870)),_N_E=e.O()}]);
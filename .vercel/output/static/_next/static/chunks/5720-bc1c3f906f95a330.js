try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c2eadc06-52cf-426b-9dc1-75cfb3066cf3",e._sentryDebugIdIdentifier="sentry-dbid-c2eadc06-52cf-426b-9dc1-75cfb3066cf3")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5720],{20639:(e,t,i)=>{i.d(t,{A:()=>s});let s=(0,i(71847).A)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]])},65720:(e,t,i)=>{i.d(t,{F:()=>h});var s=i(95155),a=i(12115),r=i(18720),l=i(2327),d=i(54679),c=i(97003),o=i(33789),n=i(67001),p=i(90235),u=i(47507),g=i(20639);function h(e){let{open:t,onOpenChange:i,projectId:h,epic:m,onSuccess:x}=e,[v,y]=a.useState(!1),[f,j]=a.useState(!1),[b,D]=a.useState(null),[w,N]=a.useState({title:"",description:"",goals:"",priority:"medium",color:"#a855f7",startDate:"",targetDate:""});a.useEffect(()=>{m?N({title:m.title,description:m.description||"",goals:m.goals||"",priority:m.priority,color:m.color||"#a855f7",startDate:m.startDate||"",targetDate:m.targetDate||""}):N({title:"",description:"",goals:"",priority:"medium",color:"#a855f7",startDate:"",targetDate:""})},[m,t]);let C=async e=>{if(e.preventDefault(),!w.title.trim())return void D("Title is required");if(!m&&!h)return void D("Project is required when creating a new epic");y(!0),D(null);try{let e={projectId:m?m.projectId:h,title:w.title.trim(),description:w.description.trim()||void 0,goals:w.goals.trim()||void 0,priority:w.priority,color:w.color,startDate:w.startDate||void 0,targetDate:w.targetDate||void 0};m?(await l.F.epics.update(m.id,e),r.o.success("Epic updated successfully!")):(await l.F.epics.create(e),r.o.success("Epic created successfully!")),N({title:"",description:"",goals:"",priority:"medium",color:"#a855f7",startDate:"",targetDate:""}),null==x||x(),i(!1)}catch(t){let e=t.message||t.error||"Failed to save epic";D(e),r.o.error(e),console.error("Failed to save epic:",t)}finally{y(!1)}},E=async()=>{if(m){j(!0),D(null);try{await l.F.epics.publish(m.id),r.o.success("Epic published successfully! Stories are now active."),null==x||x(),i(!1)}catch(t){let e=t.message||t.error||"Failed to publish epic";D(e),r.o.error(e),console.error("Failed to publish epic:",t)}finally{j(!1)}}},F=m&&"draft"===m.status;return(0,s.jsx)(d.lG,{open:t,onOpenChange:i,children:(0,s.jsx)(d.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsxs)(d.c7,{children:[(0,s.jsx)(d.L3,{children:m?"Edit Epic":"Create New Epic"}),(0,s.jsx)(d.rr,{children:m?"Update epic details":"Add a new epic to organize your stories"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"title",children:"Title *"}),(0,s.jsx)(o.p,{id:"title",placeholder:"User Authentication System",value:w.title,onChange:e=>N(t=>({...t,title:e.target.value})),maxLength:255,disabled:v,autoFocus:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(n.T,{id:"description",placeholder:"Describe the epic and its purpose...",value:w.description,onChange:e=>N(t=>({...t,description:e.target.value})),maxLength:2e3,disabled:v,rows:3})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"goals",children:"Goals"}),(0,s.jsx)(n.T,{id:"goals",placeholder:"What are the goals of this epic?",value:w.goals,onChange:e=>N(t=>({...t,goals:e.target.value})),maxLength:1e3,disabled:v,rows:2})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"priority",children:"Priority"}),(0,s.jsxs)(u.l,{id:"priority",value:w.priority,onChange:e=>N(t=>({...t,priority:e.target.value})),disabled:v,children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"color",children:"Color"}),(0,s.jsx)(o.p,{id:"color",type:"color",value:w.color,onChange:e=>N(t=>({...t,color:e.target.value})),disabled:v})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(o.p,{id:"startDate",type:"date",value:w.startDate,onChange:e=>N(t=>({...t,startDate:e.target.value})),disabled:v})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"targetDate",children:"Target Date"}),(0,s.jsx)(o.p,{id:"targetDate",type:"date",value:w.targetDate,onChange:e=>N(t=>({...t,targetDate:e.target.value})),disabled:v})]})]}),m&&m.status&&(0,s.jsx)("div",{className:"grid gap-2 p-3 bg-gray-800/50 border border-gray-700 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"text-sm",children:"Current Status"}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["draft"===m.status&&"Epic is in draft mode. Publish to make stories visible.","published"===m.status&&"Epic is published and stories are active.","in_progress"===m.status&&"Epic is currently in progress.","completed"===m.status&&"Epic has been completed."]})]}),(0,s.jsx)("span",{className:"text-sm font-medium capitalize",children:m.status})]})}),b&&(0,s.jsx)("div",{className:"text-sm text-red-400 bg-red-400/10 border border-red-400/20 rounded-lg px-3 py-2",children:b})]}),(0,s.jsxs)(d.Es,{className:"gap-2",children:[(0,s.jsx)(c.$,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:v||f,children:"Cancel"}),F&&(0,s.jsxs)(c.$,{type:"button",variant:"default",onClick:E,disabled:v||f,className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),f?"Publishing...":"Publish Epic"]}),(0,s.jsx)(c.$,{type:"submit",disabled:v||f,children:v?"Saving...":m?"Update Epic":"Create Epic"})]})]})})})}}}]);